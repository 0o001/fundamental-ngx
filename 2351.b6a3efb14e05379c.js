"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2351],{20198:(Z,B,t)=>{t.d(B,{g:()=>n});var m=t(49671),r=t(27498),p=t(94589),d=t(48180),C=t(38438),S=t(9456),v=t(65879),f=t(42008);let n=(()=>{class A extends p.Ze{constructor(i,_,h,y){var E;super(),E=this,this._dialogService=i,this._smartFilterBar=_,this._smartFilterBarService=h,this._injector=y,this.openConditionsDialog=()=>{const K=this.getField().value;var x;this._dialogService.open(S.e,{data:{header:this.formItem.message,dataType:this.formItem.guiOptions?.additionalData.dataType,filterType:this.formItem.guiOptions?.additionalData.type,conditions:K||[],choices:this.formItem.guiOptions?.additionalData.choices,controlType:this.formItem.guiOptions?.additionalData.controlType,defineStrategyLabels:this._smartFilterBar.defineStrategyLabels},width:"67.5rem",minHeight:"30%"},this._injector).afterClosed.pipe((0,d.q)(1)).subscribe({next:(x=(0,m.Z)(function*(G){const V=E.getField(),Q=yield E._smartFilterBarService.getConditionFieldSelectedVariants(E.formItem,G);V.setValue(Q)}),function(V){return x.apply(this,arguments)}),error:x=>{}})}}getField(){return this.form.get(`${this.formGroupName}.${this.name}`)}}return A.\u0275fac=function(i){return new(i||A)(v.Y36(r.xA),v.Y36(f.j),v.Y36(C.Q),v.Y36(v.zs3))},A.\u0275dir=v.lG2({type:A,features:[v.qOj]}),A})()},72798:(Z,B,t)=>{t.d(B,{v:()=>A});var m=t(27498),r=t(38438),p=t(20198),d=t(65879),C=t(42008),S=t(60095),v=t(14565),f=t(57850);const n=function(){return[]};let A=(()=>{class l extends p.g{constructor(_,h,y,E){super(_,h,y,E)}}return l.\u0275fac=function(_){return new(_||l)(d.Y36(m.xA),d.Y36(C.j),d.Y36(r.Q),d.Y36(d.zs3))},l.\u0275cmp=d.Xpm({type:l,selectors:[["fdp-smart-filter-bar-condition-field"]],features:[d.qOj],decls:4,vars:13,consts:[[3,"formGroup"],[3,"formGroupName"],["displayKey","displayValue",3,"id","addOnButtonClickFn","autofocus","dataSource","formControlName","name","placeholder","glyphAriaLabel"]],template:function(_,h){1&_&&(d.ynx(0,0)(1,1),d._UZ(2,"fdp-multi-input",2),d.ALo(3,"fdTranslate"),d.BQk()()),2&_&&(d.Q6J("formGroup",h.form),d.xp6(1),d.Q6J("formGroupName",h.formGroupName),d.xp6(1),d.Q6J("id",h.id)("addOnButtonClickFn",h.openConditionsDialog)("autofocus",!0)("dataSource",h.formItem.choices||d.DdM(12,n))("formControlName",h.name)("name",h.name)("placeholder",h.formItem.placeholder||h.formItem.message)("glyphAriaLabel",d.lcZ(3,10,"platformSmartFilterBar.manageFieldConditions")))},dependencies:[S.JJ,S.JL,S.sg,S.u,S.x0,v.O,f.n],encapsulation:2}),l})()},9456:(Z,B,t)=>{t.d(B,{e:()=>k});var m=t(49671),r=t(70014),p=t(27498),d=t(94589),C=t(38438),S=t(37387),v=t(27411),f=t(24036),n=t(65879),A=t(96814),l=t(60095),i=t(29466),_=t(95621),h=t(15849),y=t(89003),E=t(1144),K=t(74164),R=t(15243),W=t(72459),x=t(80401),G=t(51683),V=t(44321),Q=t(17054),X=t(18765),w=t(71900),J=t(88320),N=t(57850);function Y(D,U){if(1&D&&(n.TgZ(0,"div",6)(1,"fd-bar-element")(2,"h4",7),n._uU(3),n.qZA()()()),2&D){const s=n.oxw();n.xp6(2),n.Q6J("headerSize",4),n.xp6(1),n.Oqu(s.config.header)}}function j(D,U){if(1&D){const s=n.EpF();n.TgZ(0,"fd-layout-grid")(1,"div",9)(2,"div",10)(3,"fdp-form-generator",13),n.NdJ("formSubmitted",function(g){n.CHM(s);const P=n.oxw(2);return n.KtG(P._onFormSubmitted(g))}),n.qZA()(),n.TgZ(4,"div",14)(5,"fdp-button",15),n.NdJ("click",function(){const P=n.CHM(s).index,q=n.oxw(2);return n.KtG(q.removeCondition(P))}),n.ALo(6,"fdTranslate"),n.qZA()()()()}if(2&D){const s=U.$implicit;n.xp6(3),n.Q6J("formItems",s)("unifiedLayout",!1)("noAdditionalContent",!0),n.xp6(2),n.Q6J("title",n.lcZ(6,4,"platformSmartFilterBar.defineConditionsRemoveConditionButtonTitle"))}}function $(D,U){if(1&D){const s=n.EpF();n.TgZ(0,"form"),n.YNc(1,j,7,6,"fd-layout-grid",8),n.TgZ(2,"fd-layout-grid")(3,"div",9)(4,"div",10),n._uU(5,"\xa0"),n.qZA(),n.TgZ(6,"div",11)(7,"fdp-button",12),n.NdJ("click",function(){n.CHM(s);const g=n.oxw();return n.KtG(g.addCondition())}),n.ALo(8,"fdTranslate"),n.qZA()()()()()}if(2&D){const s=n.oxw();n.xp6(1),n.Q6J("ngForOf",s._formItems),n.xp6(6),n.Q6J("label",n.lcZ(8,2,"platformSmartFilterBar.defineConditionsAddConditionButtonLabel"))}}function z(D,U){1&D&&(n.TgZ(0,"div",16),n._UZ(1,"fd-busy-indicator",17),n.qZA()),2&D&&(n.xp6(1),n.Q6J("loading",!0))}let k=(()=>{class D{constructor(s,u,g,P){this._dialogRef=s,this._language$=u,this._cdr=g,this._smartFilterBarService=P,this.conditionOperatorOptions=[],this._formItems=[],this.loaded=!1,this._conditionLabelKeys={contains:"filterConditionContains",equalTo:"filterConditionEqualTo",between:"filterConditionBetween",beginsWith:"filterConditionBeginsWith",endsWith:"filterConditionEndsWith",lessThan:"filterConditionLessThan",lessThanOrEqualTo:"filterConditionLessThanOrEqualTo",greaterThan:"filterConditionGreaterThan",greaterThanOrEqualTo:"filterConditionGreaterThanOrEqualTo",after:"filterConditionAfter",onOrAfter:"filterConditionOnOrAfter",before:"filterConditionBefore",beforeOrOn:"filterConditionBeforeOrOn"},this._submittedForms=[],this._translationResolver=new v.en,this._init()}_init(){var s=this;return(0,m.Z)(function*(){s.config=s._dialogRef.data,s._language=yield(0,f.z)(s._language$),s.conditionOperatorOptions=yield s._getApplicableConditionOperators(),s._addExistingConditions((0,S.T)(s.config.conditions)),0===s.config.conditions.length&&s.addCondition(),s.loaded=!0,s._cdr.markForCheck()})()}addCondition(){this._formItems.push(this._generateFormGeneratorItems())}removeCondition(s){this._formItems.splice(s,1),0===this._formItems.length&&this.addCondition()}applyConditions(){this._cdr.detectChanges(),this._submittedForms=[],this.formGenerators.toArray().forEach(s=>s.submit())}_onFormSubmitted(s){if(this._submittedForms.push(s),this._submittedForms.length!==this.formGenerators.length)return;const u=this._submittedForms.map(g=>(g.value=void 0!==g.value1?g.value1:g.value,g));this._dialogRef.close(u.filter(g=>null!=g.value))}_cancel(){this._dialogRef.dismiss()}_getApplicableConditionOperators(){const s=this._smartFilterBarService.getApplicableFilterConditions(this.config.filterType,this.config.dataType);let u=this.config.defineStrategyLabels;if(!u){u={...this._conditionLabelKeys};for(const g in u)Object.prototype.hasOwnProperty.call(u,g)&&(u[g]=this._translationResolver.resolve(this._language,"platformSmartFilterBar."+u[g]))}return s.map(g=>({label:u[g],value:g}))}_addExistingConditions(s){s.forEach(u=>{const g=this._generateFormGeneratorItems(u);this._formItems.push(g)})}_generateFormGeneratorItems(s){return[{name:"operator",message:"operator",default:s?this.conditionOperatorOptions.find(u=>u.value===s.operator)?.value:this.conditionOperatorOptions[0].value,type:"select",choices:this.conditionOperatorOptions,required:!0,guiOptions:{inline:!1,column:1,noLabelLayout:!0}},{name:"value",message:"value",default:s?.value,type:this.config.filterType,choices:this.config.choices,placeholder:this._translationResolver.resolve(this._language,"platformSmartFilterBar.filterConditionValuePlaceholder"),controlType:this.config.controlType,when:u=>u.operator!==r.dh.BETWEEN,onchange:(u,g,P)=>{P.parent?.get("value1")?.setValue(u,{emitEvent:!1})},guiOptions:{inline:!1,column:2,noLabelLayout:!0}},{name:"value1",message:"value1",default:s?.value,type:this.config.filterType,choices:this.config.choices,placeholder:this._translationResolver.resolve(this._language,"platformSmartFilterBar.filterConditionValueFromPlaceholder"),controlType:this.config.controlType,when:u=>u.operator===r.dh.BETWEEN,onchange:(u,g,P)=>{P.parent?.get("value")?.setValue(u,{emitEvent:!1})},guiOptions:{inline:!1,column:2,noLabelLayout:!0}},{name:"value2",message:"value2",default:s?.value2,type:this.config.filterType,choices:this.config.choices,placeholder:this._translationResolver.resolve(this._language,"platformSmartFilterBar.filterConditionValueToPlaceholder"),required:!0,controlType:this.config.controlType,when:u=>u?.operator===r.dh.BETWEEN,guiOptions:{inline:!1,column:3,noLabelLayout:!0}}]}}return D.\u0275fac=function(s){return new(s||D)(n.Y36(p.zj),n.Y36(v.iC),n.Y36(n.sBO),n.Y36(C.Q))},D.\u0275cmp=n.Xpm({type:D,selectors:[["fdp-smart-filter-bar-conditions-dialog"]],viewQuery:function(s,u){if(1&s&&n.Gf(d.CI,5),2&s){let g;n.iGM(g=n.CRH())&&(u.formGenerators=g)}},decls:14,vars:8,consts:[[1,"fdp-smart-filter-bar__conditions-dialog"],["fdkTemplate","header"],[4,"ngIf","ngIfElse"],["buttonType","emphasized",3,"label","click"],["buttonType","transparent",3,"label","click"],["loadingTpl",""],["fd-bar-left",""],["fd-title","",3,"headerSize"],[4,"ngFor","ngForOf"],["fdLayoutGridRow",""],["colGrow","","fdLayoutGridCol",""],["fdLayoutGridCol","",1,"fdp-smart-filter-bar__actions-column"],[3,"label","click"],["columnLayout","XL3-L3-M3-S3",3,"formItems","unifiedLayout","noAdditionalContent","formSubmitted"],["colGrow","","fdLayoutGridCol","",1,"fdp-smart-filter-bar__actions-column"],["buttonType","transparent","glyph","decline","type","button",3,"title","click"],[2,"text-align","center","margin","1rem"],[3,"loading"]],template:function(s,u){if(1&s&&(n.TgZ(0,"fd-dialog",0)(1,"fd-dialog-header"),n.YNc(2,Y,4,2,"ng-template",1),n.qZA(),n.TgZ(3,"fd-dialog-body"),n.YNc(4,$,9,4,"form",2),n.qZA(),n.TgZ(5,"fd-dialog-footer")(6,"fd-dialog-footer-button")(7,"fdp-button",3),n.NdJ("click",function(){return u.applyConditions()}),n.ALo(8,"fdTranslate"),n.qZA()(),n.TgZ(9,"fd-dialog-footer-button")(10,"fdp-button",4),n.NdJ("click",function(){return u._cancel()}),n.ALo(11,"fdTranslate"),n.qZA()()()(),n.YNc(12,z,2,1,"ng-template",null,5,n.W1O)),2&s){const g=n.MAs(13);n.xp6(4),n.Q6J("ngIf",u.loaded)("ngIfElse",g),n.xp6(3),n.Q6J("label",n.lcZ(8,4,"platformSmartFilterBar.defineConditionsSubmitButtonLabel")),n.xp6(3),n.Q6J("label",n.lcZ(11,6,"platformSmartFilterBar.defineConditionsCancelButton"))}},dependencies:[A.sg,A.O5,l._Y,l.JL,l.F,i.C,_.r0,h.B,y.a,E.H,K.g,R.A,W.u,x.b,G.J,V.r,Q.S,X.q,w.q,J.I,N.n],encapsulation:2,changeDetection:0}),D})()},83108:(Z,B,t)=>{t.d(B,{l:()=>it});var m=t(49671),r=t(78645),p=t(65619),d=t(24036),C=t(16321),S=t(43093),v=t(59773),f=t(27498),n=t(70014);class A extends n.aF{constructor(T){super(T)}filter(T){let o;switch(T){case"visible":o=this._getVisibleItems();break;case"active":o=this._getActiveItems();break;case"visibleAndActive":o=this._getVisibleAndActiveItems();break;case"mandatory":o=this._getMandatoryItems();break;default:o=this._getAllItems()}this.items$.next(o)}_getAllItems(){return this.items}_getVisibleItems(){return this.items.filter(T=>T.visible)}_getActiveItems(){return this.items.filter(T=>T.active)}_getVisibleAndActiveItems(){return this.items.filter(T=>T.visible||T.active)}_getMandatoryItems(){return this.items.filter(T=>T.mandatory)}}var l=t(27411),i=t(65879),_=t(96814),h=t(95621),y=t(12887),E=t(15849),K=t(89003),R=t(1144),W=t(74164),x=t(15243),G=t(72459),V=t(80401),Q=t(22379),X=t(51683),w=t(44321),J=t(17054),N=t(29202),Y=t(57314),j=t(28139),$=t(88463),z=t(95953),k=t(38873),D=t(79025),U=t(87570),s=t(57850);const u=["table"];function g(O,T){1&O&&(i.TgZ(0,"div",6)(1,"fd-bar-element")(2,"h4",7),i._uU(3),i.ALo(4,"fdTranslate"),i.qZA()()(),i.TgZ(5,"div",8)(6,"fd-bar-element"),i._UZ(7,"fdp-table-reset-button"),i.qZA()()),2&O&&(i.xp6(2),i.Q6J("headerSize",4),i.xp6(1),i.hij(" ",i.lcZ(4,2,"platformSmartFilterBar.selectFiltersHeader")," "))}function P(O,T){1&O&&i._UZ(0,"fd-icon",17)}function q(O,T){if(1&O&&(i.TgZ(0,"fdp-table-cell"),i.YNc(1,P,1,0,"fd-icon",16),i.qZA()),2&O){const o=T.$implicit;i.xp6(1),i.Q6J("ngIf",o.active)}}function tt(O,T){if(1&O){const o=i.EpF();i.TgZ(0,"fdp-table",9,10),i.NdJ("rowSelectionChange",function(e){i.CHM(o);const a=i.oxw();return i.KtG(a._onRowSelectionChange(e))}),i.TgZ(2,"fdp-table-toolbar",11),i.ALo(3,"fdTranslate"),i.TgZ(4,"fdp-table-toolbar-actions")(5,"fdp-select",12),i.NdJ("selectionChange",function(e){i.CHM(o);const a=i.oxw();return i.KtG(a._onFilterVisibilityChange(e))}),i.qZA()()(),i._UZ(6,"fdp-column",13),i.ALo(7,"fdTranslate"),i.TgZ(8,"fdp-column",14),i.ALo(9,"fdTranslate"),i.YNc(10,q,2,1,"fdp-table-cell",15),i.qZA()()}if(2&O){const o=i.oxw();i.Q6J("dataSource",o.source),i.xp6(2),i.Q6J("hideItemCount",!1)("title",i.lcZ(3,7,"platformSmartFilterBar.selectFiltersAvailableFiltersText")),i.xp6(3),i.Q6J("list",o._filterVisibilityOptions)("value",o._filterVisibilityOptions[0].value),i.xp6(1),i.Q6J("label",i.lcZ(7,9,"platformSmartFilterBar.selectFiltersFilterColumnLabel")),i.xp6(2),i.Q6J("label",i.lcZ(9,11,"platformSmartFilterBar.selectFiltersActiveColumnLabel"))}}function et(O,T){1&O&&(i.TgZ(0,"div",18),i._UZ(1,"fd-busy-indicator",19),i.qZA()),2&O&&(i.xp6(1),i.Q6J("loading",!0))}let it=(()=>{class O{constructor(o,b,e){this._dialogRef=o,this._language$=b,this._cdr=e,this._filterVisibilityOptions=[],this.loaded=!1,this._categoryLabelKeys={all:"settingsCategoryAll",visible:"settingsCategoryVisible",active:"settingsCategoryActive",visibleAndActive:"settingsCategoryVisibleAndActive",mandatory:"settingsCategoryMandatory"},this._selectedFilters=[],this._onDestroy$=new r.x,this._isResetAvailableSubject$=new p.X(!1),this.isResetAvailable$=this._isResetAvailableSubject$.asObservable(),this._translationResolver=new l.en,this.setInitialTableState(),this._init()}_init(){var o=this;return(0,m.Z)(function*(){yield o._transformVisibilityLabels(),o.loaded=!0,o._cdr.markForCheck()})()}ngAfterViewInit(){this.setSelectedFilters()}_transformVisibilityLabels(){var o=this;return(0,m.Z)(function*(){let b=o._dialogRef.data.visibilityCategories;if(!b){const e=yield(0,d.z)(o._language$);b={...o._categoryLabelKeys};for(const a in b)Object.prototype.hasOwnProperty.call(b,a)&&(b[a]=o._translationResolver.resolve(e,"platformSmartFilterBar."+b[a]))}for(const[e,a]of Object.entries(b))o._filterVisibilityOptions.push({label:a,value:e})})()}setSelectedFilters(){this._sourceSubscription?.unsubscribe(),this._sourceSubscription=this.source.open().pipe((0,S.Q)(C.z),(0,v.R)(this._onDestroy$)).subscribe(o=>{o.forEach((b,e)=>{b.visible&&this.table.toggleSelectableRow(e)})})}ngOnDestroy(){this._onDestroy$.next(),this._onDestroy$.complete()}reset(){this.setInitialTableState(),this.setSelectedFilters()}setInitialTableState(){this._availableFields=this._dialogRef.data.fields.filter(o=>o.filterable).map(o=>({label:o.label,active:!!this._dialogRef.data.filterBy.find(b=>b.field===o.name),mandatory:o.required,visible:this._dialogRef.data.selectedFilters.includes(o.name),key:o.key,name:o.name})),this.source=new n.Gl(new A(this._availableFields))}_cancel(){this._dialogRef.dismiss()}_confirm(){this._dialogRef.close(this._selectedFilters)}_onRowSelectionChange(o){this._selectedFilters=o.selection.map(b=>b.name),this._isResetAvailableSubject$.next(!0)}_onFilterVisibilityChange(o){this.table&&(this.source.dataProvider.filter(o.payload),this.source.fetch(this.table.getTableState()))}}return O.\u0275fac=function(o){return new(o||O)(i.Y36(f.zj),i.Y36(l.iC),i.Y36(i.sBO))},O.\u0275cmp=i.Xpm({type:O,selectors:[["fdp-smart-filter-bar-settings-dialog"]],viewQuery:function(o,b){if(1&o&&i.Gf(u,5),2&o){let e;i.iGM(e=i.CRH())&&(b.table=e.first)}},features:[i._Bn([{provide:n.uI,useExisting:O}])],decls:14,vars:8,consts:[[1,"fdp-table-p13-filtering-dialog"],["fdkTemplate","header"],["selectionMode","multiple",3,"dataSource","rowSelectionChange",4,"ngIf","ngIfElse"],["buttonType","emphasized",3,"label","click"],["buttonType","transparent",3,"label","click"],["loadingTpl",""],["fd-bar-left",""],["fd-title","",3,"headerSize"],["fd-bar-right",""],["selectionMode","multiple",3,"dataSource","rowSelectionChange"],["table",""],[3,"hideItemCount","title"],[3,"list","value","selectionChange"],["align","start","key","label","name","label",3,"label"],["align","center","key","active","name","active","width","150px",3,"label"],[4,"fdpCellDef"],["glyph","accept",4,"ngIf"],["glyph","accept"],[2,"text-align","center","margin","1rem"],[3,"loading"]],template:function(o,b){if(1&o&&(i.TgZ(0,"fd-dialog",0)(1,"fd-dialog-header"),i.YNc(2,g,8,4,"ng-template",1),i.qZA(),i.TgZ(3,"fd-dialog-body"),i.YNc(4,tt,11,13,"fdp-table",2),i.qZA(),i.TgZ(5,"fd-dialog-footer")(6,"fd-dialog-footer-button")(7,"fdp-button",3),i.NdJ("click",function(){return b._confirm()}),i.ALo(8,"fdTranslate"),i.qZA()(),i.TgZ(9,"fd-dialog-footer-button")(10,"fdp-button",4),i.NdJ("click",function(){return b._cancel()}),i.ALo(11,"fdTranslate"),i.qZA()()()(),i.YNc(12,et,2,1,"ng-template",null,5,i.W1O)),2&o){const e=i.MAs(13);i.xp6(4),i.Q6J("ngIf",b.loaded)("ngIfElse",e),i.xp6(3),i.Q6J("label",i.lcZ(8,4,"platformSmartFilterBar.selectFiltersSubmitButtonLabel")),i.xp6(3),i.Q6J("label",i.lcZ(11,6,"platformSmartFilterBar.selectFiltersCancelButton"))}},dependencies:[_.O5,h.r0,y.o,E.B,K.a,R.H,W.g,x.A,G.u,V.b,Q.M,X.J,w.r,J.S,N.a,Y.Z,j.U,$.I,z.x,k.w,D.tY,D.y_,U.H,s.n],encapsulation:2,changeDetection:0}),O})()},68073:(Z,B,t)=>{t.d(B,{m:()=>d});var m=t(42495),p=(t(70014),t(65879));let d=(()=>{class C{constructor(){this.conditionStrategy="or",this._smartFilterBarFilterable=!0,this._required=!1,this._defaultSelected=!1,this._hasOptions=!1}set smartFilterBarFilterable(v){this._smartFilterBarFilterable=(0,m.Ig)(v)}get smartFilterBarFilterable(){return this._smartFilterBarFilterable}set required(v){this._required=(0,m.Ig)(v)}get required(){return this._required}set defaultSelected(v){this._defaultSelected=(0,m.Ig)(v)}get defaultSelected(){return this._defaultSelected}set hasOptions(v){this._hasOptions=(0,m.Ig)(v)}get hasOptions(){return this._hasOptions}}return C.\u0275fac=function(v){return new(v||C)},C.\u0275dir=p.lG2({type:C,selectors:[["","fdpSmartFilterBarFieldDefinition",""],["","fdp-smart-filter-bar-field-definition",""]],inputs:{key:"key",name:"name",label:"label",filterType:"filterType",dataType:"dataType",customFilterType:"customFilterType",conditionStrategy:"conditionStrategy",smartFilterBarFilterable:"smartFilterBarFilterable",required:"required",defaultSelected:"defaultSelected",hasOptions:"hasOptions"}}),C})()},63621:(Z,B,t)=>{t.d(B,{O:()=>C});var m=t(65619),r=t(70014),p=t(68073),d=t(65879);let C=(()=>{class S{constructor(f){this._subject=f,this._fieldDefinitionsSubject=new m.X([]),this.fieldsStream=this._fieldDefinitionsSubject.asObservable()}ngAfterViewInit(){this._fieldDefinitionsSubject.next(this._fieldDefinitions.toArray().map(f=>this._transformSubjectField(f))),this._fieldDefinitions.changes.subscribe(f=>{this._fieldDefinitionsSubject.next(f.map(n=>this._transformSubjectField(n)))})}getDataSource(){return this._subject.getDataSource()}getSubjectFields(){return this._fieldDefinitions.toArray().map(f=>this._transformSubjectField(f))}getFieldVariants(f){return this.getDataSource().dataProvider.getFieldOptions(f)}getDefaultFields(){return this.getSubjectFields()?.filter(f=>f.defaultSelected).map(f=>f.name)}getState(){return this._subject.getTableState()}getSubject(){return this._subject}_transformSubjectField(f){return{key:f.key,name:f.name,label:f.label,filterType:f.filterType,filterable:f.smartFilterBarFilterable,dataType:f.dataType,required:f.required,customFilterType:f.customFilterType,defaultSelected:f.defaultSelected,hasOptions:f.hasOptions,conditionStrategy:f.conditionStrategy}}}return S.\u0275fac=function(f){return new(f||S)(d.Y36(r.iA))},S.\u0275dir=d.lG2({type:S,selectors:[["","fdpSmartFilterBarSubject",""],["","fdp-smart-filter-bar-subject",""]],contentQueries:function(f,n,A){if(1&f&&d.Suo(A,p.m,4),2&f){let l;d.iGM(l=d.CRH())&&(n._fieldDefinitions=l)}},exportAs:["fdp-smart-filter-bar-subject"]}),S})()},48448:(Z,B,t)=>{t.d(B,{G:()=>r});var m=t(65879);let r=(()=>{class p{constructor(C){this.templateRef=C}}return p.\u0275fac=function(C){return new(C||p)(m.Y36(m.Rgc))},p.\u0275dir=m.lG2({type:p,selectors:[["","fdpSmartFilterBarToolbarItem",""]]}),p})()},37387:(Z,B,t)=>{t.d(B,{T:()=>r});var m=t(53031);function r(p){return Array.isArray(p)&&(p=p.map(d=>r(d))),(0,m.UL)(p)?p.value:p}},42351:(Z,B,t)=>{t.d(B,{gR:()=>G.g,TR:()=>W,jL:()=>N.j,QX:()=>E.Q,ij:()=>Y});var m=t(96814),r=t(60095),p=t(33957),d=t(43535),C=t(94589),S=t(52863),v=t(42788),f=t(37320),n=t(33764),A=t(27208),l=t(27498),i=t(31380),_=t(63768),h=t(70014),y=t(70479),E=t(38438),K=t(27411),R=t(65879);let W=(()=>{class j{}return j.\u0275fac=function(z){return new(z||j)},j.\u0275mod=R.oAB({type:j}),j.\u0275inj=R.cJS({providers:[E.Q,C.bN],imports:[m.ez,r.u5,r.UX,C.AY,K.LU,d.hJ,p.UU,S.V_,v.RO,C.tD,n.QX,f.UH,A.K2,l.Su,i.pV,_.nD,h.ky,C.hY,C.aL,C.Mk,y.hd]}),j})();var x=t(93768),G=t(20198),N=(t(72798),t(9456),t(83108),t(68073),t(63621),t(42008));const Y={provide:N.j,useExisting:(0,R.Gpc)(()=>x.B)}},42008:(Z,B,t)=>{t.d(B,{j:()=>r});var m=t(65879);let r=(()=>{class p{constructor(){this.name="platformSmartFilterBar",this.presetChanged=new m.vpe}}return p.\u0275fac=function(C){return new(C||p)},p.\u0275dir=m.lG2({type:p,inputs:{name:"name"},outputs:{presetChanged:"presetChanged"}}),p})()},93768:(Z,B,t)=>{t.d(B,{B:()=>T});var m=t(49671),r=t(65879),p=t(60095),d=t(47394),C=t(65619),S=t(32181),v=t(83620),f=t(24036),n=t(48180),A=t(37398),l=t(41767),i=t(27498),_=t(70014),h=t(94589),y=t(53031),E=t(83108),R=(t(63621),t(48448)),W=t(38438);const x="smart-filter-condition-renderer";var G=t(42008),V=t(72798),Q=t(37387),X=t(42495),w=t(71993),J=t(96814),N=t(29466),Y=t(46306),j=t(13849),$=t(75713),z=t(15371),k=t(95621),D=t(94772),U=t(57850);function s(o,b){}function u(o,b){if(1&o&&(r.ynx(0),r.YNc(1,s,0,0,"ng-template",10),r._UZ(2,"fd-toolbar-separator"),r.BQk()),2&o){const e=b.$implicit;r.xp6(1),r.Q6J("ngTemplateOutlet",e)}}function g(o,b){if(1&o&&(r.ynx(0),r.YNc(1,u,3,1,"ng-container",9),r.BQk()),2&o){const e=r.oxw();r.xp6(1),r.Q6J("ngForOf",e._toolbarItems)}}function P(o,b){if(1&o){const e=r.EpF();r.TgZ(0,"fdp-button",11),r.NdJ("click",function(){r.CHM(e);const c=r.oxw();return r.KtG(c.submitForm())}),r.ALo(1,"fdTranslate"),r.qZA()}if(2&o){const e=r.oxw();r.Q6J("disabled",e._loading)("label",r.lcZ(1,2,"platformSmartFilterBar.submitButtonLabel"))}}const q=function(o){return{filtersCount:o}},it={responsivePadding:!0,verticalPadding:!0,minWidth:"30rem",bodyMinHeight:"calc(50vh - 88px)"},O={provide:G.j,useExisting:(0,r.Gpc)(()=>T)};let T=(()=>{class o extends G.j{set subject(e){this._setSubject(e)}get subject(){return this._subject}set showFiltersLabel(e){(0,l.O4K)("Property showFiltersLabel is deprecated. Use i18n capabilities instead."),this._showFiltersLabel=e}get showFiltersLabel(){return this._showFiltersLabel}set hideFiltersLabel(e){(0,l.O4K)("Property hideFiltersLabel is deprecated. Use i18n capabilities instead."),this._hideFiltersLabel=e}get hideFiltersLabel(){return this._hideFiltersLabel}set filtersLabel(e){(0,l.O4K)("Property filtersLabel is deprecated. Use i18n capabilities instead."),this._filtersLabel=e}get filtersLabel(){return this._filtersLabel}set transparent(e){this._transparent=(0,X.Ig)(e)}get transparent(){return this._transparent}set defineStrategyLabels(e){(0,l.O4K)("Property defineStrategyLabels is deprecated. Use i18n capabilities instead."),this._defineStrategyLabels=e}get defineStrategyLabels(){return this._defineStrategyLabels}set filtersVisibilityCategoryLabels(e){(0,l.O4K)("Property filtersVisibilityCategoryLabels is deprecated. Use i18n capabilities instead."),this._filtersVisibilityCategoryLabels=e}get filtersVisibilityCategoryLabels(){return this._filtersVisibilityCategoryLabels}get _loading(){return!this._subject?.getDataSource()||this._subject.getDataSource().isDataLoading}constructor(e,a,c,F,I,M){super(),this._dialogService=e,this._cdr=a,this._smartFilterBarService=c,this._fgService=F,this._injector=I,this._destroyRef=M,this.filtersColumnLayout="XL4-L3-M2-S1",this.liveUpdate=!1,this.smartFiltersChanged=new r.vpe,this.smartFiltersApplied=new r.vpe,this.searchInputChanged=new r.vpe,this.filterBy=[],this._toolbarItems=[],this._selectedFilters=[],this._showFilterBar=!0,this._subscriptions=new d.w0,this._subjectSubscriptions=new d.w0,this._transparent=!1,this._formGeneratorReady=new C.X(!1),this._ignorePresetChange=!1,this._fgService.addComponent(V.v,[x])}ngAfterViewInit(){this._toolbarItems=this._toolbarItemRefs.toArray().map(e=>e.templateRef),this._toolbarItemRefs.changes.subscribe(()=>{this._toolbarItems=this._toolbarItemRefs.toArray().map(e=>e.templateRef)})}ngOnDestroy(){this._subscriptions.unsubscribe(),this._unsubscribeFromSubject()}getDisplayValue(e,a){var c=this;return(0,m.Z)(function*(){return c._smartFilterBarService.getDisplayValue(e,a)})()}showFilteringSettings(){const a={fields:this._getSubjectDefinitions(),filterBy:this.filterBy,selectedFilters:this._selectedFilters,visibilityCategories:this.filtersVisibilityCategoryLabels};this._dialogService.open(E.l,{...it,disablePaddings:!0,width:"50rem",data:a},this._injector).afterClosed.pipe((0,n.q)(1)).subscribe(F=>{this._setSelectedFilters(F)})}_onSearchInputChange(e){this.search=e,this.searchInputChanged.emit(e)}_cancelSearch(){this.search=void 0,this.liveUpdate&&this.submitForm()}submitForm(){this._formGenerator.submit()}setPreset(e){var a=this;return(0,m.Z)(function*(){a._ignorePresetChange=!0,e.filterBy=e.filterBy||[],a.filterBy=e.filterBy,a.search=e.search,a._formGeneratorReady.pipe((0,S.h)(c=>c)).subscribe((0,m.Z)(function*(){a._fgService.resetForm(a._formGenerator.form);for(const F of a.filterBy){const I=a._fgService.getFormControl(a._formGenerator.form,F.field);if(!I)continue;const M=I.formItem,L=a._smartFilterBarService.transformCollectionFilter(F),H=yield a._smartFilterBarService.getConditionFieldSelectedVariants(M,L);I?.setValue(H)}a._setSelectedFilters(a.filterBy.map(F=>F.field)),a.subject.getDataSource().dataProvider.setFilters(a.filterBy,a.search),a.subject.getSubject().fetch()}))})()}getCurrentPreset(){return{search:this.search,filterBy:this.filterBy}}_onFormSubmitted(e){const a=this._generateCollectionFilterGroups(e);this._applyFiltering(a)}_onFormCreated(){var e=this;this.subject&&this._setSelectedFilters([...this.subject.getDefaultFields(),...this._selectedFilters]),this._formGenerator.form.valueChanges.pipe((0,v.b)(50),(0,w.sL)(this._destroyRef)).subscribe((0,m.Z)(function*(){const a=yield e.getFormattedConditions();e.smartFiltersChanged.emit({filterBy:a,search:e.search,subject:e.subject}),e.liveUpdate&&e._applyFiltering(a)})),this._formGeneratorReady.next(!0)}_toggleFilterBar(){this._showFilterBar=!this._showFilterBar,this._cdr.markForCheck()}getFormattedConditions(){var e=this;return(0,m.Z)(function*(){const a=yield e._fgService.getFormValue(e._formGenerator.form);return e._generateCollectionFilterGroups(a)})()}_generateCollectionFilterGroups(e){const a=[],c=this._getSubjectDefinitions();return Object.entries(e).filter(([,F])=>!!F).forEach(([F,I])=>{const M=c.find(H=>H.name===F),L={filters:[],strategy:M.conditionStrategy,field:M.key};I.forEach(H=>{L.filters.push({strategy:H.operator,field:M.key,value:H.value,value2:H.value2,type:M.dataType})}),a.push(L)}),a.filter(F=>F.filters?.length>0)}_setSubject(e){e&&(this._subject=e,this.unsubscribeFromSubject(),this._listenToSubjectColumns())}unsubscribeFromSubject(){}_listenToSubjectColumns(){var e=this;this._subjectSubscriptions.add(this._subject.fieldsStream.subscribe(function(){var a=(0,m.Z)(function*(c){setTimeout((0,m.Z)(function*(){yield e._generateForm(c.filter(F=>F.filterable))}))});return function(c){return a.apply(this,arguments)}}()))}_generateForm(e){var a=this;return(0,m.Z)(function*(){const c=[],F=function et(o){return Math.max(...o.split("-").map(b=>{const e=b.match(/\d+/);return e?parseInt(e[0],10):1}))}(a.filtersColumnLayout??"");let I=1;0!==e.length&&(e.forEach(M=>{let L=a._generateBaseFieldItem(M);switch(M.required&&a._selectedFilters.push(M.name),M.filterType){case _.vA.SINGLE:case _.vA.CATEGORY:L.guiOptions.additionalData.type="select",L.guiOptions.inline=!1;break;case _.vA.MULTI:L.guiOptions.additionalData.type="multi-input";break;case _.vA.CUSTOM:L=a._generateCustomFilterFieldItem(M,L);break;default:L=a._generateInputFieldItem(M,L)}L.guiOptions.column=I,I+=1,I>F&&(I=1),c.push(L)}),a._formItems=c,a._cdr.detectChanges())})()}_generateCustomFilterFieldItem(e,a){return e.customFilterType&&(a.guiOptions.additionalData.type=e.customFilterType,a.guiOptions.additionalData=Object.assign(a.guiOptions.additionalData,this._smartFilterBarService.getCustomFilterConfiguration(e.customFilterType)),a.type=a.guiOptions.additionalData.rendererComponent?`${a.guiOptions.additionalData.type}-renderer`:a.type,a.transformer=a.guiOptions.additionalData.valueTransformer),a}_generateInputFieldItem(e,a){switch(e.dataType){case _.g.DATE:a.guiOptions.additionalData.type="datepicker";break;case _.g.NUMBER:a.guiOptions.additionalData.controlType="number";break;default:a.guiOptions.additionalData.controlType="text"}return a}_generateBaseFieldItem(e){return{name:e.name,message:e.label,required:e.required,type:x,placeholder:" ",validators:e.required?[p.kI.required]:[],choices:e.hasOptions?this._getFilterDefaultOptions(e.key,e.filterType):void 0,transformer:a=>(0,Q.T)(a),guiOptions:{additionalData:{type:"input",dataType:e.dataType,filterType:e.filterType,controlType:"text",choices:e.hasOptions?this._getFilterAvailableOptions(e.key):void 0}},when:()=>this._selectedFilters.includes(e.name)}}_getFilterAvailableOptions(e){return()=>this._getFieldVariants(e)}_getFilterDefaultOptions(e,a){var c=this;return(0,m.Z)(function*(){const F=yield(0,f.z)(c._getFieldVariants(e).pipe((0,n.q)(1))),I=[];for(const M of F){const L={value:M.value,operator:"equalTo"};L.displayValue=yield c.getDisplayValue(L,a),I.push(L)}return I})}_getFieldVariants(e){return this.subject.getFieldVariants(e).pipe((0,n.q)(1),(0,A.U)(a=>a.filter((c,F)=>a.findIndex(I=>I.value===c.value)===F)))}_getSubjectDefinitions(){return this.subject?.getSubjectFields()||[]}_applyFiltering(e){const a=this.subject.getDataSource();this.filterBy=e,a.dataProvider.setFilters(e,this.search),this.subject.getSubject().fetch();const c={search:this.search,filterBy:this.filterBy};this.smartFiltersApplied.emit({...c,subject:this._subject}),this._ignorePresetChange||this.presetChanged.emit(c),this._ignorePresetChange=!1}_unsubscribeFromSubject(){this._subjectSubscriptions.unsubscribe(),this._subjectSubscriptions=new d.w0}_setSelectedFilters(e){this._selectedFilters=e.filter((a,c)=>e.indexOf(a)===c),this._formGenerator.refreshStepsVisibility()}}return o.\u0275fac=function(e){return new(e||o)(r.Y36(i.xA),r.Y36(r.sBO),r.Y36(W.Q),r.Y36(h.bN),r.Y36(r.zs3),r.Y36(r.ktI))},o.\u0275cmp=r.Xpm({type:o,selectors:[["fdp-smart-filter-bar"]],contentQueries:function(e,a,c){if(1&e&&r.Suo(c,R.G,4),2&e){let F;r.iGM(F=r.CRH())&&(a._toolbarItemRefs=F)}},viewQuery:function(e,a){if(1&e&&r.Gf(h.CI,5),2&e){let c;r.iGM(c=r.CRH())&&(a._formGenerator=c.first)}},hostAttrs:[1,"fdp-smart-filter-bar"],hostVars:2,hostBindings:function(e,a){2&e&&r.ekj("fdp-smart-filter-bar--transparent",a.transparent)},inputs:{subject:"subject",showFiltersLabel:"showFiltersLabel",hideFiltersLabel:"hideFiltersLabel",filtersLabel:"filtersLabel",transparent:"transparent",defineStrategyLabels:"defineStrategyLabels",filtersVisibilityCategoryLabels:"filtersVisibilityCategoryLabels",filtersColumnLayout:"filtersColumnLayout",liveUpdate:"liveUpdate"},outputs:{smartFiltersChanged:"smartFiltersChanged",smartFiltersApplied:"smartFiltersApplied",searchInputChanged:"searchInputChanged"},features:[r._Bn([O,{provide:y.ID,useExisting:o}]),r.qOj],decls:15,vars:27,consts:[["fdType","transparent",3,"hasTitle"],[4,"ngIf"],[3,"disabled","disableRefresh","placeholder","inputChange","searchSubmit","cancelSearch"],["buttonType","emphasized","fd-toolbar-item","",3,"disabled","label","click",4,"ngIf"],["fd-toolbar-item","","glyph","synchronize",3,"disabled","ariaLabel","click"],["fd-toolbar-item","",3,"label","disabled","click"],["buttonType","transparent","fd-toolbar-item","",3,"label","disabled","click"],[1,"fdp-smart-filter-bar__filters",3,"hidden"],[3,"noAdditionalContent","formItems","columnLayout","formCreated","formSubmitted"],[4,"ngFor","ngForOf"],[3,"ngTemplateOutlet"],["buttonType","emphasized","fd-toolbar-item","",3,"disabled","label","click"]],template:function(e,a){1&e&&(r.TgZ(0,"div")(1,"fd-toolbar",0),r.YNc(2,g,2,1,"ng-container",1),r.TgZ(3,"fdp-search-field",2),r.NdJ("inputChange",function(F){return a._onSearchInputChange(F)})("searchSubmit",function(){return a.submitForm()})("cancelSearch",function(){return a._cancelSearch()}),r.ALo(4,"fdTranslate"),r.qZA(),r._UZ(5,"fd-toolbar-spacer"),r.YNc(6,P,2,4,"fdp-button",3),r.TgZ(7,"fdp-button",4),r.NdJ("click",function(){return a.submitForm()}),r.ALo(8,"fdTranslate"),r.qZA(),r.TgZ(9,"fdp-button",5),r.NdJ("click",function(){return a.showFilteringSettings()}),r.ALo(10,"fdTranslate"),r.qZA(),r.TgZ(11,"fdp-button",6),r.NdJ("click",function(){return a._toggleFilterBar()}),r.ALo(12,"fdTranslate"),r.qZA()()(),r.TgZ(13,"div",7)(14,"fdp-form-generator",8),r.NdJ("formCreated",function(){return a._onFormCreated()})("formSubmitted",function(F){return a._onFormSubmitted(F)}),r.qZA()()),2&e&&(r.xp6(1),r.Q6J("hasTitle",!0),r.xp6(1),r.Q6J("ngIf",a._toolbarItems),r.xp6(1),r.Q6J("disabled",a._loading)("disableRefresh",!0)("placeholder",r.lcZ(4,16,"platformSmartFilterBar.searchPlaceholder")),r.xp6(3),r.Q6J("ngIf",!a.liveUpdate),r.xp6(1),r.Q6J("disabled",a._loading)("ariaLabel",r.lcZ(8,18,"platformSmartFilterBar.refreshButtonAriaLabel")),r.xp6(2),r.Q6J("label",a.filtersLabel?a.filtersLabel+" ("+a._selectedFilters.length+")":r.xi3(10,20,"platformSmartFilterBar.filtersButtonLabel",r.VKq(25,q,a._selectedFilters.length)))("disabled",a._loading),r.xp6(2),r.Q6J("label",r.lcZ(12,23,a._showFilterBar?"platformSmartFilterBar.hideFiltersButtonLabel":"platformSmartFilterBar.showFiltersButtonLabel"))("disabled",a._loading),r.xp6(2),r.Q6J("hidden",!a._showFilterBar),r.xp6(1),r.Q6J("noAdditionalContent",!0)("formItems",a._formItems)("columnLayout",a.filtersColumnLayout))},dependencies:[J.sg,J.O5,J.tP,N.C,Y.n,j.Q,$.v,z.F,k.r0,D.ri,U.n],styles:[".fdp-smart-filter-bar{display:block;box-shadow:var(--sapContent_HeaderShadow);background-color:var(--sapObjectHeader_Background)}.fdp-smart-filter-bar--transparent{background-color:var(--sapToolbar_Background);box-shadow:none}.fdp-smart-filter-bar .fd-toolbar--title{height:3rem;min-height:3rem;border-bottom:none;padding:.5rem}@media (min-width: 600px){.fdp-smart-filter-bar .fd-toolbar--title{padding-left:2rem;padding-right:2rem}}.fdp-smart-filter-bar .fd-toolbar fdp-search-field{min-width:15.5rem}.fdp-smart-filter-bar .fdp-smart-filter-bar__filters{padding-left:.5rem;padding-right:.5rem}@media (min-width: 600px){.fdp-smart-filter-bar .fdp-smart-filter-bar__filters{padding-left:2rem;padding-right:2rem}}.fdp-smart-filter-bar .fd-container.fd-form-layout-grid-container{padding:0}.fdp-smart-filter-bar .fd-container.fd-form-layout-grid-container .fd-row .fd-form-group{padding-left:.25rem!important;padding-right:.25rem!important}.fdp-smart-filter-bar__conditions-dialog .fdp-smart-filter-bar__actions-column{min-width:auto;flex:0 0 auto}.fdp-smart-filter-bar__conditions-dialog .fd-popover-custom{display:block}.fdp-smart-filter-bar__conditions-dialog .fd-dialog__body{padding:0 .5rem;background-color:var(--sapBackgroundColor, #f7f7f7)}.fdp-smart-filter-bar__conditions-dialog .fd-container.fd-form-layout-grid-container,.fdp-smart-filter-bar__conditions-dialog .fd-container.fd-form-layout-grid-container .fd-row .fd-form-group{padding:0!important}\n"],encapsulation:2,changeDetection:0}),o})()},38438:(Z,B,t)=>{t.d(B,{Q:()=>f});var m=t(49671),r=t(71534),p=t(94589),d=t(70014),C=t(53031),S=t(41767),v=t(65879);let f=(()=>{class n{constructor(l){this._fgService=l,this._customFilterConditions=new Map}addCustomFilter(l){if(!l.conditionComponent&&l.rendererComponent&&(l.conditionComponent=l.rendererComponent),!l.conditionComponent)return!1;const i=this._fgService.addComponent(l.conditionComponent,l.types);return i&&this._customFilterConditions.set(l.conditionComponent,l),i&&l.rendererComponent&&this._fgService.addComponent(l.rendererComponent,l.types.map(_=>`${_}-renderer`)),i}getCustomFilterConfiguration(l){const i=this._fgService.getComponentDefinitionByType(l);if(i)return this._customFilterConditions.get(i.component)}getApplicableFilterConditions(l,i=d.g.STRING){const _=this._fgService.getComponentDefinitionByType(l),h=(0,d.b3)(i);return _&&this._customFilterConditions.get(_.component)?.filterStrategies||h}getDisplayValue(l,i){var _=this;return(0,m.Z)(function*(){const h=_.getCustomFilterConfiguration(i);if(h?.valueRenderer){const K=h?.valueRenderer(l),R=(0,S.M7n)(K);let W;return yield R.createSubscription(K,x=>{W=x}),W}const y=_._normalizeValue(l.value),E=_._normalizeValue(l.value2);switch(l.operator){case"equalTo":return`=${y}`;case"contains":return`*${y}*`;case"between":return`${y}...${E}`;case"beginsWith":return`${y}*`;case"endsWith":return`*${y}`;case"greaterThan":case"after":return`>${y}`;case"greaterThanOrEqualTo":case"onOrAfter":return`>=${y}`;case"lessThan":case"before":return`<${y}`;case"lessThanOrEqualTo":case"beforeOrOn":return`<=${y}`;default:return`${y}`}})()}normalizeConditions(l,i){var _=this;return(0,m.Z)(function*(){const h=[];for(const y of i){const E=Object.assign({},y);E.displayValue=yield _.getDisplayValue(E,l.guiOptions?.additionalData.type),h.push(E)}return h})()}getConditionFieldSelectedVariants(l,i){var _=this;return(0,m.Z)(function*(){return(yield _.normalizeConditions(l,i)).map(h=>(0,C.UL)(h)?h:{label:h.displayValue,value:h})})()}transformCollectionFilter(l){return l.filters.map(i=>({operator:i.strategy,value:i.value,value2:i.value2}))}_normalizeValue(l){return Array.isArray(l)?l.map(i=>this._normalizeValue(i)).join(", "):(0,C.UL)(l)?l.label:l instanceof r._U?l.toDateString():l}}return n.\u0275fac=function(l){return new(l||n)(v.LFG(p.bN))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})()}}]);