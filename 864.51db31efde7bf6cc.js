"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[864],{79334:(j,B,t)=>{t.d(B,{g:()=>o});var _=t(49671),i=t(49218),u=t(82848),f=t(95698),C=t(18402),T=t(4235),S=t(65638),l=t(94650),a=t(66628);let o=(()=>{class m extends u.Ze{constructor(b,p,A,x){var R;super(),R=this,this._dialogService=b,this._smartFilterBar=p,this._smartFilterBarService=A,this._injector=x,this.openConditionsDialog=()=>{const Z=this.getField().value;var G;this._dialogService.open(T.e,{data:{header:this.formItem.message,dataType:this.formItem.guiOptions?.additionalData.dataType,filterType:this.formItem.guiOptions?.additionalData.type,conditions:Z||[],choices:this.formItem.guiOptions?.additionalData.choices,controlType:this.formItem.guiOptions?.additionalData.controlType,defineStrategyLabels:this._smartFilterBar.defineStrategyLabels},width:"67.5rem",minHeight:"30%"},this._injector).afterClosed.pipe((0,f.q)(1)).subscribe({next:(G=(0,_.Z)(function*(V){const Q=R.getField(),J=yield R._smartFilterBarService.getConditionFieldSelectedVariants(R.formItem,V);Q.setValue(J)}),function(Q){return G.apply(this,arguments)}),error:G=>{}})}}getField(){return this.form.get(`${this.formGroupName}.${this.name}`)}}return m.\u0275fac=function(b){return new(b||m)(l.Y36(i.xA),l.Y36(a.j),l.Y36(C.Q),l.Y36(l.zs3))},m.\u0275dir=l.lG2({type:m,features:[l._Bn([u.dr,u.wk,S.i]),l.qOj]}),m})()},38831:(j,B,t)=>{t.d(B,{v:()=>a});var _=t(49218),i=t(18402),u=t(79334),f=t(94650),C=t(66628),T=t(90433),S=t(26928);const l=function(){return[]};let a=(()=>{class o extends u.g{constructor(e,b,p,A){super(e,b,p,A)}}return o.\u0275fac=function(e){return new(e||o)(f.Y36(_.xA),f.Y36(C.j),f.Y36(i.Q),f.Y36(f.zs3))},o.\u0275cmp=f.Xpm({type:o,selectors:[["fdp-smart-filter-bar-condition-field"]],features:[f.qOj],decls:3,vars:10,consts:[[3,"formGroup"],[3,"formGroupName"],["displayKey","displayValue",3,"id","addOnButtonClickFn","autofocus","dataSource","formControlName","name","placeholder"]],template:function(e,b){1&e&&(f.ynx(0,0)(1,1),f._UZ(2,"fdp-multi-input",2),f.BQk()()),2&e&&(f.Q6J("formGroup",b.form),f.xp6(1),f.Q6J("formGroupName",b.formGroupName),f.xp6(1),f.Q6J("id",b.id)("addOnButtonClickFn",b.openConditionsDialog)("autofocus",!0)("dataSource",b.formItem.choices||f.DdM(9,l))("formControlName",b.name)("name",b.name)("placeholder",b.formItem.placeholder||b.formItem.message))},dependencies:[T.JJ,T.JL,T.sg,T.u,T.x0,S.O],encapsulation:2}),o})()},4235:(j,B,t)=>{t.d(B,{e:()=>q});var _=t(49671),i=t(89441),u=t(49218),f=t(82848),C=t(18402),T=t(39671),S=t(60676),l=t(83905),a=t(94650),o=t(36895),m=t(90433),e=t(16650),b=t(95209),p=t(77023),A=t(87455),x=t(34853),R=t(23470),Z=t(48977),W=t(18279),$=t(98887),G=t(92664),V=t(49095),Q=t(50681),J=t(54381),k=t(92575),N=t(30848),z=t(21565);function H(E,K){if(1&E&&(a.TgZ(0,"div",6)(1,"fd-bar-element")(2,"h4",7),a._uU(3),a.qZA()()()),2&E){const s=a.oxw();a.xp6(2),a.Q6J("headerSize",4),a.xp6(1),a.Oqu(s.config.header)}}function U(E,K){if(1&E){const s=a.EpF();a.TgZ(0,"fd-layout-grid")(1,"div",9)(2,"div",10)(3,"fdp-form-generator",13),a.NdJ("formSubmitted",function(v){a.CHM(s);const L=a.oxw(2);return a.KtG(L._onFormSubmitted(v))}),a.qZA()(),a.TgZ(4,"div",14)(5,"fdp-button",15),a.NdJ("click",function(){const L=a.CHM(s).index,tt=a.oxw(2);return a.KtG(tt.removeCondition(L))}),a.ALo(6,"fdTranslate"),a.qZA()()()()}if(2&E){const s=K.$implicit;a.xp6(3),a.Q6J("formItems",s)("unifiedLayout",!1)("noAdditionalContent",!0),a.xp6(2),a.Q6J("title",a.lcZ(6,4,"platformSmartFilterBar.defineConditionsRemoveConditionButtonTitle"))}}function X(E,K){if(1&E){const s=a.EpF();a.TgZ(0,"form"),a.YNc(1,U,7,6,"fd-layout-grid",8),a.TgZ(2,"fd-layout-grid")(3,"div",9)(4,"div",10),a._uU(5,"\xa0"),a.qZA(),a.TgZ(6,"div",11)(7,"fdp-button",12),a.NdJ("click",function(){a.CHM(s);const v=a.oxw();return a.KtG(v.addCondition())}),a.ALo(8,"fdTranslate"),a.qZA()()()()()}if(2&E){const s=a.oxw();a.xp6(1),a.Q6J("ngForOf",s._formItems),a.xp6(6),a.Q6J("label",a.lcZ(8,2,"platformSmartFilterBar.defineConditionsAddConditionButtonLabel"))}}function Y(E,K){1&E&&(a.TgZ(0,"div",16),a._UZ(1,"fd-busy-indicator",17),a.qZA()),2&E&&(a.xp6(1),a.Q6J("loading",!0))}let q=(()=>{class E{constructor(s,h,v,L){this._dialogRef=s,this._language$=h,this._cdr=v,this._smartFilterBarService=L,this.conditionOperatorOptions=[],this._formItems=[],this.loaded=!1,this._conditionLabelKeys={contains:"filterConditionContains",equalTo:"filterConditionEqualTo",between:"filterConditionBetween",beginsWith:"filterConditionBeginsWith",endsWith:"filterConditionEndsWith",lessThan:"filterConditionLessThan",lessThanOrEqualTo:"filterConditionLessThanOrEqualTo",greaterThan:"filterConditionGreaterThan",greaterThanOrEqualTo:"filterConditionGreaterThanOrEqualTo",after:"filterConditionAfter",onOrAfter:"filterConditionOnOrAfter",before:"filterConditionBefore",beforeOrOn:"filterConditionBeforeOrOn"},this._submittedForms=[],this._translationResolver=new S.en,this._init()}_init(){var s=this;return(0,_.Z)(function*(){s.config=s._dialogRef.data,s._language=yield(0,l.z)(s._language$),s.conditionOperatorOptions=yield s._getApplicableConditionOperators(),s._addExistingConditions((0,T.T)(s.config.conditions)),0===s.config.conditions.length&&s.addCondition(),s.loaded=!0,s._cdr.markForCheck()})()}addCondition(){this._formItems.push(this._generateFormGeneratorItems())}removeCondition(s){this._formItems.splice(s,1),0===this._formItems.length&&this.addCondition()}applyConditions(){this._cdr.detectChanges(),this._submittedForms=[],this.formGenerators.toArray().forEach(s=>s.submit())}_onFormSubmitted(s){if(this._submittedForms.push(s),this._submittedForms.length!==this.formGenerators.length)return;const h=this._submittedForms.map(v=>(v.value=void 0!==v.value1?v.value1:v.value,v));this._dialogRef.close(h.filter(v=>null!=v.value))}_cancel(){this._dialogRef.dismiss()}_getApplicableConditionOperators(){const s=this._smartFilterBarService.getApplicableFilterConditions(this.config.filterType,this.config.dataType);let h=this.config.defineStrategyLabels;if(!h){h={...this._conditionLabelKeys};for(const v in h)Object.prototype.hasOwnProperty.call(h,v)&&(h[v]=this._translationResolver.resolve(this._language,"platformSmartFilterBar."+h[v]))}return s.map(v=>({label:h[v],value:v}))}_addExistingConditions(s){s.forEach(h=>{const v=this._generateFormGeneratorItems(h);this._formItems.push(v)})}_generateFormGeneratorItems(s){return[{name:"operator",message:"operator",default:s?this.conditionOperatorOptions.find(h=>h.value===s.operator)?.value:this.conditionOperatorOptions[0].value,type:"select",choices:this.conditionOperatorOptions,required:!0,guiOptions:{inline:!1,column:1,noLabelLayout:!0}},{name:"value",message:"value",default:s?.value,type:this.config.filterType,choices:this.config.choices,placeholder:this._translationResolver.resolve(this._language,"platformSmartFilterBar.filterConditionValuePlaceholder"),controlType:this.config.controlType,when:h=>h.operator!==i.dh.BETWEEN,onchange:(h,v,L)=>{L.parent?.get("value1")?.setValue(h,{emitEvent:!1})},guiOptions:{inline:!1,column:2,noLabelLayout:!0}},{name:"value1",message:"value1",default:s?.value,type:this.config.filterType,choices:this.config.choices,placeholder:this._translationResolver.resolve(this._language,"platformSmartFilterBar.filterConditionValueFromPlaceholder"),controlType:this.config.controlType,when:h=>h.operator===i.dh.BETWEEN,onchange:(h,v,L)=>{L.parent?.get("value")?.setValue(h,{emitEvent:!1})},guiOptions:{inline:!1,column:2,noLabelLayout:!0}},{name:"value2",message:"value2",default:s?.value2,type:this.config.filterType,choices:this.config.choices,placeholder:this._translationResolver.resolve(this._language,"platformSmartFilterBar.filterConditionValueToPlaceholder"),required:!0,controlType:this.config.controlType,when:h=>h?.operator===i.dh.BETWEEN,guiOptions:{inline:!1,column:3,noLabelLayout:!0}}]}}return E.\u0275fac=function(s){return new(s||E)(a.Y36(u.zj),a.Y36(S.iC),a.Y36(a.sBO),a.Y36(C.Q))},E.\u0275cmp=a.Xpm({type:E,selectors:[["fdp-smart-filter-bar-conditions-dialog"]],viewQuery:function(s,h){if(1&s&&a.Gf(f.CI,5),2&s){let v;a.iGM(v=a.CRH())&&(h.formGenerators=v)}},decls:14,vars:8,consts:[[1,"fdp-smart-filter-bar__conditions-dialog"],["fdkTemplate","header"],[4,"ngIf","ngIfElse"],["buttonType","emphasized",3,"label","click"],["buttonType","transparent",3,"label","click"],["loadingTpl",""],["fd-bar-left",""],["fd-title","",3,"headerSize"],[4,"ngFor","ngForOf"],["fdLayoutGridRow",""],["colGrow","","fdLayoutGridCol",""],["fdLayoutGridCol","",1,"fdp-smart-filter-bar__actions-column"],[3,"label","click"],["columnLayout","XL3-L3-M3-S3",3,"formItems","unifiedLayout","noAdditionalContent","formSubmitted"],["colGrow","","fdLayoutGridCol","",1,"fdp-smart-filter-bar__actions-column"],["buttonType","transparent","glyph","decline","type","button",3,"title","click"],[2,"text-align","center","margin","1rem"],[3,"loading"]],template:function(s,h){if(1&s&&(a.TgZ(0,"fd-dialog",0)(1,"fd-dialog-header"),a.YNc(2,H,4,2,"ng-template",1),a.qZA(),a.TgZ(3,"fd-dialog-body"),a.YNc(4,X,9,4,"form",2),a.qZA(),a.TgZ(5,"fd-dialog-footer")(6,"fd-dialog-footer-button")(7,"fdp-button",3),a.NdJ("click",function(){return h.applyConditions()}),a.ALo(8,"fdTranslate"),a.qZA()(),a.TgZ(9,"fd-dialog-footer-button")(10,"fdp-button",4),a.NdJ("click",function(){return h._cancel()}),a.ALo(11,"fdTranslate"),a.qZA()()()(),a.YNc(12,Y,2,1,"ng-template",null,5,a.W1O)),2&s){const v=a.MAs(13);a.xp6(4),a.Q6J("ngIf",h.loaded)("ngIfElse",v),a.xp6(3),a.Q6J("label",a.lcZ(8,4,"platformSmartFilterBar.defineConditionsSubmitButtonLabel")),a.xp6(3),a.Q6J("label",a.lcZ(11,6,"platformSmartFilterBar.defineConditionsCancelButton"))}},dependencies:[o.sg,o.O5,m._Y,m.JL,m.F,e.C,b.r0,p.B,A.a,x.H,R.g,Z.A,W.u,$.b,G.J,V.r,Q.S,J.q,k.q,N.I,z.n],encapsulation:2,changeDetection:0}),E})()},60065:(j,B,t)=>{t.d(B,{l:()=>it});var _=t(49671),i=t(77579),u=t(61135),f=t(83905),C=t(34986),T=t(85363),S=t(82722),l=t(49218),a=t(89441);class o extends a.aF{constructor(D){super(D)}filter(D){let d;switch(D){case"visible":d=this._getVisibleItems();break;case"active":d=this._getActiveItems();break;case"visibleAndActive":d=this._getVisibleAndActiveItems();break;case"mandatory":d=this._getMandatoryItems();break;default:d=this._getAllItems()}this.items$.next(d)}_getAllItems(){return this.items}_getVisibleItems(){return this.items.filter(D=>D.visible)}_getActiveItems(){return this.items.filter(D=>D.active)}_getVisibleAndActiveItems(){return this.items.filter(D=>D.visible||D.active)}_getMandatoryItems(){return this.items.filter(D=>D.mandatory)}}var m=t(60676),e=t(94650),b=t(36895),p=t(95209),A=t(61357),x=t(77023),R=t(87455),Z=t(34853),W=t(23470),$=t(48977),G=t(18279),V=t(98887),Q=t(62361),J=t(92664),k=t(49095),N=t(50681),z=t(53856),H=t(27660),U=t(18273),X=t(87797),Y=t(14396),q=t(60342),E=t(7632),K=t(21565);const s=["table"];function h(O,D){1&O&&(e.TgZ(0,"div",6)(1,"fd-bar-element")(2,"h4",7),e._uU(3),e.ALo(4,"fdTranslate"),e.qZA()()(),e.TgZ(5,"div",8)(6,"fd-bar-element"),e._UZ(7,"fdp-table-reset-button"),e.qZA()()),2&O&&(e.xp6(2),e.Q6J("headerSize",4),e.xp6(1),e.hij(" ",e.lcZ(4,2,"platformSmartFilterBar.selectFiltersHeader")," "))}function v(O,D){1&O&&e._UZ(0,"fd-icon",17)}function L(O,D){if(1&O&&(e.TgZ(0,"fdp-table-cell"),e.YNc(1,v,1,0,"fd-icon",16),e.qZA()),2&O){const d=D.$implicit;e.xp6(1),e.Q6J("ngIf",d.active)}}function tt(O,D){if(1&O){const d=e.EpF();e.TgZ(0,"fdp-table",9,10),e.NdJ("rowSelectionChange",function(F){e.CHM(d);const r=e.oxw();return e.KtG(r._onRowSelectionChange(F))}),e.TgZ(2,"fdp-table-toolbar",11),e.ALo(3,"fdTranslate"),e.TgZ(4,"fdp-table-toolbar-actions")(5,"fdp-select",12),e.NdJ("selectionChange",function(F){e.CHM(d);const r=e.oxw();return e.KtG(r._onFilterVisibilityChange(F))}),e.qZA()()(),e._UZ(6,"fdp-column",13),e.ALo(7,"fdTranslate"),e.TgZ(8,"fdp-column",14),e.ALo(9,"fdTranslate"),e.YNc(10,L,2,1,"fdp-table-cell",15),e.qZA()()}if(2&O){const d=e.oxw();e.Q6J("dataSource",d.source),e.xp6(2),e.Q6J("hideItemCount",!1)("title",e.lcZ(3,7,"platformSmartFilterBar.selectFiltersAvailableFiltersText")),e.xp6(3),e.Q6J("list",d._filterVisibilityOptions)("value",d._filterVisibilityOptions[0].value),e.xp6(1),e.Q6J("label",e.lcZ(7,9,"platformSmartFilterBar.selectFiltersFilterColumnLabel")),e.xp6(2),e.Q6J("label",e.lcZ(9,11,"platformSmartFilterBar.selectFiltersActiveColumnLabel"))}}function et(O,D){1&O&&(e.TgZ(0,"div",18),e._UZ(1,"fd-busy-indicator",19),e.qZA()),2&O&&(e.xp6(1),e.Q6J("loading",!0))}let it=(()=>{class O{constructor(d,c,F){this._dialogRef=d,this._language$=c,this._cdr=F,this._filterVisibilityOptions=[],this.loaded=!1,this._categoryLabelKeys={all:"settingsCategoryAll",visible:"settingsCategoryVisible",active:"settingsCategoryActive",visibleAndActive:"settingsCategoryVisibleAndActive",mandatory:"settingsCategoryMandatory"},this._selectedFilters=[],this._onDestroy$=new i.x,this._isResetAvailableSubject$=new u.X(!1),this.isResetAvailable$=this._isResetAvailableSubject$.asObservable(),this._translationResolver=new m.en,this.setInitialTableState(),this._init()}_init(){var d=this;return(0,_.Z)(function*(){yield d._transformVisibilityLabels(),d.loaded=!0,d._cdr.markForCheck()})()}ngAfterViewInit(){this.setSelectedFilters()}_transformVisibilityLabels(){var d=this;return(0,_.Z)(function*(){let c=d._dialogRef.data.visibilityCategories;if(!c){const F=yield(0,f.z)(d._language$);c={...d._categoryLabelKeys};for(const r in c)Object.prototype.hasOwnProperty.call(c,r)&&(c[r]=d._translationResolver.resolve(F,"platformSmartFilterBar."+c[r]))}for(const[F,r]of Object.entries(c))d._filterVisibilityOptions.push({label:r,value:F})})()}setSelectedFilters(){this._sourceSubscription?.unsubscribe(),this._sourceSubscription=this.source.open().pipe((0,T.Q)(C.z),(0,S.R)(this._onDestroy$)).subscribe(d=>{d.forEach((c,F)=>{c.visible&&this.table.toggleSelectableRow(F)})})}ngOnDestroy(){this._onDestroy$.next(),this._onDestroy$.complete()}reset(){this.setInitialTableState(),this.setSelectedFilters()}setInitialTableState(){this._availableFields=this._dialogRef.data.fields.filter(d=>d.filterable).map(d=>({label:d.label,active:!!this._dialogRef.data.filterBy.find(c=>c.field===d.name),mandatory:d.required,visible:this._dialogRef.data.selectedFilters.includes(d.name),key:d.key,name:d.name})),this.source=new a.Gl(new o(this._availableFields))}_cancel(){this._dialogRef.dismiss()}_confirm(){this._dialogRef.close(this._selectedFilters)}_onRowSelectionChange(d){this._selectedFilters=d.selection.map(c=>c.name),this._isResetAvailableSubject$.next(!0)}_onFilterVisibilityChange(d){this.table&&(this.source.dataProvider.filter(d.payload),this.source.fetch(this.table.getTableState()))}}return O.\u0275fac=function(d){return new(d||O)(e.Y36(l.zj),e.Y36(m.iC),e.Y36(e.sBO))},O.\u0275cmp=e.Xpm({type:O,selectors:[["fdp-smart-filter-bar-settings-dialog"]],viewQuery:function(d,c){if(1&d&&e.Gf(s,5),2&d){let F;e.iGM(F=e.CRH())&&(c.table=F.first)}},features:[e._Bn([{provide:a.uI,useExisting:O}])],decls:14,vars:8,consts:[[1,"fdp-table-p13-filtering-dialog"],["fdkTemplate","header"],["selectionMode","multiple",3,"dataSource","rowSelectionChange",4,"ngIf","ngIfElse"],["buttonType","emphasized",3,"label","click"],["buttonType","transparent",3,"label","click"],["loadingTpl",""],["fd-bar-left",""],["fd-title","",3,"headerSize"],["fd-bar-right",""],["selectionMode","multiple",3,"dataSource","rowSelectionChange"],["table",""],[3,"hideItemCount","title"],[3,"list","value","selectionChange"],["align","start","key","label","name","label",3,"label"],["align","center","key","active","name","active","width","150px",3,"label"],[4,"fdpCellDef"],["glyph","accept",4,"ngIf"],["glyph","accept"],[2,"text-align","center","margin","1rem"],[3,"loading"]],template:function(d,c){if(1&d&&(e.TgZ(0,"fd-dialog",0)(1,"fd-dialog-header"),e.YNc(2,h,8,4,"ng-template",1),e.qZA(),e.TgZ(3,"fd-dialog-body"),e.YNc(4,tt,11,13,"fdp-table",2),e.qZA(),e.TgZ(5,"fd-dialog-footer")(6,"fd-dialog-footer-button")(7,"fdp-button",3),e.NdJ("click",function(){return c._confirm()}),e.ALo(8,"fdTranslate"),e.qZA()(),e.TgZ(9,"fd-dialog-footer-button")(10,"fdp-button",4),e.NdJ("click",function(){return c._cancel()}),e.ALo(11,"fdTranslate"),e.qZA()()()(),e.YNc(12,et,2,1,"ng-template",null,5,e.W1O)),2&d){const F=e.MAs(13);e.xp6(4),e.Q6J("ngIf",c.loaded)("ngIfElse",F),e.xp6(3),e.Q6J("label",e.lcZ(8,4,"platformSmartFilterBar.selectFiltersSubmitButtonLabel")),e.xp6(3),e.Q6J("label",e.lcZ(11,6,"platformSmartFilterBar.selectFiltersCancelButton"))}},dependencies:[b.O5,p.r0,A.o,x.B,R.a,Z.H,W.g,$.A,G.u,V.b,Q.M,J.J,k.r,N.S,z.a,H.Z,U.U,X.I,Y.tY,Y.y_,q.x,E.H,K.n],encapsulation:2,changeDetection:0}),O})()},92205:(j,B,t)=>{t.d(B,{m:()=>f});var _=t(21281),u=(t(89441),t(94650));let f=(()=>{class C{constructor(){this.conditionStrategy="or",this._smartFilterBarFilterable=!0,this._required=!1,this._defaultSelected=!1,this._hasOptions=!1}set smartFilterBarFilterable(S){this._smartFilterBarFilterable=(0,_.Ig)(S)}get smartFilterBarFilterable(){return this._smartFilterBarFilterable}set required(S){this._required=(0,_.Ig)(S)}get required(){return this._required}set defaultSelected(S){this._defaultSelected=(0,_.Ig)(S)}get defaultSelected(){return this._defaultSelected}set hasOptions(S){this._hasOptions=(0,_.Ig)(S)}get hasOptions(){return this._hasOptions}}return C.\u0275fac=function(S){return new(S||C)},C.\u0275dir=u.lG2({type:C,selectors:[["","fdpSmartFilterBarFieldDefinition",""],["","fdp-smart-filter-bar-field-definition",""]],inputs:{key:"key",name:"name",label:"label",filterType:"filterType",dataType:"dataType",customFilterType:"customFilterType",conditionStrategy:"conditionStrategy",smartFilterBarFilterable:"smartFilterBarFilterable",required:"required",defaultSelected:"defaultSelected",hasOptions:"hasOptions"}}),C})()},70295:(j,B,t)=>{t.d(B,{O:()=>C});var _=t(61135),i=t(89441),u=t(92205),f=t(94650);let C=(()=>{class T{constructor(l){this._subject=l,this._fieldDefinitionsSubject=new _.X([]),this.fieldsStream=this._fieldDefinitionsSubject.asObservable()}ngAfterViewInit(){this._fieldDefinitionsSubject.next(this._fieldDefinitions.toArray().map(l=>this._transformSubjectField(l))),this._fieldDefinitions.changes.subscribe(l=>{this._fieldDefinitionsSubject.next(l.map(a=>this._transformSubjectField(a)))})}getDataSource(){return this._subject.getDataSource()}getSubjectFields(){return this._fieldDefinitions.toArray().map(l=>this._transformSubjectField(l))}getFieldVariants(l){return this.getDataSource().dataProvider.getFieldOptions(l)}getDefaultFields(){return this.getSubjectFields()?.filter(l=>l.defaultSelected).map(l=>l.name)}getState(){return this._subject.getTableState()}getSubject(){return this._subject}_transformSubjectField(l){return{key:l.key,name:l.name,label:l.label,filterType:l.filterType,filterable:l.smartFilterBarFilterable,dataType:l.dataType,required:l.required,customFilterType:l.customFilterType,defaultSelected:l.defaultSelected,hasOptions:l.hasOptions,conditionStrategy:l.conditionStrategy}}}return T.\u0275fac=function(l){return new(l||T)(f.Y36(i.iA))},T.\u0275dir=f.lG2({type:T,selectors:[["","fdpSmartFilterBarSubject",""],["","fdp-smart-filter-bar-subject",""]],contentQueries:function(l,a,o){if(1&l&&f.Suo(o,u.m,4),2&l){let m;f.iGM(m=f.CRH())&&(a._fieldDefinitions=m)}},exportAs:["fdp-smart-filter-bar-subject"]}),T})()},82737:(j,B,t)=>{t.d(B,{G:()=>i});var _=t(94650);let i=(()=>{class u{constructor(C){this.templateRef=C}}return u.\u0275fac=function(C){return new(C||u)(_.Y36(_.Rgc))},u.\u0275dir=_.lG2({type:u,selectors:[["","fdpSmartFilterBarToolbarItem",""]]}),u})()},39671:(j,B,t)=>{t.d(B,{T:()=>i});var _=t(61892);function i(u){return Array.isArray(u)&&(u=u.map(f=>i(f))),(0,_.UL)(u)?u.value:u}},90864:(j,B,t)=>{t.d(B,{gR:()=>G.g,TR:()=>W,jL:()=>H.j,QX:()=>x.Q,ij:()=>z.i});var _=t(36895),i=t(90433),u=t(43018),f=t(30825),C=t(82848),T=t(21553),S=t(35243),l=t(78793),a=t(80848),o=t(64713),m=t(49218),e=t(94448),b=t(47041),p=t(89441),A=t(57230),x=t(18402),R=t(60676),Z=t(94650);let W=(()=>{class U{}return U.\u0275fac=function(Y){return new(Y||U)},U.\u0275mod=Z.oAB({type:U}),U.\u0275inj=Z.cJS({providers:[x.Q,C.bN],imports:[_.ez,i.u5,i.UX,C.AY,R.LU,f.hJ,u.UU,T.V_,S.RO,C.tD,a.QX,l.UH,o.K2,m.Su,e.pV,b.nD,p.ky,C.hY,C.aL,C.Mk,A.hd]}),U})();t(76960);var G=t(79334),z=(t(38831),t(4235),t(60065),t(92205),t(70295),t(65638)),H=t(66628)},65638:(j,B,t)=>{t.d(B,{i:()=>f});var _=t(94650),i=t(66628),u=t(76960);const f={provide:i.j,useExisting:(0,_.Gpc)(()=>u.B)}},66628:(j,B,t)=>{t.d(B,{j:()=>i});var _=t(94650);let i=(()=>{class u{constructor(){this.name="platformSmartFilterBar",this.presetChanged=new _.vpe}}return u.\u0275fac=function(C){return new(C||u)},u.\u0275dir=_.lG2({type:u,inputs:{name:"name"},outputs:{presetChanged:"presetChanged"}}),u})()},76960:(j,B,t)=>{t.d(B,{B:()=>d});var _=t(49671),i=t(94650),u=t(90433),f=t(43012),C=t(50727),T=t(61135),S=t(39300),l=t(78372),a=t(83905),o=t(95698),m=t(82722),e=t(54004),b=t(49218),p=t(89441),A=t(82848),x=t(61892),R=t(60065),W=(t(70295),t(82737)),$=t(18402);const G="smart-filter-condition-renderer";var V=t(66628),Q=t(38831),J=t(39671),k=t(21281),N=t(36895),z=t(16650),H=t(73788),U=t(70363),X=t(46768),Y=t(48223),q=t(95209),E=t(23988),K=t(21565);function s(c,F){}function h(c,F){if(1&c&&(i.ynx(0),i.YNc(1,s,0,0,"ng-template",10),i._UZ(2,"fd-toolbar-separator"),i.BQk()),2&c){const r=F.$implicit;i.xp6(1),i.Q6J("ngTemplateOutlet",r)}}function v(c,F){if(1&c&&(i.ynx(0),i.YNc(1,h,3,1,"ng-container",9),i.BQk()),2&c){const r=i.oxw();i.xp6(1),i.Q6J("ngForOf",r._toolbarItems)}}function L(c,F){if(1&c){const r=i.EpF();i.TgZ(0,"fdp-button",11),i.NdJ("click",function(){i.CHM(r);const g=i.oxw();return i.KtG(g.submitForm())}),i.ALo(1,"fdTranslate"),i.qZA()}if(2&c){const r=i.oxw();i.Q6J("disabled",r._loading)("label",i.lcZ(1,2,"platformSmartFilterBar.submitButtonLabel"))}}const tt=function(c){return{filtersCount:c}},O={responsivePadding:!0,verticalPadding:!0,minWidth:"30rem",bodyMinHeight:"calc(50vh - 88px)"},D={provide:V.j,useExisting:(0,i.Gpc)(()=>d)};let d=(()=>{class c extends V.j{set subject(r){this._setSubject(r)}get subject(){return this._subject}set transparent(r){this._transparent=(0,k.Ig)(r)}get transparent(){return this._transparent}get _loading(){return!this._subject?.getDataSource()||this._subject.getDataSource().isDataLoading}constructor(r,n,g,y,M,P){super(),this._dialogService=r,this._cdr=n,this._smartFilterBarService=g,this._fgService=y,this._injector=M,this._destroy$=P,this.filtersColumnLayout="XL4-L3-M2-S1",this.liveUpdate=!1,this.smartFiltersChanged=new i.vpe,this.smartFiltersApplied=new i.vpe,this.searchInputChanged=new i.vpe,this.filterBy=[],this._toolbarItems=[],this._selectedFilters=[],this._showFilterBar=!0,this._subscriptions=new C.w0,this._subjectSubscriptions=new C.w0,this._transparent=!1,this._formGeneratorReady=new T.X(!1),this._ignorePresetChange=!1,this._fgService.addComponent(Q.v,[G])}ngAfterViewInit(){this._toolbarItems=this._toolbarItemRefs.toArray().map(r=>r.templateRef),this._toolbarItemRefs.changes.subscribe(()=>{this._toolbarItems=this._toolbarItemRefs.toArray().map(r=>r.templateRef)})}ngOnDestroy(){this._subscriptions.unsubscribe(),this._unsubscribeFromSubject()}getDisplayValue(r,n){var g=this;return(0,_.Z)(function*(){return g._smartFilterBarService.getDisplayValue(r,n)})()}showFilteringSettings(){const n={fields:this._getSubjectDefinitions(),filterBy:this.filterBy,selectedFilters:this._selectedFilters,visibilityCategories:this.filtersVisibilityCategoryLabels};this._dialogService.open(R.l,{...O,disablePaddings:!0,width:"50rem",data:n},this._injector).afterClosed.pipe((0,o.q)(1)).subscribe(y=>{this._setSelectedFilters(y)})}_onSearchInputChange(r){this.search=r,this.searchInputChanged.emit(r)}_cancelSearch(){this.search=void 0,this.liveUpdate&&this.submitForm()}submitForm(){this._formGenerator.submit()}setPreset(r){var n=this;return(0,_.Z)(function*(){n._ignorePresetChange=!0,r.filterBy=r.filterBy||[],n.filterBy=r.filterBy,n.search=r.search,n._formGeneratorReady.pipe((0,S.h)(g=>g)).subscribe((0,_.Z)(function*(){n._fgService.resetForm(n._formGenerator.form);for(const y of n.filterBy){const M=n._fgService.getFormControl(n._formGenerator.form,y.field);if(!M)continue;const P=M.formItem,I=n._smartFilterBarService.transformCollectionFilter(y),w=yield n._smartFilterBarService.getConditionFieldSelectedVariants(P,I);M?.setValue(w)}n._setSelectedFilters(n.filterBy.map(y=>y.field)),n.subject.getDataSource().dataProvider.setFilters(n.filterBy,n.search),n.subject.getSubject().fetch()}))})()}getCurrentPreset(){return{search:this.search,filterBy:this.filterBy}}_onFormSubmitted(r){const n=this._generateCollectionFilterGroups(r);this._applyFiltering(n)}_onFormCreated(){var r=this;this.subject&&this._setSelectedFilters([...this.subject.getDefaultFields(),...this._selectedFilters]),this._formGenerator.form.valueChanges.pipe((0,l.b)(50),(0,m.R)(this._destroy$)).subscribe((0,_.Z)(function*(){const n=yield r.getFormattedConditions();r.smartFiltersChanged.emit({filterBy:n,search:r.search,subject:r.subject}),r.liveUpdate&&r._applyFiltering(n)})),this._formGeneratorReady.next(!0)}_toggleFilterBar(){this._showFilterBar=!this._showFilterBar,this._cdr.markForCheck()}getFormattedConditions(){var r=this;return(0,_.Z)(function*(){const n=yield r._fgService.getFormValue(r._formGenerator.form);return r._generateCollectionFilterGroups(n)})()}_generateCollectionFilterGroups(r){const n=[],g=this._getSubjectDefinitions();return Object.entries(r).filter(([,y])=>!!y).forEach(([y,M])=>{const P=g.find(w=>w.name===y),I={filters:[],strategy:P.conditionStrategy,field:P.key};M.forEach(w=>{I.filters.push({strategy:w.operator,field:P.key,value:w.value,value2:w.value2,type:P.dataType})}),n.push(I)}),n.filter(y=>y.filters?.length>0)}_setSubject(r){r&&(this._subject=r,this.unsubscribeFromSubject(),this._listenToSubjectColumns())}unsubscribeFromSubject(){}_listenToSubjectColumns(){var r=this;this._subjectSubscriptions.add(this._subject.fieldsStream.subscribe(function(){var n=(0,_.Z)(function*(g){setTimeout((0,_.Z)(function*(){yield r._generateForm(g.filter(y=>y.filterable))}))});return function(g){return n.apply(this,arguments)}}()))}_generateForm(r){var n=this;return(0,_.Z)(function*(){const g=[],y=function it(c){return Math.max(...c.split("-").map(F=>{const r=F.match(/\d+/);return r?parseInt(r[0],10):1}))}(n.filtersColumnLayout??"");let M=1;0!==r.length&&(r.forEach(P=>{let I=n._generateBaseFieldItem(P);switch(P.required&&n._selectedFilters.push(P.name),P.filterType){case p.vA.SINGLE:case p.vA.CATEGORY:I.guiOptions.additionalData.type="select",I.guiOptions.inline=!1;break;case p.vA.MULTI:I.guiOptions.additionalData.type="multi-input";break;case p.vA.CUSTOM:I=n._generateCustomFilterFieldItem(P,I);break;default:I=n._generateInputFieldItem(P,I)}I.guiOptions.column=M,M+=1,M>y&&(M=1),g.push(I)}),n._formItems=g,n._cdr.detectChanges())})()}_generateCustomFilterFieldItem(r,n){return r.customFilterType&&(n.guiOptions.additionalData.type=r.customFilterType,n.guiOptions.additionalData=Object.assign(n.guiOptions.additionalData,this._smartFilterBarService.getCustomFilterConfiguration(r.customFilterType)),n.type=n.guiOptions.additionalData.rendererComponent?`${n.guiOptions.additionalData.type}-renderer`:n.type,n.transformer=n.guiOptions.additionalData.valueTransformer),n}_generateInputFieldItem(r,n){switch(r.dataType){case p.g.DATE:n.guiOptions.additionalData.type="datepicker";break;case p.g.NUMBER:n.guiOptions.additionalData.controlType="number";break;default:n.guiOptions.additionalData.controlType="text"}return n}_generateBaseFieldItem(r){return{name:r.name,message:r.label,required:r.required,type:G,placeholder:" ",validators:r.required?[u.kI.required]:[],choices:r.hasOptions?this._getFilterDefaultOptions(r.key,r.filterType):void 0,transformer:n=>(0,J.T)(n),guiOptions:{additionalData:{type:"input",dataType:r.dataType,filterType:r.filterType,controlType:"text",choices:r.hasOptions?this._getFilterAvailableOptions(r.key):void 0}},when:()=>this._selectedFilters.includes(r.name)}}_getFilterAvailableOptions(r){return()=>this._getFieldVariants(r)}_getFilterDefaultOptions(r,n){var g=this;return(0,_.Z)(function*(){const y=yield(0,a.z)(g._getFieldVariants(r).pipe((0,o.q)(1))),M=[];for(const P of y){const I={value:P.value,operator:"equalTo"};I.displayValue=yield g.getDisplayValue(I,n),M.push(I)}return M})}_getFieldVariants(r){return this.subject.getFieldVariants(r).pipe((0,o.q)(1),(0,e.U)(n=>n.filter((g,y)=>n.findIndex(M=>M.value===g.value)===y)))}_getSubjectDefinitions(){return this.subject?.getSubjectFields()||[]}_applyFiltering(r){const n=this.subject.getDataSource();this.filterBy=r,n.dataProvider.setFilters(r,this.search),this.subject.getSubject().fetch();const g={search:this.search,filterBy:this.filterBy};this.smartFiltersApplied.emit({...g,subject:this._subject}),this._ignorePresetChange||this.presetChanged.emit(g),this._ignorePresetChange=!1}_unsubscribeFromSubject(){this._subjectSubscriptions.unsubscribe(),this._subjectSubscriptions=new C.w0}_setSelectedFilters(r){this._selectedFilters=r.filter((n,g)=>r.indexOf(n)===g),this._formGenerator.refreshStepsVisibility()}}return c.\u0275fac=function(r){return new(r||c)(i.Y36(b.xA),i.Y36(i.sBO),i.Y36($.Q),i.Y36(A.bN),i.Y36(i.zs3),i.Y36(f._ZF))},c.\u0275cmp=i.Xpm({type:c,selectors:[["fdp-smart-filter-bar"]],contentQueries:function(r,n,g){if(1&r&&i.Suo(g,W.G,4),2&r){let y;i.iGM(y=i.CRH())&&(n._toolbarItemRefs=y)}},viewQuery:function(r,n){if(1&r&&i.Gf(A.CI,5),2&r){let g;i.iGM(g=i.CRH())&&(n._formGenerator=g.first)}},hostAttrs:[1,"fdp-smart-filter-bar"],hostVars:2,hostBindings:function(r,n){2&r&&i.ekj("fdp-smart-filter-bar--transparent",n.transparent)},inputs:{subject:"subject",showFiltersLabel:"showFiltersLabel",hideFiltersLabel:"hideFiltersLabel",filtersLabel:"filtersLabel",transparent:"transparent",defineStrategyLabels:"defineStrategyLabels",filtersVisibilityCategoryLabels:"filtersVisibilityCategoryLabels",filtersColumnLayout:"filtersColumnLayout",liveUpdate:"liveUpdate"},outputs:{smartFiltersChanged:"smartFiltersChanged",smartFiltersApplied:"smartFiltersApplied",searchInputChanged:"searchInputChanged"},features:[i._Bn([D,f._ZF,{provide:x.ID,useExisting:c}]),i.qOj],decls:14,vars:24,consts:[["fdType","transparent",3,"hasTitle"],[4,"ngIf"],[3,"disabled","disableRefresh","placeholder","inputChange","searchSubmit","cancelSearch"],["buttonType","emphasized","fd-toolbar-item","",3,"disabled","label","click",4,"ngIf"],["fd-toolbar-item","","glyph","synchronize",3,"disabled","click"],["fd-toolbar-item","",3,"label","disabled","click"],["buttonType","transparent","fd-toolbar-item","",3,"label","disabled","click"],[1,"fdp-smart-filter-bar__filters",3,"hidden"],[3,"noAdditionalContent","formItems","columnLayout","formCreated","formSubmitted"],[4,"ngFor","ngForOf"],[3,"ngTemplateOutlet"],["buttonType","emphasized","fd-toolbar-item","",3,"disabled","label","click"]],template:function(r,n){1&r&&(i.TgZ(0,"div")(1,"fd-toolbar",0),i.YNc(2,v,2,1,"ng-container",1),i.TgZ(3,"fdp-search-field",2),i.NdJ("inputChange",function(y){return n._onSearchInputChange(y)})("searchSubmit",function(){return n.submitForm()})("cancelSearch",function(){return n._cancelSearch()}),i.ALo(4,"fdTranslate"),i.qZA(),i._UZ(5,"fd-toolbar-spacer"),i.YNc(6,L,2,4,"fdp-button",3),i.TgZ(7,"fdp-button",4),i.NdJ("click",function(){return n.submitForm()}),i.qZA(),i.TgZ(8,"fdp-button",5),i.NdJ("click",function(){return n.showFilteringSettings()}),i.ALo(9,"fdTranslate"),i.qZA(),i.TgZ(10,"fdp-button",6),i.NdJ("click",function(){return n._toggleFilterBar()}),i.ALo(11,"fdTranslate"),i.qZA()()(),i.TgZ(12,"div",7)(13,"fdp-form-generator",8),i.NdJ("formCreated",function(){return n._onFormCreated()})("formSubmitted",function(y){return n._onFormSubmitted(y)}),i.qZA()()),2&r&&(i.xp6(1),i.Q6J("hasTitle",!0),i.xp6(1),i.Q6J("ngIf",n._toolbarItems),i.xp6(1),i.Q6J("disabled",n._loading)("disableRefresh",!0)("placeholder",i.lcZ(4,15,"platformSmartFilterBar.searchPlaceholder")),i.xp6(3),i.Q6J("ngIf",!n.liveUpdate),i.xp6(1),i.Q6J("disabled",n._loading),i.xp6(1),i.Q6J("label",n.filtersLabel?n.filtersLabel+" ("+n._selectedFilters.length+")":i.xi3(9,17,"platformSmartFilterBar.filtersButtonLabel",i.VKq(22,tt,n._selectedFilters.length)))("disabled",n._loading),i.xp6(2),i.Q6J("label",i.lcZ(11,20,n._showFilterBar?"platformSmartFilterBar.hideFiltersButtonLabel":"platformSmartFilterBar.showFiltersButtonLabel"))("disabled",n._loading),i.xp6(2),i.Q6J("hidden",!n._showFilterBar),i.xp6(1),i.Q6J("noAdditionalContent",!0)("formItems",n._formItems)("columnLayout",n.filtersColumnLayout))},dependencies:[N.sg,N.O5,N.tP,z.C,H.n,U.Q,X.v,Y.F,q.r0,E.ri,K.n],styles:[".fdp-smart-filter-bar{display:block;box-shadow:var(--sapContent_HeaderShadow);background-color:var(--sapObjectHeader_Background)}.fdp-smart-filter-bar--transparent{background-color:var(--sapToolbar_Background);box-shadow:none}.fdp-smart-filter-bar .fd-toolbar--title{height:3rem;min-height:3rem;border-bottom:none;padding:.5rem}@media (min-width: 600px){.fdp-smart-filter-bar .fd-toolbar--title{padding-left:2rem;padding-right:2rem}}.fdp-smart-filter-bar .fd-toolbar fdp-search-field{min-width:15.5rem}.fdp-smart-filter-bar .fdp-smart-filter-bar__filters{padding-left:.5rem;padding-right:.5rem}@media (min-width: 600px){.fdp-smart-filter-bar .fdp-smart-filter-bar__filters{padding-left:2rem;padding-right:2rem}}.fdp-smart-filter-bar .fd-container.fd-form-layout-grid-container{padding:0}.fdp-smart-filter-bar .fd-container.fd-form-layout-grid-container .fd-row .fd-form-group{padding-left:.25rem!important;padding-right:.25rem!important}.fdp-smart-filter-bar__conditions-dialog .fdp-smart-filter-bar__actions-column{min-width:auto;flex:0 0 auto}.fdp-smart-filter-bar__conditions-dialog .fd-popover-custom{display:block}.fdp-smart-filter-bar__conditions-dialog .fd-dialog__body{padding:0 .5rem;background-color:var(--sapBackgroundColor, #f7f7f7)}.fdp-smart-filter-bar__conditions-dialog .fd-container.fd-form-layout-grid-container,.fdp-smart-filter-bar__conditions-dialog .fd-container.fd-form-layout-grid-container .fd-row .fd-form-group{padding:0!important}\n"],encapsulation:2,changeDetection:0}),c})()},18402:(j,B,t)=>{t.d(B,{Q:()=>S});var _=t(49671),i=t(95790),u=t(82848),f=t(89441),C=t(61892),T=t(94650);let S=(()=>{class l{constructor(o){this._fgService=o,this._customFilterConditions=new Map}addCustomFilter(o){if(!o.conditionComponent&&o.rendererComponent&&(o.conditionComponent=o.rendererComponent),!o.conditionComponent)return!1;const m=this._fgService.addComponent(o.conditionComponent,o.types);return m&&this._customFilterConditions.set(o.conditionComponent,o),m&&o.rendererComponent&&this._fgService.addComponent(o.rendererComponent,o.types.map(e=>`${e}-renderer`)),m}getCustomFilterConfiguration(o){const m=this._fgService.getComponentDefinitionByType(o);if(m)return this._customFilterConditions.get(m.component)}getApplicableFilterConditions(o,m=f.g.STRING){const e=this._fgService.getComponentDefinitionByType(o),b=(0,f.b3)(m);return e&&this._customFilterConditions.get(e.component)?.filterStrategies||b}getDisplayValue(o,m){var e=this;return(0,_.Z)(function*(){const b=e.getCustomFilterConfiguration(m);if(b?.valueRenderer){const x=b?.valueRenderer(o),R=(0,C.M7)(x);let Z;return yield R.createSubscription(x,W=>{Z=W}),Z}const p=e._normalizeValue(o.value),A=e._normalizeValue(o.value2);switch(o.operator){case"equalTo":return`=${p}`;case"contains":return`*${p}*`;case"between":return`${p}...${A}`;case"beginsWith":return`${p}*`;case"endsWith":return`*${p}`;case"greaterThan":case"after":return`>${p}`;case"greaterThanOrEqualTo":case"onOrAfter":return`>=${p}`;case"lessThan":case"before":return`<${p}`;case"lessThanOrEqualTo":case"beforeOrOn":return`<=${p}`;default:return`${p}`}})()}normalizeConditions(o,m){var e=this;return(0,_.Z)(function*(){const b=[];for(const p of m){const A=Object.assign({},p);A.displayValue=yield e.getDisplayValue(A,o.guiOptions?.additionalData.type),b.push(A)}return b})()}getConditionFieldSelectedVariants(o,m){var e=this;return(0,_.Z)(function*(){return(yield e.normalizeConditions(o,m)).map(b=>(0,C.UL)(b)?b:{label:b.displayValue,value:b})})()}transformCollectionFilter(o){return o.filters.map(m=>({operator:m.strategy,value:m.value,value2:m.value2}))}_normalizeValue(o){return Array.isArray(o)?o.map(m=>this._normalizeValue(m)).join(", "):(0,C.UL)(o)?o.label:o instanceof i._U?o.toDateString():o}}return l.\u0275fac=function(o){return new(o||l)(T.LFG(u.bN))},l.\u0275prov=T.Yz7({token:l,factory:l.\u0275fac}),l})()}}]);