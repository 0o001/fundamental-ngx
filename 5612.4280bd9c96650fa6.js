"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5612],{79334:(K,B,t)=>{t.d(B,{g:()=>n});var _=t(49671),r=t(30412),p=t(85174),d=t(95698),b=t(18402),S=t(4235),v=t(94650),f=t(66628);let n=(()=>{class O extends p.Ze{constructor(e,F,c,C){var A;super(),A=this,this._dialogService=e,this._smartFilterBar=F,this._smartFilterBarService=c,this._injector=C,this.openConditionsDialog=()=>{const R=this.getField().value;var j;this._dialogService.open(S.e,{data:{header:this.formItem.message,dataType:this.formItem.guiOptions?.additionalData.dataType,filterType:this.formItem.guiOptions?.additionalData.type,conditions:R||[],choices:this.formItem.guiOptions?.additionalData.choices,controlType:this.formItem.guiOptions?.additionalData.controlType,defineStrategyLabels:this._smartFilterBar.defineStrategyLabels},width:"67.5rem",minHeight:"30%"},this._injector).afterClosed.pipe((0,d.q)(1)).subscribe({next:(j=(0,_.Z)(function*(G){const V=A.getField(),Q=yield A._smartFilterBarService.getConditionFieldSelectedVariants(A.formItem,G);V.setValue(Q)}),function(V){return j.apply(this,arguments)}),error:j=>{}})}}getField(){return this.form.get(`${this.formGroupName}.${this.name}`)}}return O.\u0275fac=function(e){return new(e||O)(v.Y36(r.xA),v.Y36(f.j),v.Y36(b.Q),v.Y36(v.zs3))},O.\u0275dir=v.lG2({type:O,features:[v.qOj]}),O})()},38831:(K,B,t)=>{t.d(B,{v:()=>O});var _=t(30412),r=t(18402),p=t(79334),d=t(94650),b=t(66628),S=t(90433),v=t(26928),f=t(21565);const n=function(){return[]};let O=(()=>{class l extends p.g{constructor(F,c,C,A){super(F,c,C,A)}}return l.\u0275fac=function(F){return new(F||l)(d.Y36(_.xA),d.Y36(b.j),d.Y36(r.Q),d.Y36(d.zs3))},l.\u0275cmp=d.Xpm({type:l,selectors:[["fdp-smart-filter-bar-condition-field"]],features:[d.qOj],decls:4,vars:13,consts:[[3,"formGroup"],[3,"formGroupName"],["displayKey","displayValue",3,"id","addOnButtonClickFn","autofocus","dataSource","formControlName","name","placeholder","glyphAriaLabel"]],template:function(F,c){1&F&&(d.ynx(0,0)(1,1),d._UZ(2,"fdp-multi-input",2),d.ALo(3,"fdTranslate"),d.BQk()()),2&F&&(d.Q6J("formGroup",c.form),d.xp6(1),d.Q6J("formGroupName",c.formGroupName),d.xp6(1),d.Q6J("id",c.id)("addOnButtonClickFn",c.openConditionsDialog)("autofocus",!0)("dataSource",c.formItem.choices||d.DdM(12,n))("formControlName",c.name)("name",c.name)("placeholder",c.formItem.placeholder||c.formItem.message)("glyphAriaLabel",d.lcZ(3,10,"platformSmartFilterBar.manageFieldConditions")))},dependencies:[S.JJ,S.JL,S.sg,S.u,S.x0,v.O,f.n],encapsulation:2}),l})()},4235:(K,B,t)=>{t.d(B,{e:()=>k});var _=t(49671),r=t(45335),p=t(30412),d=t(85174),b=t(18402),S=t(39671),v=t(60676),f=t(83905),n=t(94650),O=t(36895),l=t(90433),e=t(16650),F=t(95209),c=t(77023),C=t(87455),A=t(34853),R=t(23470),x=t(48977),W=t(18279),j=t(98887),G=t(92664),V=t(49095),Q=t(50681),X=t(54381),w=t(92575),J=t(30848),N=t(21565);function Y(E,U){if(1&E&&(n.TgZ(0,"div",6)(1,"fd-bar-element")(2,"h4",7),n._uU(3),n.qZA()()()),2&E){const s=n.oxw();n.xp6(2),n.Q6J("headerSize",4),n.xp6(1),n.Oqu(s.config.header)}}function Z(E,U){if(1&E){const s=n.EpF();n.TgZ(0,"fd-layout-grid")(1,"div",9)(2,"div",10)(3,"fdp-form-generator",13),n.NdJ("formSubmitted",function(g){n.CHM(s);const P=n.oxw(2);return n.KtG(P._onFormSubmitted(g))}),n.qZA()(),n.TgZ(4,"div",14)(5,"fdp-button",15),n.NdJ("click",function(){const P=n.CHM(s).index,q=n.oxw(2);return n.KtG(q.removeCondition(P))}),n.ALo(6,"fdTranslate"),n.qZA()()()()}if(2&E){const s=U.$implicit;n.xp6(3),n.Q6J("formItems",s)("unifiedLayout",!1)("noAdditionalContent",!0),n.xp6(2),n.Q6J("title",n.lcZ(6,4,"platformSmartFilterBar.defineConditionsRemoveConditionButtonTitle"))}}function $(E,U){if(1&E){const s=n.EpF();n.TgZ(0,"form"),n.YNc(1,Z,7,6,"fd-layout-grid",8),n.TgZ(2,"fd-layout-grid")(3,"div",9)(4,"div",10),n._uU(5,"\xa0"),n.qZA(),n.TgZ(6,"div",11)(7,"fdp-button",12),n.NdJ("click",function(){n.CHM(s);const g=n.oxw();return n.KtG(g.addCondition())}),n.ALo(8,"fdTranslate"),n.qZA()()()()()}if(2&E){const s=n.oxw();n.xp6(1),n.Q6J("ngForOf",s._formItems),n.xp6(6),n.Q6J("label",n.lcZ(8,2,"platformSmartFilterBar.defineConditionsAddConditionButtonLabel"))}}function z(E,U){1&E&&(n.TgZ(0,"div",16),n._UZ(1,"fd-busy-indicator",17),n.qZA()),2&E&&(n.xp6(1),n.Q6J("loading",!0))}let k=(()=>{class E{constructor(s,u,g,P){this._dialogRef=s,this._language$=u,this._cdr=g,this._smartFilterBarService=P,this.conditionOperatorOptions=[],this._formItems=[],this.loaded=!1,this._conditionLabelKeys={contains:"filterConditionContains",equalTo:"filterConditionEqualTo",between:"filterConditionBetween",beginsWith:"filterConditionBeginsWith",endsWith:"filterConditionEndsWith",lessThan:"filterConditionLessThan",lessThanOrEqualTo:"filterConditionLessThanOrEqualTo",greaterThan:"filterConditionGreaterThan",greaterThanOrEqualTo:"filterConditionGreaterThanOrEqualTo",after:"filterConditionAfter",onOrAfter:"filterConditionOnOrAfter",before:"filterConditionBefore",beforeOrOn:"filterConditionBeforeOrOn"},this._submittedForms=[],this._translationResolver=new v.en,this._init()}_init(){var s=this;return(0,_.Z)(function*(){s.config=s._dialogRef.data,s._language=yield(0,f.z)(s._language$),s.conditionOperatorOptions=yield s._getApplicableConditionOperators(),s._addExistingConditions((0,S.T)(s.config.conditions)),0===s.config.conditions.length&&s.addCondition(),s.loaded=!0,s._cdr.markForCheck()})()}addCondition(){this._formItems.push(this._generateFormGeneratorItems())}removeCondition(s){this._formItems.splice(s,1),0===this._formItems.length&&this.addCondition()}applyConditions(){this._cdr.detectChanges(),this._submittedForms=[],this.formGenerators.toArray().forEach(s=>s.submit())}_onFormSubmitted(s){if(this._submittedForms.push(s),this._submittedForms.length!==this.formGenerators.length)return;const u=this._submittedForms.map(g=>(g.value=void 0!==g.value1?g.value1:g.value,g));this._dialogRef.close(u.filter(g=>null!=g.value))}_cancel(){this._dialogRef.dismiss()}_getApplicableConditionOperators(){const s=this._smartFilterBarService.getApplicableFilterConditions(this.config.filterType,this.config.dataType);let u=this.config.defineStrategyLabels;if(!u){u={...this._conditionLabelKeys};for(const g in u)Object.prototype.hasOwnProperty.call(u,g)&&(u[g]=this._translationResolver.resolve(this._language,"platformSmartFilterBar."+u[g]))}return s.map(g=>({label:u[g],value:g}))}_addExistingConditions(s){s.forEach(u=>{const g=this._generateFormGeneratorItems(u);this._formItems.push(g)})}_generateFormGeneratorItems(s){return[{name:"operator",message:"operator",default:s?this.conditionOperatorOptions.find(u=>u.value===s.operator)?.value:this.conditionOperatorOptions[0].value,type:"select",choices:this.conditionOperatorOptions,required:!0,guiOptions:{inline:!1,column:1,noLabelLayout:!0}},{name:"value",message:"value",default:s?.value,type:this.config.filterType,choices:this.config.choices,placeholder:this._translationResolver.resolve(this._language,"platformSmartFilterBar.filterConditionValuePlaceholder"),controlType:this.config.controlType,when:u=>u.operator!==r.dh.BETWEEN,onchange:(u,g,P)=>{P.parent?.get("value1")?.setValue(u,{emitEvent:!1})},guiOptions:{inline:!1,column:2,noLabelLayout:!0}},{name:"value1",message:"value1",default:s?.value,type:this.config.filterType,choices:this.config.choices,placeholder:this._translationResolver.resolve(this._language,"platformSmartFilterBar.filterConditionValueFromPlaceholder"),controlType:this.config.controlType,when:u=>u.operator===r.dh.BETWEEN,onchange:(u,g,P)=>{P.parent?.get("value")?.setValue(u,{emitEvent:!1})},guiOptions:{inline:!1,column:2,noLabelLayout:!0}},{name:"value2",message:"value2",default:s?.value2,type:this.config.filterType,choices:this.config.choices,placeholder:this._translationResolver.resolve(this._language,"platformSmartFilterBar.filterConditionValueToPlaceholder"),required:!0,controlType:this.config.controlType,when:u=>u?.operator===r.dh.BETWEEN,guiOptions:{inline:!1,column:3,noLabelLayout:!0}}]}}return E.\u0275fac=function(s){return new(s||E)(n.Y36(p.zj),n.Y36(v.iC),n.Y36(n.sBO),n.Y36(b.Q))},E.\u0275cmp=n.Xpm({type:E,selectors:[["fdp-smart-filter-bar-conditions-dialog"]],viewQuery:function(s,u){if(1&s&&n.Gf(d.CI,5),2&s){let g;n.iGM(g=n.CRH())&&(u.formGenerators=g)}},decls:14,vars:8,consts:[[1,"fdp-smart-filter-bar__conditions-dialog"],["fdkTemplate","header"],[4,"ngIf","ngIfElse"],["buttonType","emphasized",3,"label","click"],["buttonType","transparent",3,"label","click"],["loadingTpl",""],["fd-bar-left",""],["fd-title","",3,"headerSize"],[4,"ngFor","ngForOf"],["fdLayoutGridRow",""],["colGrow","","fdLayoutGridCol",""],["fdLayoutGridCol","",1,"fdp-smart-filter-bar__actions-column"],[3,"label","click"],["columnLayout","XL3-L3-M3-S3",3,"formItems","unifiedLayout","noAdditionalContent","formSubmitted"],["colGrow","","fdLayoutGridCol","",1,"fdp-smart-filter-bar__actions-column"],["buttonType","transparent","glyph","decline","type","button",3,"title","click"],[2,"text-align","center","margin","1rem"],[3,"loading"]],template:function(s,u){if(1&s&&(n.TgZ(0,"fd-dialog",0)(1,"fd-dialog-header"),n.YNc(2,Y,4,2,"ng-template",1),n.qZA(),n.TgZ(3,"fd-dialog-body"),n.YNc(4,$,9,4,"form",2),n.qZA(),n.TgZ(5,"fd-dialog-footer")(6,"fd-dialog-footer-button")(7,"fdp-button",3),n.NdJ("click",function(){return u.applyConditions()}),n.ALo(8,"fdTranslate"),n.qZA()(),n.TgZ(9,"fd-dialog-footer-button")(10,"fdp-button",4),n.NdJ("click",function(){return u._cancel()}),n.ALo(11,"fdTranslate"),n.qZA()()()(),n.YNc(12,z,2,1,"ng-template",null,5,n.W1O)),2&s){const g=n.MAs(13);n.xp6(4),n.Q6J("ngIf",u.loaded)("ngIfElse",g),n.xp6(3),n.Q6J("label",n.lcZ(8,4,"platformSmartFilterBar.defineConditionsSubmitButtonLabel")),n.xp6(3),n.Q6J("label",n.lcZ(11,6,"platformSmartFilterBar.defineConditionsCancelButton"))}},dependencies:[O.sg,O.O5,l._Y,l.JL,l.F,e.C,F.r0,c.B,C.a,A.H,R.g,x.A,W.u,j.b,G.J,V.r,Q.S,X.q,w.q,J.I,N.n],encapsulation:2,changeDetection:0}),E})()},60065:(K,B,t)=>{t.d(B,{l:()=>it});var _=t(49671),r=t(77579),p=t(61135),d=t(83905),b=t(34986),S=t(85363),v=t(82722),f=t(30412),n=t(45335);class O extends n.aF{constructor(T){super(T)}filter(T){let o;switch(T){case"visible":o=this._getVisibleItems();break;case"active":o=this._getActiveItems();break;case"visibleAndActive":o=this._getVisibleAndActiveItems();break;case"mandatory":o=this._getMandatoryItems();break;default:o=this._getAllItems()}this.items$.next(o)}_getAllItems(){return this.items}_getVisibleItems(){return this.items.filter(T=>T.visible)}_getActiveItems(){return this.items.filter(T=>T.active)}_getVisibleAndActiveItems(){return this.items.filter(T=>T.visible||T.active)}_getMandatoryItems(){return this.items.filter(T=>T.mandatory)}}var l=t(60676),e=t(94650),F=t(36895),c=t(95209),C=t(61357),A=t(77023),R=t(87455),x=t(34853),W=t(23470),j=t(48977),G=t(18279),V=t(98887),Q=t(62361),X=t(92664),w=t(49095),J=t(50681),N=t(53096),Y=t(27660),Z=t(18273),$=t(87797),z=t(60342),k=t(32257),E=t(49115),U=t(7632),s=t(21565);const u=["table"];function g(D,T){1&D&&(e.TgZ(0,"div",6)(1,"fd-bar-element")(2,"h4",7),e._uU(3),e.ALo(4,"fdTranslate"),e.qZA()()(),e.TgZ(5,"div",8)(6,"fd-bar-element"),e._UZ(7,"fdp-table-reset-button"),e.qZA()()),2&D&&(e.xp6(2),e.Q6J("headerSize",4),e.xp6(1),e.hij(" ",e.lcZ(4,2,"platformSmartFilterBar.selectFiltersHeader")," "))}function P(D,T){1&D&&e._UZ(0,"fd-icon",17)}function q(D,T){if(1&D&&(e.TgZ(0,"fdp-table-cell"),e.YNc(1,P,1,0,"fd-icon",16),e.qZA()),2&D){const o=T.$implicit;e.xp6(1),e.Q6J("ngIf",o.active)}}function tt(D,T){if(1&D){const o=e.EpF();e.TgZ(0,"fdp-table",9,10),e.NdJ("rowSelectionChange",function(i){e.CHM(o);const a=e.oxw();return e.KtG(a._onRowSelectionChange(i))}),e.TgZ(2,"fdp-table-toolbar",11),e.ALo(3,"fdTranslate"),e.TgZ(4,"fdp-table-toolbar-actions")(5,"fdp-select",12),e.NdJ("selectionChange",function(i){e.CHM(o);const a=e.oxw();return e.KtG(a._onFilterVisibilityChange(i))}),e.qZA()()(),e._UZ(6,"fdp-column",13),e.ALo(7,"fdTranslate"),e.TgZ(8,"fdp-column",14),e.ALo(9,"fdTranslate"),e.YNc(10,q,2,1,"fdp-table-cell",15),e.qZA()()}if(2&D){const o=e.oxw();e.Q6J("dataSource",o.source),e.xp6(2),e.Q6J("hideItemCount",!1)("title",e.lcZ(3,7,"platformSmartFilterBar.selectFiltersAvailableFiltersText")),e.xp6(3),e.Q6J("list",o._filterVisibilityOptions)("value",o._filterVisibilityOptions[0].value),e.xp6(1),e.Q6J("label",e.lcZ(7,9,"platformSmartFilterBar.selectFiltersFilterColumnLabel")),e.xp6(2),e.Q6J("label",e.lcZ(9,11,"platformSmartFilterBar.selectFiltersActiveColumnLabel"))}}function et(D,T){1&D&&(e.TgZ(0,"div",18),e._UZ(1,"fd-busy-indicator",19),e.qZA()),2&D&&(e.xp6(1),e.Q6J("loading",!0))}let it=(()=>{class D{constructor(o,h,i){this._dialogRef=o,this._language$=h,this._cdr=i,this._filterVisibilityOptions=[],this.loaded=!1,this._categoryLabelKeys={all:"settingsCategoryAll",visible:"settingsCategoryVisible",active:"settingsCategoryActive",visibleAndActive:"settingsCategoryVisibleAndActive",mandatory:"settingsCategoryMandatory"},this._selectedFilters=[],this._onDestroy$=new r.x,this._isResetAvailableSubject$=new p.X(!1),this.isResetAvailable$=this._isResetAvailableSubject$.asObservable(),this._translationResolver=new l.en,this.setInitialTableState(),this._init()}_init(){var o=this;return(0,_.Z)(function*(){yield o._transformVisibilityLabels(),o.loaded=!0,o._cdr.markForCheck()})()}ngAfterViewInit(){this.setSelectedFilters()}_transformVisibilityLabels(){var o=this;return(0,_.Z)(function*(){let h=o._dialogRef.data.visibilityCategories;if(!h){const i=yield(0,d.z)(o._language$);h={...o._categoryLabelKeys};for(const a in h)Object.prototype.hasOwnProperty.call(h,a)&&(h[a]=o._translationResolver.resolve(i,"platformSmartFilterBar."+h[a]))}for(const[i,a]of Object.entries(h))o._filterVisibilityOptions.push({label:a,value:i})})()}setSelectedFilters(){this._sourceSubscription?.unsubscribe(),this._sourceSubscription=this.source.open().pipe((0,S.Q)(b.z),(0,v.R)(this._onDestroy$)).subscribe(o=>{o.forEach((h,i)=>{h.visible&&this.table.toggleSelectableRow(i)})})}ngOnDestroy(){this._onDestroy$.next(),this._onDestroy$.complete()}reset(){this.setInitialTableState(),this.setSelectedFilters()}setInitialTableState(){this._availableFields=this._dialogRef.data.fields.filter(o=>o.filterable).map(o=>({label:o.label,active:!!this._dialogRef.data.filterBy.find(h=>h.field===o.name),mandatory:o.required,visible:this._dialogRef.data.selectedFilters.includes(o.name),key:o.key,name:o.name})),this.source=new n.Gl(new O(this._availableFields))}_cancel(){this._dialogRef.dismiss()}_confirm(){this._dialogRef.close(this._selectedFilters)}_onRowSelectionChange(o){this._selectedFilters=o.selection.map(h=>h.name),this._isResetAvailableSubject$.next(!0)}_onFilterVisibilityChange(o){this.table&&(this.source.dataProvider.filter(o.payload),this.source.fetch(this.table.getTableState()))}}return D.\u0275fac=function(o){return new(o||D)(e.Y36(f.zj),e.Y36(l.iC),e.Y36(e.sBO))},D.\u0275cmp=e.Xpm({type:D,selectors:[["fdp-smart-filter-bar-settings-dialog"]],viewQuery:function(o,h){if(1&o&&e.Gf(u,5),2&o){let i;e.iGM(i=e.CRH())&&(h.table=i.first)}},features:[e._Bn([{provide:n.uI,useExisting:D}])],decls:14,vars:8,consts:[[1,"fdp-table-p13-filtering-dialog"],["fdkTemplate","header"],["selectionMode","multiple",3,"dataSource","rowSelectionChange",4,"ngIf","ngIfElse"],["buttonType","emphasized",3,"label","click"],["buttonType","transparent",3,"label","click"],["loadingTpl",""],["fd-bar-left",""],["fd-title","",3,"headerSize"],["fd-bar-right",""],["selectionMode","multiple",3,"dataSource","rowSelectionChange"],["table",""],[3,"hideItemCount","title"],[3,"list","value","selectionChange"],["align","start","key","label","name","label",3,"label"],["align","center","key","active","name","active","width","150px",3,"label"],[4,"fdpCellDef"],["glyph","accept",4,"ngIf"],["glyph","accept"],[2,"text-align","center","margin","1rem"],[3,"loading"]],template:function(o,h){if(1&o&&(e.TgZ(0,"fd-dialog",0)(1,"fd-dialog-header"),e.YNc(2,g,8,4,"ng-template",1),e.qZA(),e.TgZ(3,"fd-dialog-body"),e.YNc(4,tt,11,13,"fdp-table",2),e.qZA(),e.TgZ(5,"fd-dialog-footer")(6,"fd-dialog-footer-button")(7,"fdp-button",3),e.NdJ("click",function(){return h._confirm()}),e.ALo(8,"fdTranslate"),e.qZA()(),e.TgZ(9,"fd-dialog-footer-button")(10,"fdp-button",4),e.NdJ("click",function(){return h._cancel()}),e.ALo(11,"fdTranslate"),e.qZA()()()(),e.YNc(12,et,2,1,"ng-template",null,5,e.W1O)),2&o){const i=e.MAs(13);e.xp6(4),e.Q6J("ngIf",h.loaded)("ngIfElse",i),e.xp6(3),e.Q6J("label",e.lcZ(8,4,"platformSmartFilterBar.selectFiltersSubmitButtonLabel")),e.xp6(3),e.Q6J("label",e.lcZ(11,6,"platformSmartFilterBar.selectFiltersCancelButton"))}},dependencies:[F.O5,c.r0,C.o,A.B,R.a,x.H,W.g,j.A,G.u,V.b,Q.M,X.J,w.r,J.S,N.a,Y.Z,Z.U,$.I,z.x,k.w,E.tY,E.y_,U.H,s.n],encapsulation:2,changeDetection:0}),D})()},92205:(K,B,t)=>{t.d(B,{m:()=>d});var _=t(21281),p=(t(45335),t(94650));let d=(()=>{class b{constructor(){this.conditionStrategy="or",this._smartFilterBarFilterable=!0,this._required=!1,this._defaultSelected=!1,this._hasOptions=!1}set smartFilterBarFilterable(v){this._smartFilterBarFilterable=(0,_.Ig)(v)}get smartFilterBarFilterable(){return this._smartFilterBarFilterable}set required(v){this._required=(0,_.Ig)(v)}get required(){return this._required}set defaultSelected(v){this._defaultSelected=(0,_.Ig)(v)}get defaultSelected(){return this._defaultSelected}set hasOptions(v){this._hasOptions=(0,_.Ig)(v)}get hasOptions(){return this._hasOptions}}return b.\u0275fac=function(v){return new(v||b)},b.\u0275dir=p.lG2({type:b,selectors:[["","fdpSmartFilterBarFieldDefinition",""],["","fdp-smart-filter-bar-field-definition",""]],inputs:{key:"key",name:"name",label:"label",filterType:"filterType",dataType:"dataType",customFilterType:"customFilterType",conditionStrategy:"conditionStrategy",smartFilterBarFilterable:"smartFilterBarFilterable",required:"required",defaultSelected:"defaultSelected",hasOptions:"hasOptions"}}),b})()},70295:(K,B,t)=>{t.d(B,{O:()=>b});var _=t(61135),r=t(45335),p=t(92205),d=t(94650);let b=(()=>{class S{constructor(f){this._subject=f,this._fieldDefinitionsSubject=new _.X([]),this.fieldsStream=this._fieldDefinitionsSubject.asObservable()}ngAfterViewInit(){this._fieldDefinitionsSubject.next(this._fieldDefinitions.toArray().map(f=>this._transformSubjectField(f))),this._fieldDefinitions.changes.subscribe(f=>{this._fieldDefinitionsSubject.next(f.map(n=>this._transformSubjectField(n)))})}getDataSource(){return this._subject.getDataSource()}getSubjectFields(){return this._fieldDefinitions.toArray().map(f=>this._transformSubjectField(f))}getFieldVariants(f){return this.getDataSource().dataProvider.getFieldOptions(f)}getDefaultFields(){return this.getSubjectFields()?.filter(f=>f.defaultSelected).map(f=>f.name)}getState(){return this._subject.getTableState()}getSubject(){return this._subject}_transformSubjectField(f){return{key:f.key,name:f.name,label:f.label,filterType:f.filterType,filterable:f.smartFilterBarFilterable,dataType:f.dataType,required:f.required,customFilterType:f.customFilterType,defaultSelected:f.defaultSelected,hasOptions:f.hasOptions,conditionStrategy:f.conditionStrategy}}}return S.\u0275fac=function(f){return new(f||S)(d.Y36(r.iA))},S.\u0275dir=d.lG2({type:S,selectors:[["","fdpSmartFilterBarSubject",""],["","fdp-smart-filter-bar-subject",""]],contentQueries:function(f,n,O){if(1&f&&d.Suo(O,p.m,4),2&f){let l;d.iGM(l=d.CRH())&&(n._fieldDefinitions=l)}},exportAs:["fdp-smart-filter-bar-subject"]}),S})()},82737:(K,B,t)=>{t.d(B,{G:()=>r});var _=t(94650);let r=(()=>{class p{constructor(b){this.templateRef=b}}return p.\u0275fac=function(b){return new(b||p)(_.Y36(_.Rgc))},p.\u0275dir=_.lG2({type:p,selectors:[["","fdpSmartFilterBarToolbarItem",""]]}),p})()},39671:(K,B,t)=>{t.d(B,{T:()=>r});var _=t(42175);function r(p){return Array.isArray(p)&&(p=p.map(d=>r(d))),(0,_.UL)(p)?p.value:p}},25612:(K,B,t)=>{t.d(B,{gR:()=>G.g,TR:()=>W,jL:()=>N.j,QX:()=>A.Q,ij:()=>Y});var _=t(36895),r=t(90433),p=t(35532),d=t(18754),b=t(85174),S=t(58073),v=t(98051),f=t(90020),n=t(16581),O=t(66380),l=t(30412),e=t(7662),F=t(74008),c=t(45335),C=t(47357),A=t(18402),R=t(60676),x=t(94650);let W=(()=>{class Z{}return Z.\u0275fac=function(z){return new(z||Z)},Z.\u0275mod=x.oAB({type:Z}),Z.\u0275inj=x.cJS({providers:[A.Q,b.bN],imports:[_.ez,r.u5,r.UX,b.AY,R.LU,d.hJ,p.UU,S.V_,v.RO,b.tD,n.QX,f.UH,O.K2,l.Su,e.pV,F.nD,c.ky,b.hY,b.aL,b.Mk,C.hd]}),Z})();var j=t(76960),G=t(79334),N=(t(38831),t(4235),t(60065),t(92205),t(70295),t(66628));const Y={provide:N.j,useExisting:(0,x.Gpc)(()=>j.B)}},66628:(K,B,t)=>{t.d(B,{j:()=>r});var _=t(94650);let r=(()=>{class p{constructor(){this.name="platformSmartFilterBar",this.presetChanged=new _.vpe}}return p.\u0275fac=function(b){return new(b||p)},p.\u0275dir=_.lG2({type:p,inputs:{name:"name"},outputs:{presetChanged:"presetChanged"}}),p})()},76960:(K,B,t)=>{t.d(B,{B:()=>T});var _=t(49671),r=t(94650),p=t(90433),d=t(19182),b=t(50727),S=t(61135),v=t(39300),f=t(78372),n=t(83905),O=t(95698),l=t(82722),e=t(54004),F=t(30412),c=t(45335),C=t(85174),A=t(42175),R=t(60065),W=(t(70295),t(82737)),j=t(18402);const G="smart-filter-condition-renderer";var V=t(66628),Q=t(38831),X=t(39671),w=t(21281),J=t(36895),N=t(16650),Y=t(73788),Z=t(70363),$=t(46768),z=t(48223),k=t(95209),E=t(23988),U=t(21565);function s(o,h){}function u(o,h){if(1&o&&(r.ynx(0),r.YNc(1,s,0,0,"ng-template",10),r._UZ(2,"fd-toolbar-separator"),r.BQk()),2&o){const i=h.$implicit;r.xp6(1),r.Q6J("ngTemplateOutlet",i)}}function g(o,h){if(1&o&&(r.ynx(0),r.YNc(1,u,3,1,"ng-container",9),r.BQk()),2&o){const i=r.oxw();r.xp6(1),r.Q6J("ngForOf",i._toolbarItems)}}function P(o,h){if(1&o){const i=r.EpF();r.TgZ(0,"fdp-button",11),r.NdJ("click",function(){r.CHM(i);const m=r.oxw();return r.KtG(m.submitForm())}),r.ALo(1,"fdTranslate"),r.qZA()}if(2&o){const i=r.oxw();r.Q6J("disabled",i._loading)("label",r.lcZ(1,2,"platformSmartFilterBar.submitButtonLabel"))}}const q=function(o){return{filtersCount:o}},it={responsivePadding:!0,verticalPadding:!0,minWidth:"30rem",bodyMinHeight:"calc(50vh - 88px)"},D={provide:V.j,useExisting:(0,r.Gpc)(()=>T)};let T=(()=>{class o extends V.j{set subject(i){this._setSubject(i)}get subject(){return this._subject}set transparent(i){this._transparent=(0,w.Ig)(i)}get transparent(){return this._transparent}get _loading(){return!this._subject?.getDataSource()||this._subject.getDataSource().isDataLoading}constructor(i,a,m,y,L,M){super(),this._dialogService=i,this._cdr=a,this._smartFilterBarService=m,this._fgService=y,this._injector=L,this._destroy$=M,this.filtersColumnLayout="XL4-L3-M2-S1",this.liveUpdate=!1,this.smartFiltersChanged=new r.vpe,this.smartFiltersApplied=new r.vpe,this.searchInputChanged=new r.vpe,this.filterBy=[],this._toolbarItems=[],this._selectedFilters=[],this._showFilterBar=!0,this._subscriptions=new b.w0,this._subjectSubscriptions=new b.w0,this._transparent=!1,this._formGeneratorReady=new S.X(!1),this._ignorePresetChange=!1,this._fgService.addComponent(Q.v,[G])}ngAfterViewInit(){this._toolbarItems=this._toolbarItemRefs.toArray().map(i=>i.templateRef),this._toolbarItemRefs.changes.subscribe(()=>{this._toolbarItems=this._toolbarItemRefs.toArray().map(i=>i.templateRef)})}ngOnDestroy(){this._subscriptions.unsubscribe(),this._unsubscribeFromSubject()}getDisplayValue(i,a){var m=this;return(0,_.Z)(function*(){return m._smartFilterBarService.getDisplayValue(i,a)})()}showFilteringSettings(){const a={fields:this._getSubjectDefinitions(),filterBy:this.filterBy,selectedFilters:this._selectedFilters,visibilityCategories:this.filtersVisibilityCategoryLabels};this._dialogService.open(R.l,{...it,disablePaddings:!0,width:"50rem",data:a},this._injector).afterClosed.pipe((0,O.q)(1)).subscribe(y=>{this._setSelectedFilters(y)})}_onSearchInputChange(i){this.search=i,this.searchInputChanged.emit(i)}_cancelSearch(){this.search=void 0,this.liveUpdate&&this.submitForm()}submitForm(){this._formGenerator.submit()}setPreset(i){var a=this;return(0,_.Z)(function*(){a._ignorePresetChange=!0,i.filterBy=i.filterBy||[],a.filterBy=i.filterBy,a.search=i.search,a._formGeneratorReady.pipe((0,v.h)(m=>m)).subscribe((0,_.Z)(function*(){a._fgService.resetForm(a._formGenerator.form);for(const y of a.filterBy){const L=a._fgService.getFormControl(a._formGenerator.form,y.field);if(!L)continue;const M=L.formItem,I=a._smartFilterBarService.transformCollectionFilter(y),H=yield a._smartFilterBarService.getConditionFieldSelectedVariants(M,I);L?.setValue(H)}a._setSelectedFilters(a.filterBy.map(y=>y.field)),a.subject.getDataSource().dataProvider.setFilters(a.filterBy,a.search),a.subject.getSubject().fetch()}))})()}getCurrentPreset(){return{search:this.search,filterBy:this.filterBy}}_onFormSubmitted(i){const a=this._generateCollectionFilterGroups(i);this._applyFiltering(a)}_onFormCreated(){var i=this;this.subject&&this._setSelectedFilters([...this.subject.getDefaultFields(),...this._selectedFilters]),this._formGenerator.form.valueChanges.pipe((0,f.b)(50),(0,l.R)(this._destroy$)).subscribe((0,_.Z)(function*(){const a=yield i.getFormattedConditions();i.smartFiltersChanged.emit({filterBy:a,search:i.search,subject:i.subject}),i.liveUpdate&&i._applyFiltering(a)})),this._formGeneratorReady.next(!0)}_toggleFilterBar(){this._showFilterBar=!this._showFilterBar,this._cdr.markForCheck()}getFormattedConditions(){var i=this;return(0,_.Z)(function*(){const a=yield i._fgService.getFormValue(i._formGenerator.form);return i._generateCollectionFilterGroups(a)})()}_generateCollectionFilterGroups(i){const a=[],m=this._getSubjectDefinitions();return Object.entries(i).filter(([,y])=>!!y).forEach(([y,L])=>{const M=m.find(H=>H.name===y),I={filters:[],strategy:M.conditionStrategy,field:M.key};L.forEach(H=>{I.filters.push({strategy:H.operator,field:M.key,value:H.value,value2:H.value2,type:M.dataType})}),a.push(I)}),a.filter(y=>y.filters?.length>0)}_setSubject(i){i&&(this._subject=i,this.unsubscribeFromSubject(),this._listenToSubjectColumns())}unsubscribeFromSubject(){}_listenToSubjectColumns(){var i=this;this._subjectSubscriptions.add(this._subject.fieldsStream.subscribe(function(){var a=(0,_.Z)(function*(m){setTimeout((0,_.Z)(function*(){yield i._generateForm(m.filter(y=>y.filterable))}))});return function(m){return a.apply(this,arguments)}}()))}_generateForm(i){var a=this;return(0,_.Z)(function*(){const m=[],y=function et(o){return Math.max(...o.split("-").map(h=>{const i=h.match(/\d+/);return i?parseInt(i[0],10):1}))}(a.filtersColumnLayout??"");let L=1;0!==i.length&&(i.forEach(M=>{let I=a._generateBaseFieldItem(M);switch(M.required&&a._selectedFilters.push(M.name),M.filterType){case c.vA.SINGLE:case c.vA.CATEGORY:I.guiOptions.additionalData.type="select",I.guiOptions.inline=!1;break;case c.vA.MULTI:I.guiOptions.additionalData.type="multi-input";break;case c.vA.CUSTOM:I=a._generateCustomFilterFieldItem(M,I);break;default:I=a._generateInputFieldItem(M,I)}I.guiOptions.column=L,L+=1,L>y&&(L=1),m.push(I)}),a._formItems=m,a._cdr.detectChanges())})()}_generateCustomFilterFieldItem(i,a){return i.customFilterType&&(a.guiOptions.additionalData.type=i.customFilterType,a.guiOptions.additionalData=Object.assign(a.guiOptions.additionalData,this._smartFilterBarService.getCustomFilterConfiguration(i.customFilterType)),a.type=a.guiOptions.additionalData.rendererComponent?`${a.guiOptions.additionalData.type}-renderer`:a.type,a.transformer=a.guiOptions.additionalData.valueTransformer),a}_generateInputFieldItem(i,a){switch(i.dataType){case c.g.DATE:a.guiOptions.additionalData.type="datepicker";break;case c.g.NUMBER:a.guiOptions.additionalData.controlType="number";break;default:a.guiOptions.additionalData.controlType="text"}return a}_generateBaseFieldItem(i){return{name:i.name,message:i.label,required:i.required,type:G,placeholder:" ",validators:i.required?[p.kI.required]:[],choices:i.hasOptions?this._getFilterDefaultOptions(i.key,i.filterType):void 0,transformer:a=>(0,X.T)(a),guiOptions:{additionalData:{type:"input",dataType:i.dataType,filterType:i.filterType,controlType:"text",choices:i.hasOptions?this._getFilterAvailableOptions(i.key):void 0}},when:()=>this._selectedFilters.includes(i.name)}}_getFilterAvailableOptions(i){return()=>this._getFieldVariants(i)}_getFilterDefaultOptions(i,a){var m=this;return(0,_.Z)(function*(){const y=yield(0,n.z)(m._getFieldVariants(i).pipe((0,O.q)(1))),L=[];for(const M of y){const I={value:M.value,operator:"equalTo"};I.displayValue=yield m.getDisplayValue(I,a),L.push(I)}return L})}_getFieldVariants(i){return this.subject.getFieldVariants(i).pipe((0,O.q)(1),(0,e.U)(a=>a.filter((m,y)=>a.findIndex(L=>L.value===m.value)===y)))}_getSubjectDefinitions(){return this.subject?.getSubjectFields()||[]}_applyFiltering(i){const a=this.subject.getDataSource();this.filterBy=i,a.dataProvider.setFilters(i,this.search),this.subject.getSubject().fetch();const m={search:this.search,filterBy:this.filterBy};this.smartFiltersApplied.emit({...m,subject:this._subject}),this._ignorePresetChange||this.presetChanged.emit(m),this._ignorePresetChange=!1}_unsubscribeFromSubject(){this._subjectSubscriptions.unsubscribe(),this._subjectSubscriptions=new b.w0}_setSelectedFilters(i){this._selectedFilters=i.filter((a,m)=>i.indexOf(a)===m),this._formGenerator.refreshStepsVisibility()}}return o.\u0275fac=function(i){return new(i||o)(r.Y36(F.xA),r.Y36(r.sBO),r.Y36(j.Q),r.Y36(C.bN),r.Y36(r.zs3),r.Y36(d._ZF))},o.\u0275cmp=r.Xpm({type:o,selectors:[["fdp-smart-filter-bar"]],contentQueries:function(i,a,m){if(1&i&&r.Suo(m,W.G,4),2&i){let y;r.iGM(y=r.CRH())&&(a._toolbarItemRefs=y)}},viewQuery:function(i,a){if(1&i&&r.Gf(C.CI,5),2&i){let m;r.iGM(m=r.CRH())&&(a._formGenerator=m.first)}},hostAttrs:[1,"fdp-smart-filter-bar"],hostVars:2,hostBindings:function(i,a){2&i&&r.ekj("fdp-smart-filter-bar--transparent",a.transparent)},inputs:{subject:"subject",showFiltersLabel:"showFiltersLabel",hideFiltersLabel:"hideFiltersLabel",filtersLabel:"filtersLabel",transparent:"transparent",defineStrategyLabels:"defineStrategyLabels",filtersVisibilityCategoryLabels:"filtersVisibilityCategoryLabels",filtersColumnLayout:"filtersColumnLayout",liveUpdate:"liveUpdate"},outputs:{smartFiltersChanged:"smartFiltersChanged",smartFiltersApplied:"smartFiltersApplied",searchInputChanged:"searchInputChanged"},features:[r._Bn([D,d._ZF,{provide:A.ID,useExisting:o}]),r.qOj],decls:15,vars:27,consts:[["fdType","transparent",3,"hasTitle"],[4,"ngIf"],[3,"disabled","disableRefresh","placeholder","inputChange","searchSubmit","cancelSearch"],["buttonType","emphasized","fd-toolbar-item","",3,"disabled","label","click",4,"ngIf"],["fd-toolbar-item","","glyph","synchronize",3,"disabled","ariaLabel","click"],["fd-toolbar-item","",3,"label","disabled","click"],["buttonType","transparent","fd-toolbar-item","",3,"label","disabled","click"],[1,"fdp-smart-filter-bar__filters",3,"hidden"],[3,"noAdditionalContent","formItems","columnLayout","formCreated","formSubmitted"],[4,"ngFor","ngForOf"],[3,"ngTemplateOutlet"],["buttonType","emphasized","fd-toolbar-item","",3,"disabled","label","click"]],template:function(i,a){1&i&&(r.TgZ(0,"div")(1,"fd-toolbar",0),r.YNc(2,g,2,1,"ng-container",1),r.TgZ(3,"fdp-search-field",2),r.NdJ("inputChange",function(y){return a._onSearchInputChange(y)})("searchSubmit",function(){return a.submitForm()})("cancelSearch",function(){return a._cancelSearch()}),r.ALo(4,"fdTranslate"),r.qZA(),r._UZ(5,"fd-toolbar-spacer"),r.YNc(6,P,2,4,"fdp-button",3),r.TgZ(7,"fdp-button",4),r.NdJ("click",function(){return a.submitForm()}),r.ALo(8,"fdTranslate"),r.qZA(),r.TgZ(9,"fdp-button",5),r.NdJ("click",function(){return a.showFilteringSettings()}),r.ALo(10,"fdTranslate"),r.qZA(),r.TgZ(11,"fdp-button",6),r.NdJ("click",function(){return a._toggleFilterBar()}),r.ALo(12,"fdTranslate"),r.qZA()()(),r.TgZ(13,"div",7)(14,"fdp-form-generator",8),r.NdJ("formCreated",function(){return a._onFormCreated()})("formSubmitted",function(y){return a._onFormSubmitted(y)}),r.qZA()()),2&i&&(r.xp6(1),r.Q6J("hasTitle",!0),r.xp6(1),r.Q6J("ngIf",a._toolbarItems),r.xp6(1),r.Q6J("disabled",a._loading)("disableRefresh",!0)("placeholder",r.lcZ(4,16,"platformSmartFilterBar.searchPlaceholder")),r.xp6(3),r.Q6J("ngIf",!a.liveUpdate),r.xp6(1),r.Q6J("disabled",a._loading)("ariaLabel",r.lcZ(8,18,"platformSmartFilterBar.refreshButtonAriaLabel")),r.xp6(2),r.Q6J("label",a.filtersLabel?a.filtersLabel+" ("+a._selectedFilters.length+")":r.xi3(10,20,"platformSmartFilterBar.filtersButtonLabel",r.VKq(25,q,a._selectedFilters.length)))("disabled",a._loading),r.xp6(2),r.Q6J("label",r.lcZ(12,23,a._showFilterBar?"platformSmartFilterBar.hideFiltersButtonLabel":"platformSmartFilterBar.showFiltersButtonLabel"))("disabled",a._loading),r.xp6(2),r.Q6J("hidden",!a._showFilterBar),r.xp6(1),r.Q6J("noAdditionalContent",!0)("formItems",a._formItems)("columnLayout",a.filtersColumnLayout))},dependencies:[J.sg,J.O5,J.tP,N.C,Y.n,Z.Q,$.v,z.F,k.r0,E.ri,U.n],styles:[".fdp-smart-filter-bar{display:block;box-shadow:var(--sapContent_HeaderShadow);background-color:var(--sapObjectHeader_Background)}.fdp-smart-filter-bar--transparent{background-color:var(--sapToolbar_Background);box-shadow:none}.fdp-smart-filter-bar .fd-toolbar--title{height:3rem;min-height:3rem;border-bottom:none;padding:.5rem}@media (min-width: 600px){.fdp-smart-filter-bar .fd-toolbar--title{padding-left:2rem;padding-right:2rem}}.fdp-smart-filter-bar .fd-toolbar fdp-search-field{min-width:15.5rem}.fdp-smart-filter-bar .fdp-smart-filter-bar__filters{padding-left:.5rem;padding-right:.5rem}@media (min-width: 600px){.fdp-smart-filter-bar .fdp-smart-filter-bar__filters{padding-left:2rem;padding-right:2rem}}.fdp-smart-filter-bar .fd-container.fd-form-layout-grid-container{padding:0}.fdp-smart-filter-bar .fd-container.fd-form-layout-grid-container .fd-row .fd-form-group{padding-left:.25rem!important;padding-right:.25rem!important}.fdp-smart-filter-bar__conditions-dialog .fdp-smart-filter-bar__actions-column{min-width:auto;flex:0 0 auto}.fdp-smart-filter-bar__conditions-dialog .fd-popover-custom{display:block}.fdp-smart-filter-bar__conditions-dialog .fd-dialog__body{padding:0 .5rem;background-color:var(--sapBackgroundColor, #f7f7f7)}.fdp-smart-filter-bar__conditions-dialog .fd-container.fd-form-layout-grid-container,.fdp-smart-filter-bar__conditions-dialog .fd-container.fd-form-layout-grid-container .fd-row .fd-form-group{padding:0!important}\n"],encapsulation:2,changeDetection:0}),o})()},18402:(K,B,t)=>{t.d(B,{Q:()=>f});var _=t(49671),r=t(93484),p=t(85174),d=t(45335),b=t(42175),S=t(19182),v=t(94650);let f=(()=>{class n{constructor(l){this._fgService=l,this._customFilterConditions=new Map}addCustomFilter(l){if(!l.conditionComponent&&l.rendererComponent&&(l.conditionComponent=l.rendererComponent),!l.conditionComponent)return!1;const e=this._fgService.addComponent(l.conditionComponent,l.types);return e&&this._customFilterConditions.set(l.conditionComponent,l),e&&l.rendererComponent&&this._fgService.addComponent(l.rendererComponent,l.types.map(F=>`${F}-renderer`)),e}getCustomFilterConfiguration(l){const e=this._fgService.getComponentDefinitionByType(l);if(e)return this._customFilterConditions.get(e.component)}getApplicableFilterConditions(l,e=d.g.STRING){const F=this._fgService.getComponentDefinitionByType(l),c=(0,d.b3)(e);return F&&this._customFilterConditions.get(F.component)?.filterStrategies||c}getDisplayValue(l,e){var F=this;return(0,_.Z)(function*(){const c=F.getCustomFilterConfiguration(e);if(c?.valueRenderer){const R=c?.valueRenderer(l),x=(0,S.M7n)(R);let W;return yield x.createSubscription(R,j=>{W=j}),W}const C=F._normalizeValue(l.value),A=F._normalizeValue(l.value2);switch(l.operator){case"equalTo":return`=${C}`;case"contains":return`*${C}*`;case"between":return`${C}...${A}`;case"beginsWith":return`${C}*`;case"endsWith":return`*${C}`;case"greaterThan":case"after":return`>${C}`;case"greaterThanOrEqualTo":case"onOrAfter":return`>=${C}`;case"lessThan":case"before":return`<${C}`;case"lessThanOrEqualTo":case"beforeOrOn":return`<=${C}`;default:return`${C}`}})()}normalizeConditions(l,e){var F=this;return(0,_.Z)(function*(){const c=[];for(const C of e){const A=Object.assign({},C);A.displayValue=yield F.getDisplayValue(A,l.guiOptions?.additionalData.type),c.push(A)}return c})()}getConditionFieldSelectedVariants(l,e){var F=this;return(0,_.Z)(function*(){return(yield F.normalizeConditions(l,e)).map(c=>(0,b.UL)(c)?c:{label:c.displayValue,value:c})})()}transformCollectionFilter(l){return l.filters.map(e=>({operator:e.strategy,value:e.value,value2:e.value2}))}_normalizeValue(l){return Array.isArray(l)?l.map(e=>this._normalizeValue(e)).join(", "):(0,b.UL)(l)?l.label:l instanceof r._U?l.toDateString():l}}return n.\u0275fac=function(l){return new(l||n)(v.LFG(p.bN))},n.\u0275prov=v.Yz7({token:n,factory:n.\u0275fac}),n})()}}]);