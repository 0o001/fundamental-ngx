"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[864],{79334:(x,S,t)=>{t.d(S,{g:()=>O});var c=t(49671),r=t(49218),_=t(82848),f=t(95698),b=t(18402),T=t(4235),y=t(65638),d=t(94650),n=t(66628);let O=(()=>{class l extends _.Ze{constructor(g,v,C,P){var L;super(),L=this,this._dialogService=g,this._smartFilterBar=v,this._smartFilterBarService=C,this._injector=P,this.openConditionsDialog=()=>{const K=this.getField().value;var W;this._dialogService.open(T.e,{data:{header:this.formItem.message,dataType:this.formItem.guiOptions?.additionalData.dataType,filterType:this.formItem.guiOptions?.additionalData.type,conditions:K||[],choices:this.formItem.guiOptions?.additionalData.choices,controlType:this.formItem.guiOptions?.additionalData.controlType,defineStrategyLabels:this._smartFilterBar.defineStrategyLabels},width:"67.5rem",minHeight:"30%"},this._injector).afterClosed.pipe((0,f.q)(1)).subscribe({next:(W=(0,c.Z)(function*(G){const Q=L.getField(),J=yield L._smartFilterBarService.getConditionFieldSelectedVariants(L.formItem,G);Q.setValue(J)}),function(Q){return W.apply(this,arguments)}),error:W=>{}})}}getField(){return this.form.get(`${this.formGroupName}.${this.name}`)}}return l.\u0275fac=function(g){return new(g||l)(d.Y36(r.xA),d.Y36(n.j),d.Y36(b.Q),d.Y36(d.zs3))},l.\u0275dir=d.lG2({type:l,features:[d._Bn([_.dr,_.wk,y.i]),d.qOj]}),l})()},38831:(x,S,t)=>{t.d(S,{v:()=>n});var c=t(49218),r=t(18402),_=t(79334),f=t(94650),b=t(66628),T=t(90433),y=t(26928);const d=function(){return[]};let n=(()=>{class O extends _.g{constructor(e,g,v,C){super(e,g,v,C)}}return O.\u0275fac=function(e){return new(e||O)(f.Y36(c.xA),f.Y36(b.j),f.Y36(r.Q),f.Y36(f.zs3))},O.\u0275cmp=f.Xpm({type:O,selectors:[["fdp-smart-filter-bar-condition-field"]],features:[f.qOj],decls:3,vars:10,consts:[[3,"formGroup"],[3,"formGroupName"],["displayKey","displayValue",3,"id","addOnButtonClickFn","autofocus","dataSource","formControlName","name","placeholder"]],template:function(e,g){1&e&&(f.ynx(0,0)(1,1),f._UZ(2,"fdp-multi-input",2),f.BQk()()),2&e&&(f.Q6J("formGroup",g.form),f.xp6(1),f.Q6J("formGroupName",g.formGroupName),f.xp6(1),f.Q6J("id",g.id)("addOnButtonClickFn",g.openConditionsDialog)("autofocus",!0)("dataSource",g.formItem.choices||f.DdM(9,d))("formControlName",g.name)("name",g.name)("placeholder",g.formItem.placeholder||g.formItem.message))},dependencies:[T.JJ,T.JL,T.sg,T.u,T.x0,y.O],encapsulation:2}),O})()},4235:(x,S,t)=>{t.d(S,{e:()=>w});var c=t(49671),r=t(89441),_=t(49218),f=t(82848),b=t(18402),T=t(39671),y=t(60676),d=t(83905),n=t(94650),O=t(36895),l=t(90433),e=t(16650),g=t(95209),v=t(77023),C=t(87455),P=t(34853),L=t(23470),K=t(48977),j=t(18279),V=t(98887),W=t(92664),G=t(49095),Q=t(50681),J=t(54381),k=t(92575),N=t(30848),Y=t(21565);function $(E,Z){if(1&E&&(n.TgZ(0,"div",6)(1,"fd-bar-element")(2,"h4",7),n._uU(3),n.qZA()()()),2&E){const s=n.oxw();n.xp6(2),n.Q6J("headerSize",4),n.xp6(1),n.Oqu(s.config.header)}}function U(E,Z){if(1&E){const s=n.EpF();n.TgZ(0,"fd-layout-grid")(1,"div",9)(2,"div",10)(3,"fdp-form-generator",13),n.NdJ("formSubmitted",function(p){n.CHM(s);const R=n.oxw(2);return n.KtG(R._onFormSubmitted(p))}),n.qZA()(),n.TgZ(4,"div",14)(5,"fdp-button",15),n.NdJ("click",function(){const R=n.CHM(s).index,q=n.oxw(2);return n.KtG(q.removeCondition(R))}),n.ALo(6,"fdTranslate"),n.qZA()()()()}if(2&E){const s=Z.$implicit;n.xp6(3),n.Q6J("formItems",s)("unifiedLayout",!1)("noAdditionalContent",!0),n.xp6(2),n.Q6J("title",n.lcZ(6,4,"platformSmartFilterBar.defineConditionsRemoveConditionButtonTitle"))}}function z(E,Z){if(1&E){const s=n.EpF();n.TgZ(0,"form"),n.YNc(1,U,7,6,"fd-layout-grid",8),n.TgZ(2,"fd-layout-grid")(3,"div",9)(4,"div",10),n._uU(5,"\xa0"),n.qZA(),n.TgZ(6,"div",11)(7,"fdp-button",12),n.NdJ("click",function(){n.CHM(s);const p=n.oxw();return n.KtG(p.addCondition())}),n.ALo(8,"fdTranslate"),n.qZA()()()()()}if(2&E){const s=n.oxw();n.xp6(1),n.Q6J("ngForOf",s._formItems),n.xp6(6),n.Q6J("label",n.lcZ(8,2,"platformSmartFilterBar.defineConditionsAddConditionButtonLabel"))}}function H(E,Z){1&E&&(n.TgZ(0,"div",16),n._UZ(1,"fd-busy-indicator",17),n.qZA()),2&E&&(n.xp6(1),n.Q6J("loading",!0))}let w=(()=>{class E{constructor(s,u,p,R){this._dialogRef=s,this._language$=u,this._cdr=p,this._smartFilterBarService=R,this.conditionOperatorOptions=[],this._formItems=[],this.loaded=!1,this._conditionLabelKeys={contains:"filterConditionContains",equalTo:"filterConditionEqualTo",between:"filterConditionBetween",beginsWith:"filterConditionBeginsWith",endsWith:"filterConditionEndsWith",lessThan:"filterConditionLessThan",lessThanOrEqualTo:"filterConditionLessThanOrEqualTo",greaterThan:"filterConditionGreaterThan",greaterThanOrEqualTo:"filterConditionGreaterThanOrEqualTo",after:"filterConditionAfter",onOrAfter:"filterConditionOnOrAfter",before:"filterConditionBefore",beforeOrOn:"filterConditionBeforeOrOn"},this._submittedForms=[],this._translationResolver=new y.en,this._init()}_init(){var s=this;return(0,c.Z)(function*(){s.config=s._dialogRef.data,s._language=yield(0,d.z)(s._language$),s.conditionOperatorOptions=yield s._getApplicableConditionOperators(),s._addExistingConditions((0,T.T)(s.config.conditions)),0===s.config.conditions.length&&s.addCondition(),s.loaded=!0,s._cdr.markForCheck()})()}addCondition(){this._formItems.push(this._generateFormGeneratorItems())}removeCondition(s){this._formItems.splice(s,1),0===this._formItems.length&&this.addCondition()}applyConditions(){this._cdr.detectChanges(),this._submittedForms=[],this.formGenerators.toArray().forEach(s=>s.submit())}_onFormSubmitted(s){if(this._submittedForms.push(s),this._submittedForms.length!==this.formGenerators.length)return;const u=this._submittedForms.map(p=>(p.value=void 0!==p.value1?p.value1:p.value,p));this._dialogRef.close(u.filter(p=>null!=p.value))}_cancel(){this._dialogRef.dismiss()}_getApplicableConditionOperators(){const s=this._smartFilterBarService.getApplicableFilterConditions(this.config.filterType,this.config.dataType);let u=this.config.defineStrategyLabels;if(!u){u={...this._conditionLabelKeys};for(const p in u)Object.prototype.hasOwnProperty.call(u,p)&&(u[p]=this._translationResolver.resolve(this._language,"platformSmartFilterBar."+u[p]))}return s.map(p=>({label:u[p],value:p}))}_addExistingConditions(s){s.forEach(u=>{const p=this._generateFormGeneratorItems(u);this._formItems.push(p)})}_generateFormGeneratorItems(s){return[{name:"operator",message:"operator",default:s?this.conditionOperatorOptions.find(u=>u.value===s.operator)?.value:this.conditionOperatorOptions[0].value,type:"select",choices:this.conditionOperatorOptions,required:!0,guiOptions:{inline:!1,column:1,noLabelLayout:!0}},{name:"value",message:"value",default:s?.value,type:this.config.filterType,choices:this.config.choices,placeholder:this._translationResolver.resolve(this._language,"platformSmartFilterBar.filterConditionValuePlaceholder"),controlType:this.config.controlType,when:u=>u.operator!==r.dh.BETWEEN,onchange:(u,p,R)=>{R.parent?.get("value1")?.setValue(u,{emitEvent:!1})},guiOptions:{inline:!1,column:2,noLabelLayout:!0}},{name:"value1",message:"value1",default:s?.value,type:this.config.filterType,choices:this.config.choices,placeholder:this._translationResolver.resolve(this._language,"platformSmartFilterBar.filterConditionValueFromPlaceholder"),controlType:this.config.controlType,when:u=>u.operator===r.dh.BETWEEN,onchange:(u,p,R)=>{R.parent?.get("value")?.setValue(u,{emitEvent:!1})},guiOptions:{inline:!1,column:2,noLabelLayout:!0}},{name:"value2",message:"value2",default:s?.value2,type:this.config.filterType,choices:this.config.choices,placeholder:this._translationResolver.resolve(this._language,"platformSmartFilterBar.filterConditionValueToPlaceholder"),required:!0,controlType:this.config.controlType,when:u=>u?.operator===r.dh.BETWEEN,guiOptions:{inline:!1,column:3,noLabelLayout:!0}}]}}return E.\u0275fac=function(s){return new(s||E)(n.Y36(_.zj),n.Y36(y.iC),n.Y36(n.sBO),n.Y36(b.Q))},E.\u0275cmp=n.Xpm({type:E,selectors:[["fdp-smart-filter-bar-conditions-dialog"]],viewQuery:function(s,u){if(1&s&&n.Gf(f.CI,5),2&s){let p;n.iGM(p=n.CRH())&&(u.formGenerators=p)}},decls:14,vars:8,consts:[[1,"fdp-smart-filter-bar__conditions-dialog"],["fdkTemplate","header"],[4,"ngIf","ngIfElse"],["buttonType","emphasized",3,"label","click"],["buttonType","transparent",3,"label","click"],["loadingTpl",""],["fd-bar-left",""],["fd-title","",3,"headerSize"],[4,"ngFor","ngForOf"],["fdLayoutGridRow",""],["colGrow","","fdLayoutGridCol",""],["fdLayoutGridCol","",1,"fdp-smart-filter-bar__actions-column"],[3,"label","click"],["columnLayout","XL3-L3-M3-S3",3,"formItems","unifiedLayout","noAdditionalContent","formSubmitted"],["colGrow","","fdLayoutGridCol","",1,"fdp-smart-filter-bar__actions-column"],["buttonType","transparent","glyph","decline","type","button",3,"title","click"],[2,"text-align","center","margin","1rem"],[3,"loading"]],template:function(s,u){if(1&s&&(n.TgZ(0,"fd-dialog",0)(1,"fd-dialog-header"),n.YNc(2,$,4,2,"ng-template",1),n.qZA(),n.TgZ(3,"fd-dialog-body"),n.YNc(4,z,9,4,"form",2),n.qZA(),n.TgZ(5,"fd-dialog-footer")(6,"fd-dialog-footer-button")(7,"fdp-button",3),n.NdJ("click",function(){return u.applyConditions()}),n.ALo(8,"fdTranslate"),n.qZA()(),n.TgZ(9,"fd-dialog-footer-button")(10,"fdp-button",4),n.NdJ("click",function(){return u._cancel()}),n.ALo(11,"fdTranslate"),n.qZA()()()(),n.YNc(12,H,2,1,"ng-template",null,5,n.W1O)),2&s){const p=n.MAs(13);n.xp6(4),n.Q6J("ngIf",u.loaded)("ngIfElse",p),n.xp6(3),n.Q6J("label",n.lcZ(8,4,"platformSmartFilterBar.defineConditionsSubmitButtonLabel")),n.xp6(3),n.Q6J("label",n.lcZ(11,6,"platformSmartFilterBar.defineConditionsCancelButton"))}},dependencies:[O.sg,O.O5,l._Y,l.JL,l.F,e.C,g.r0,v.B,C.a,P.H,L.g,K.A,j.u,V.b,W.J,G.r,Q.S,J.q,k.q,N.I,Y.n],encapsulation:2,changeDetection:0}),E})()},60065:(x,S,t)=>{t.d(S,{l:()=>it});var c=t(49671),r=t(77579),_=t(61135),f=t(83905),b=t(34986),T=t(85363),y=t(82722),d=t(49218),n=t(89441);class O extends n.aF{constructor(B){super(B)}filter(B){let o;switch(B){case"visible":o=this._getVisibleItems();break;case"active":o=this._getActiveItems();break;case"visibleAndActive":o=this._getVisibleAndActiveItems();break;case"mandatory":o=this._getMandatoryItems();break;default:o=this._getAllItems()}this.items$.next(o)}_getAllItems(){return this.items}_getVisibleItems(){return this.items.filter(B=>B.visible)}_getActiveItems(){return this.items.filter(B=>B.active)}_getVisibleAndActiveItems(){return this.items.filter(B=>B.visible||B.active)}_getMandatoryItems(){return this.items.filter(B=>B.mandatory)}}var l=t(60676),e=t(94650),g=t(36895),v=t(95209),C=t(61357),P=t(77023),L=t(87455),K=t(34853),j=t(23470),V=t(48977),W=t(18279),G=t(98887),Q=t(62361),J=t(92664),k=t(49095),N=t(50681),Y=t(53096),$=t(27660),U=t(18273),z=t(87797),H=t(60342),w=t(49115),E=t(88862),Z=t(7632),s=t(21565);const u=["table"];function p(D,B){1&D&&(e.TgZ(0,"div",6)(1,"fd-bar-element")(2,"h4",7),e._uU(3),e.ALo(4,"fdTranslate"),e.qZA()()(),e.TgZ(5,"div",8)(6,"fd-bar-element"),e._UZ(7,"fdp-table-reset-button"),e.qZA()()),2&D&&(e.xp6(2),e.Q6J("headerSize",4),e.xp6(1),e.hij(" ",e.lcZ(4,2,"platformSmartFilterBar.selectFiltersHeader")," "))}function R(D,B){1&D&&e._UZ(0,"fd-icon",17)}function q(D,B){if(1&D&&(e.TgZ(0,"fdp-table-cell"),e.YNc(1,R,1,0,"fd-icon",16),e.qZA()),2&D){const o=B.$implicit;e.xp6(1),e.Q6J("ngIf",o.active)}}function tt(D,B){if(1&D){const o=e.EpF();e.TgZ(0,"fdp-table",9,10),e.NdJ("rowSelectionChange",function(i){e.CHM(o);const a=e.oxw();return e.KtG(a._onRowSelectionChange(i))}),e.TgZ(2,"fdp-table-toolbar",11),e.ALo(3,"fdTranslate"),e.TgZ(4,"fdp-table-toolbar-actions")(5,"fdp-select",12),e.NdJ("selectionChange",function(i){e.CHM(o);const a=e.oxw();return e.KtG(a._onFilterVisibilityChange(i))}),e.qZA()()(),e._UZ(6,"fdp-column",13),e.ALo(7,"fdTranslate"),e.TgZ(8,"fdp-column",14),e.ALo(9,"fdTranslate"),e.YNc(10,q,2,1,"fdp-table-cell",15),e.qZA()()}if(2&D){const o=e.oxw();e.Q6J("dataSource",o.source),e.xp6(2),e.Q6J("hideItemCount",!1)("title",e.lcZ(3,7,"platformSmartFilterBar.selectFiltersAvailableFiltersText")),e.xp6(3),e.Q6J("list",o._filterVisibilityOptions)("value",o._filterVisibilityOptions[0].value),e.xp6(1),e.Q6J("label",e.lcZ(7,9,"platformSmartFilterBar.selectFiltersFilterColumnLabel")),e.xp6(2),e.Q6J("label",e.lcZ(9,11,"platformSmartFilterBar.selectFiltersActiveColumnLabel"))}}function et(D,B){1&D&&(e.TgZ(0,"div",18),e._UZ(1,"fd-busy-indicator",19),e.qZA()),2&D&&(e.xp6(1),e.Q6J("loading",!0))}let it=(()=>{class D{constructor(o,h,i){this._dialogRef=o,this._language$=h,this._cdr=i,this._filterVisibilityOptions=[],this.loaded=!1,this._categoryLabelKeys={all:"settingsCategoryAll",visible:"settingsCategoryVisible",active:"settingsCategoryActive",visibleAndActive:"settingsCategoryVisibleAndActive",mandatory:"settingsCategoryMandatory"},this._selectedFilters=[],this._onDestroy$=new r.x,this._isResetAvailableSubject$=new _.X(!1),this.isResetAvailable$=this._isResetAvailableSubject$.asObservable(),this._translationResolver=new l.en,this.setInitialTableState(),this._init()}_init(){var o=this;return(0,c.Z)(function*(){yield o._transformVisibilityLabels(),o.loaded=!0,o._cdr.markForCheck()})()}ngAfterViewInit(){this.setSelectedFilters()}_transformVisibilityLabels(){var o=this;return(0,c.Z)(function*(){let h=o._dialogRef.data.visibilityCategories;if(!h){const i=yield(0,f.z)(o._language$);h={...o._categoryLabelKeys};for(const a in h)Object.prototype.hasOwnProperty.call(h,a)&&(h[a]=o._translationResolver.resolve(i,"platformSmartFilterBar."+h[a]))}for(const[i,a]of Object.entries(h))o._filterVisibilityOptions.push({label:a,value:i})})()}setSelectedFilters(){this._sourceSubscription?.unsubscribe(),this._sourceSubscription=this.source.open().pipe((0,T.Q)(b.z),(0,y.R)(this._onDestroy$)).subscribe(o=>{o.forEach((h,i)=>{h.visible&&this.table.toggleSelectableRow(i)})})}ngOnDestroy(){this._onDestroy$.next(),this._onDestroy$.complete()}reset(){this.setInitialTableState(),this.setSelectedFilters()}setInitialTableState(){this._availableFields=this._dialogRef.data.fields.filter(o=>o.filterable).map(o=>({label:o.label,active:!!this._dialogRef.data.filterBy.find(h=>h.field===o.name),mandatory:o.required,visible:this._dialogRef.data.selectedFilters.includes(o.name),key:o.key,name:o.name})),this.source=new n.Gl(new O(this._availableFields))}_cancel(){this._dialogRef.dismiss()}_confirm(){this._dialogRef.close(this._selectedFilters)}_onRowSelectionChange(o){this._selectedFilters=o.selection.map(h=>h.name),this._isResetAvailableSubject$.next(!0)}_onFilterVisibilityChange(o){this.table&&(this.source.dataProvider.filter(o.payload),this.source.fetch(this.table.getTableState()))}}return D.\u0275fac=function(o){return new(o||D)(e.Y36(d.zj),e.Y36(l.iC),e.Y36(e.sBO))},D.\u0275cmp=e.Xpm({type:D,selectors:[["fdp-smart-filter-bar-settings-dialog"]],viewQuery:function(o,h){if(1&o&&e.Gf(u,5),2&o){let i;e.iGM(i=e.CRH())&&(h.table=i.first)}},features:[e._Bn([{provide:n.uI,useExisting:D}])],decls:14,vars:8,consts:[[1,"fdp-table-p13-filtering-dialog"],["fdkTemplate","header"],["selectionMode","multiple",3,"dataSource","rowSelectionChange",4,"ngIf","ngIfElse"],["buttonType","emphasized",3,"label","click"],["buttonType","transparent",3,"label","click"],["loadingTpl",""],["fd-bar-left",""],["fd-title","",3,"headerSize"],["fd-bar-right",""],["selectionMode","multiple",3,"dataSource","rowSelectionChange"],["table",""],[3,"hideItemCount","title"],[3,"list","value","selectionChange"],["align","start","key","label","name","label",3,"label"],["align","center","key","active","name","active","width","150px",3,"label"],[4,"fdpCellDef"],["glyph","accept",4,"ngIf"],["glyph","accept"],[2,"text-align","center","margin","1rem"],[3,"loading"]],template:function(o,h){if(1&o&&(e.TgZ(0,"fd-dialog",0)(1,"fd-dialog-header"),e.YNc(2,p,8,4,"ng-template",1),e.qZA(),e.TgZ(3,"fd-dialog-body"),e.YNc(4,tt,11,13,"fdp-table",2),e.qZA(),e.TgZ(5,"fd-dialog-footer")(6,"fd-dialog-footer-button")(7,"fdp-button",3),e.NdJ("click",function(){return h._confirm()}),e.ALo(8,"fdTranslate"),e.qZA()(),e.TgZ(9,"fd-dialog-footer-button")(10,"fdp-button",4),e.NdJ("click",function(){return h._cancel()}),e.ALo(11,"fdTranslate"),e.qZA()()()(),e.YNc(12,et,2,1,"ng-template",null,5,e.W1O)),2&o){const i=e.MAs(13);e.xp6(4),e.Q6J("ngIf",h.loaded)("ngIfElse",i),e.xp6(3),e.Q6J("label",e.lcZ(8,4,"platformSmartFilterBar.selectFiltersSubmitButtonLabel")),e.xp6(3),e.Q6J("label",e.lcZ(11,6,"platformSmartFilterBar.selectFiltersCancelButton"))}},dependencies:[g.O5,v.r0,C.o,P.B,L.a,K.H,j.g,V.A,W.u,G.b,Q.M,J.J,k.r,N.S,Y.a,$.Z,U.U,z.I,H.x,w.tY,E.K,w.y_,Z.H,s.n],encapsulation:2,changeDetection:0}),D})()},92205:(x,S,t)=>{t.d(S,{m:()=>f});var c=t(21281),_=(t(89441),t(94650));let f=(()=>{class b{constructor(){this.conditionStrategy="or",this._smartFilterBarFilterable=!0,this._required=!1,this._defaultSelected=!1,this._hasOptions=!1}set smartFilterBarFilterable(y){this._smartFilterBarFilterable=(0,c.Ig)(y)}get smartFilterBarFilterable(){return this._smartFilterBarFilterable}set required(y){this._required=(0,c.Ig)(y)}get required(){return this._required}set defaultSelected(y){this._defaultSelected=(0,c.Ig)(y)}get defaultSelected(){return this._defaultSelected}set hasOptions(y){this._hasOptions=(0,c.Ig)(y)}get hasOptions(){return this._hasOptions}}return b.\u0275fac=function(y){return new(y||b)},b.\u0275dir=_.lG2({type:b,selectors:[["","fdpSmartFilterBarFieldDefinition",""],["","fdp-smart-filter-bar-field-definition",""]],inputs:{key:"key",name:"name",label:"label",filterType:"filterType",dataType:"dataType",customFilterType:"customFilterType",conditionStrategy:"conditionStrategy",smartFilterBarFilterable:"smartFilterBarFilterable",required:"required",defaultSelected:"defaultSelected",hasOptions:"hasOptions"}}),b})()},70295:(x,S,t)=>{t.d(S,{O:()=>b});var c=t(61135),r=t(89441),_=t(92205),f=t(94650);let b=(()=>{class T{constructor(d){this._subject=d,this._fieldDefinitionsSubject=new c.X([]),this.fieldsStream=this._fieldDefinitionsSubject.asObservable()}ngAfterViewInit(){this._fieldDefinitionsSubject.next(this._fieldDefinitions.toArray().map(d=>this._transformSubjectField(d))),this._fieldDefinitions.changes.subscribe(d=>{this._fieldDefinitionsSubject.next(d.map(n=>this._transformSubjectField(n)))})}getDataSource(){return this._subject.getDataSource()}getSubjectFields(){return this._fieldDefinitions.toArray().map(d=>this._transformSubjectField(d))}getFieldVariants(d){return this.getDataSource().dataProvider.getFieldOptions(d)}getDefaultFields(){return this.getSubjectFields()?.filter(d=>d.defaultSelected).map(d=>d.name)}getState(){return this._subject.getTableState()}getSubject(){return this._subject}_transformSubjectField(d){return{key:d.key,name:d.name,label:d.label,filterType:d.filterType,filterable:d.smartFilterBarFilterable,dataType:d.dataType,required:d.required,customFilterType:d.customFilterType,defaultSelected:d.defaultSelected,hasOptions:d.hasOptions,conditionStrategy:d.conditionStrategy}}}return T.\u0275fac=function(d){return new(d||T)(f.Y36(r.iA))},T.\u0275dir=f.lG2({type:T,selectors:[["","fdpSmartFilterBarSubject",""],["","fdp-smart-filter-bar-subject",""]],contentQueries:function(d,n,O){if(1&d&&f.Suo(O,_.m,4),2&d){let l;f.iGM(l=f.CRH())&&(n._fieldDefinitions=l)}},exportAs:["fdp-smart-filter-bar-subject"]}),T})()},82737:(x,S,t)=>{t.d(S,{G:()=>r});var c=t(94650);let r=(()=>{class _{constructor(b){this.templateRef=b}}return _.\u0275fac=function(b){return new(b||_)(c.Y36(c.Rgc))},_.\u0275dir=c.lG2({type:_,selectors:[["","fdpSmartFilterBarToolbarItem",""]]}),_})()},39671:(x,S,t)=>{t.d(S,{T:()=>r});var c=t(32348);function r(_){return Array.isArray(_)&&(_=_.map(f=>r(f))),(0,c.UL)(_)?_.value:_}},90864:(x,S,t)=>{t.d(S,{gR:()=>W.g,TR:()=>j,jL:()=>$.j,QX:()=>P.Q,ij:()=>Y.i});var c=t(36895),r=t(90433),_=t(43018),f=t(30825),b=t(82848),T=t(21553),y=t(35243),d=t(78793),n=t(80848),O=t(64713),l=t(49218),e=t(94448),g=t(47041),v=t(89441),C=t(57230),P=t(18402),L=t(60676),K=t(94650);let j=(()=>{class U{}return U.\u0275fac=function(H){return new(H||U)},U.\u0275mod=K.oAB({type:U}),U.\u0275inj=K.cJS({providers:[P.Q,b.bN],imports:[c.ez,r.u5,r.UX,b.AY,L.LU,f.hJ,_.UU,T.V_,y.RO,b.tD,n.QX,d.UH,O.K2,l.Su,e.pV,g.nD,v.ky,b.hY,b.aL,b.Mk,C.hd]}),U})();t(76960);var W=t(79334),Y=(t(38831),t(4235),t(60065),t(92205),t(70295),t(65638)),$=t(66628)},65638:(x,S,t)=>{t.d(S,{i:()=>f});var c=t(94650),r=t(66628),_=t(76960);const f={provide:r.j,useExisting:(0,c.Gpc)(()=>_.B)}},66628:(x,S,t)=>{t.d(S,{j:()=>r});var c=t(94650);let r=(()=>{class _{constructor(){this.name="platformSmartFilterBar",this.presetChanged=new c.vpe}}return _.\u0275fac=function(b){return new(b||_)},_.\u0275dir=c.lG2({type:_,inputs:{name:"name"},outputs:{presetChanged:"presetChanged"}}),_})()},76960:(x,S,t)=>{t.d(S,{B:()=>B});var c=t(49671),r=t(94650),_=t(90433),f=t(19182),b=t(50727),T=t(61135),y=t(39300),d=t(78372),n=t(83905),O=t(95698),l=t(82722),e=t(54004),g=t(49218),v=t(89441),C=t(82848),P=t(32348),L=t(60065),j=(t(70295),t(82737)),V=t(18402);const W="smart-filter-condition-renderer";var G=t(66628),Q=t(38831),J=t(39671),k=t(21281),N=t(36895),Y=t(16650),$=t(73788),U=t(70363),z=t(46768),H=t(48223),w=t(95209),E=t(23988),Z=t(21565);function s(o,h){}function u(o,h){if(1&o&&(r.ynx(0),r.YNc(1,s,0,0,"ng-template",10),r._UZ(2,"fd-toolbar-separator"),r.BQk()),2&o){const i=h.$implicit;r.xp6(1),r.Q6J("ngTemplateOutlet",i)}}function p(o,h){if(1&o&&(r.ynx(0),r.YNc(1,u,3,1,"ng-container",9),r.BQk()),2&o){const i=r.oxw();r.xp6(1),r.Q6J("ngForOf",i._toolbarItems)}}function R(o,h){if(1&o){const i=r.EpF();r.TgZ(0,"fdp-button",11),r.NdJ("click",function(){r.CHM(i);const m=r.oxw();return r.KtG(m.submitForm())}),r.ALo(1,"fdTranslate"),r.qZA()}if(2&o){const i=r.oxw();r.Q6J("disabled",i._loading)("label",r.lcZ(1,2,"platformSmartFilterBar.submitButtonLabel"))}}const q=function(o){return{filtersCount:o}},it={responsivePadding:!0,verticalPadding:!0,minWidth:"30rem",bodyMinHeight:"calc(50vh - 88px)"},D={provide:G.j,useExisting:(0,r.Gpc)(()=>B)};let B=(()=>{class o extends G.j{set subject(i){this._setSubject(i)}get subject(){return this._subject}set transparent(i){this._transparent=(0,k.Ig)(i)}get transparent(){return this._transparent}get _loading(){return!this._subject?.getDataSource()||this._subject.getDataSource().isDataLoading}constructor(i,a,m,F,I,M){super(),this._dialogService=i,this._cdr=a,this._smartFilterBarService=m,this._fgService=F,this._injector=I,this._destroy$=M,this.filtersColumnLayout="XL4-L3-M2-S1",this.liveUpdate=!1,this.smartFiltersChanged=new r.vpe,this.smartFiltersApplied=new r.vpe,this.searchInputChanged=new r.vpe,this.filterBy=[],this._toolbarItems=[],this._selectedFilters=[],this._showFilterBar=!0,this._subscriptions=new b.w0,this._subjectSubscriptions=new b.w0,this._transparent=!1,this._formGeneratorReady=new T.X(!1),this._ignorePresetChange=!1,this._fgService.addComponent(Q.v,[W])}ngAfterViewInit(){this._toolbarItems=this._toolbarItemRefs.toArray().map(i=>i.templateRef),this._toolbarItemRefs.changes.subscribe(()=>{this._toolbarItems=this._toolbarItemRefs.toArray().map(i=>i.templateRef)})}ngOnDestroy(){this._subscriptions.unsubscribe(),this._unsubscribeFromSubject()}getDisplayValue(i,a){var m=this;return(0,c.Z)(function*(){return m._smartFilterBarService.getDisplayValue(i,a)})()}showFilteringSettings(){const a={fields:this._getSubjectDefinitions(),filterBy:this.filterBy,selectedFilters:this._selectedFilters,visibilityCategories:this.filtersVisibilityCategoryLabels};this._dialogService.open(L.l,{...it,disablePaddings:!0,width:"50rem",data:a},this._injector).afterClosed.pipe((0,O.q)(1)).subscribe(F=>{this._setSelectedFilters(F)})}_onSearchInputChange(i){this.search=i,this.searchInputChanged.emit(i)}_cancelSearch(){this.search=void 0,this.liveUpdate&&this.submitForm()}submitForm(){this._formGenerator.submit()}setPreset(i){var a=this;return(0,c.Z)(function*(){a._ignorePresetChange=!0,i.filterBy=i.filterBy||[],a.filterBy=i.filterBy,a.search=i.search,a._formGeneratorReady.pipe((0,y.h)(m=>m)).subscribe((0,c.Z)(function*(){a._fgService.resetForm(a._formGenerator.form);for(const F of a.filterBy){const I=a._fgService.getFormControl(a._formGenerator.form,F.field);if(!I)continue;const M=I.formItem,A=a._smartFilterBarService.transformCollectionFilter(F),X=yield a._smartFilterBarService.getConditionFieldSelectedVariants(M,A);I?.setValue(X)}a._setSelectedFilters(a.filterBy.map(F=>F.field)),a.subject.getDataSource().dataProvider.setFilters(a.filterBy,a.search),a.subject.getSubject().fetch()}))})()}getCurrentPreset(){return{search:this.search,filterBy:this.filterBy}}_onFormSubmitted(i){const a=this._generateCollectionFilterGroups(i);this._applyFiltering(a)}_onFormCreated(){var i=this;this.subject&&this._setSelectedFilters([...this.subject.getDefaultFields(),...this._selectedFilters]),this._formGenerator.form.valueChanges.pipe((0,d.b)(50),(0,l.R)(this._destroy$)).subscribe((0,c.Z)(function*(){const a=yield i.getFormattedConditions();i.smartFiltersChanged.emit({filterBy:a,search:i.search,subject:i.subject}),i.liveUpdate&&i._applyFiltering(a)})),this._formGeneratorReady.next(!0)}_toggleFilterBar(){this._showFilterBar=!this._showFilterBar,this._cdr.markForCheck()}getFormattedConditions(){var i=this;return(0,c.Z)(function*(){const a=yield i._fgService.getFormValue(i._formGenerator.form);return i._generateCollectionFilterGroups(a)})()}_generateCollectionFilterGroups(i){const a=[],m=this._getSubjectDefinitions();return Object.entries(i).filter(([,F])=>!!F).forEach(([F,I])=>{const M=m.find(X=>X.name===F),A={filters:[],strategy:M.conditionStrategy,field:M.key};I.forEach(X=>{A.filters.push({strategy:X.operator,field:M.key,value:X.value,value2:X.value2,type:M.dataType})}),a.push(A)}),a.filter(F=>F.filters?.length>0)}_setSubject(i){i&&(this._subject=i,this.unsubscribeFromSubject(),this._listenToSubjectColumns())}unsubscribeFromSubject(){}_listenToSubjectColumns(){var i=this;this._subjectSubscriptions.add(this._subject.fieldsStream.subscribe(function(){var a=(0,c.Z)(function*(m){setTimeout((0,c.Z)(function*(){yield i._generateForm(m.filter(F=>F.filterable))}))});return function(m){return a.apply(this,arguments)}}()))}_generateForm(i){var a=this;return(0,c.Z)(function*(){const m=[],F=function et(o){return Math.max(...o.split("-").map(h=>{const i=h.match(/\d+/);return i?parseInt(i[0],10):1}))}(a.filtersColumnLayout??"");let I=1;0!==i.length&&(i.forEach(M=>{let A=a._generateBaseFieldItem(M);switch(M.required&&a._selectedFilters.push(M.name),M.filterType){case v.vA.SINGLE:case v.vA.CATEGORY:A.guiOptions.additionalData.type="select",A.guiOptions.inline=!1;break;case v.vA.MULTI:A.guiOptions.additionalData.type="multi-input";break;case v.vA.CUSTOM:A=a._generateCustomFilterFieldItem(M,A);break;default:A=a._generateInputFieldItem(M,A)}A.guiOptions.column=I,I+=1,I>F&&(I=1),m.push(A)}),a._formItems=m,a._cdr.detectChanges())})()}_generateCustomFilterFieldItem(i,a){return i.customFilterType&&(a.guiOptions.additionalData.type=i.customFilterType,a.guiOptions.additionalData=Object.assign(a.guiOptions.additionalData,this._smartFilterBarService.getCustomFilterConfiguration(i.customFilterType)),a.type=a.guiOptions.additionalData.rendererComponent?`${a.guiOptions.additionalData.type}-renderer`:a.type,a.transformer=a.guiOptions.additionalData.valueTransformer),a}_generateInputFieldItem(i,a){switch(i.dataType){case v.g.DATE:a.guiOptions.additionalData.type="datepicker";break;case v.g.NUMBER:a.guiOptions.additionalData.controlType="number";break;default:a.guiOptions.additionalData.controlType="text"}return a}_generateBaseFieldItem(i){return{name:i.name,message:i.label,required:i.required,type:W,placeholder:" ",validators:i.required?[_.kI.required]:[],choices:i.hasOptions?this._getFilterDefaultOptions(i.key,i.filterType):void 0,transformer:a=>(0,J.T)(a),guiOptions:{additionalData:{type:"input",dataType:i.dataType,filterType:i.filterType,controlType:"text",choices:i.hasOptions?this._getFilterAvailableOptions(i.key):void 0}},when:()=>this._selectedFilters.includes(i.name)}}_getFilterAvailableOptions(i){return()=>this._getFieldVariants(i)}_getFilterDefaultOptions(i,a){var m=this;return(0,c.Z)(function*(){const F=yield(0,n.z)(m._getFieldVariants(i).pipe((0,O.q)(1))),I=[];for(const M of F){const A={value:M.value,operator:"equalTo"};A.displayValue=yield m.getDisplayValue(A,a),I.push(A)}return I})}_getFieldVariants(i){return this.subject.getFieldVariants(i).pipe((0,O.q)(1),(0,e.U)(a=>a.filter((m,F)=>a.findIndex(I=>I.value===m.value)===F)))}_getSubjectDefinitions(){return this.subject?.getSubjectFields()||[]}_applyFiltering(i){const a=this.subject.getDataSource();this.filterBy=i,a.dataProvider.setFilters(i,this.search),this.subject.getSubject().fetch();const m={search:this.search,filterBy:this.filterBy};this.smartFiltersApplied.emit({...m,subject:this._subject}),this._ignorePresetChange||this.presetChanged.emit(m),this._ignorePresetChange=!1}_unsubscribeFromSubject(){this._subjectSubscriptions.unsubscribe(),this._subjectSubscriptions=new b.w0}_setSelectedFilters(i){this._selectedFilters=i.filter((a,m)=>i.indexOf(a)===m),this._formGenerator.refreshStepsVisibility()}}return o.\u0275fac=function(i){return new(i||o)(r.Y36(g.xA),r.Y36(r.sBO),r.Y36(V.Q),r.Y36(C.bN),r.Y36(r.zs3),r.Y36(f._ZF))},o.\u0275cmp=r.Xpm({type:o,selectors:[["fdp-smart-filter-bar"]],contentQueries:function(i,a,m){if(1&i&&r.Suo(m,j.G,4),2&i){let F;r.iGM(F=r.CRH())&&(a._toolbarItemRefs=F)}},viewQuery:function(i,a){if(1&i&&r.Gf(C.CI,5),2&i){let m;r.iGM(m=r.CRH())&&(a._formGenerator=m.first)}},hostAttrs:[1,"fdp-smart-filter-bar"],hostVars:2,hostBindings:function(i,a){2&i&&r.ekj("fdp-smart-filter-bar--transparent",a.transparent)},inputs:{subject:"subject",showFiltersLabel:"showFiltersLabel",hideFiltersLabel:"hideFiltersLabel",filtersLabel:"filtersLabel",transparent:"transparent",defineStrategyLabels:"defineStrategyLabels",filtersVisibilityCategoryLabels:"filtersVisibilityCategoryLabels",filtersColumnLayout:"filtersColumnLayout",liveUpdate:"liveUpdate"},outputs:{smartFiltersChanged:"smartFiltersChanged",smartFiltersApplied:"smartFiltersApplied",searchInputChanged:"searchInputChanged"},features:[r._Bn([D,f._ZF,{provide:P.ID,useExisting:o}]),r.qOj],decls:14,vars:24,consts:[["fdType","transparent",3,"hasTitle"],[4,"ngIf"],[3,"disabled","disableRefresh","placeholder","inputChange","searchSubmit","cancelSearch"],["buttonType","emphasized","fd-toolbar-item","",3,"disabled","label","click",4,"ngIf"],["fd-toolbar-item","","glyph","synchronize",3,"disabled","click"],["fd-toolbar-item","",3,"label","disabled","click"],["buttonType","transparent","fd-toolbar-item","",3,"label","disabled","click"],[1,"fdp-smart-filter-bar__filters",3,"hidden"],[3,"noAdditionalContent","formItems","columnLayout","formCreated","formSubmitted"],[4,"ngFor","ngForOf"],[3,"ngTemplateOutlet"],["buttonType","emphasized","fd-toolbar-item","",3,"disabled","label","click"]],template:function(i,a){1&i&&(r.TgZ(0,"div")(1,"fd-toolbar",0),r.YNc(2,p,2,1,"ng-container",1),r.TgZ(3,"fdp-search-field",2),r.NdJ("inputChange",function(F){return a._onSearchInputChange(F)})("searchSubmit",function(){return a.submitForm()})("cancelSearch",function(){return a._cancelSearch()}),r.ALo(4,"fdTranslate"),r.qZA(),r._UZ(5,"fd-toolbar-spacer"),r.YNc(6,R,2,4,"fdp-button",3),r.TgZ(7,"fdp-button",4),r.NdJ("click",function(){return a.submitForm()}),r.qZA(),r.TgZ(8,"fdp-button",5),r.NdJ("click",function(){return a.showFilteringSettings()}),r.ALo(9,"fdTranslate"),r.qZA(),r.TgZ(10,"fdp-button",6),r.NdJ("click",function(){return a._toggleFilterBar()}),r.ALo(11,"fdTranslate"),r.qZA()()(),r.TgZ(12,"div",7)(13,"fdp-form-generator",8),r.NdJ("formCreated",function(){return a._onFormCreated()})("formSubmitted",function(F){return a._onFormSubmitted(F)}),r.qZA()()),2&i&&(r.xp6(1),r.Q6J("hasTitle",!0),r.xp6(1),r.Q6J("ngIf",a._toolbarItems),r.xp6(1),r.Q6J("disabled",a._loading)("disableRefresh",!0)("placeholder",r.lcZ(4,15,"platformSmartFilterBar.searchPlaceholder")),r.xp6(3),r.Q6J("ngIf",!a.liveUpdate),r.xp6(1),r.Q6J("disabled",a._loading),r.xp6(1),r.Q6J("label",a.filtersLabel?a.filtersLabel+" ("+a._selectedFilters.length+")":r.xi3(9,17,"platformSmartFilterBar.filtersButtonLabel",r.VKq(22,q,a._selectedFilters.length)))("disabled",a._loading),r.xp6(2),r.Q6J("label",r.lcZ(11,20,a._showFilterBar?"platformSmartFilterBar.hideFiltersButtonLabel":"platformSmartFilterBar.showFiltersButtonLabel"))("disabled",a._loading),r.xp6(2),r.Q6J("hidden",!a._showFilterBar),r.xp6(1),r.Q6J("noAdditionalContent",!0)("formItems",a._formItems)("columnLayout",a.filtersColumnLayout))},dependencies:[N.sg,N.O5,N.tP,Y.C,$.n,U.Q,z.v,H.F,w.r0,E.ri,Z.n],styles:[".fdp-smart-filter-bar{display:block;box-shadow:var(--sapContent_HeaderShadow);background-color:var(--sapObjectHeader_Background)}.fdp-smart-filter-bar--transparent{background-color:var(--sapToolbar_Background);box-shadow:none}.fdp-smart-filter-bar .fd-toolbar--title{height:3rem;min-height:3rem;border-bottom:none;padding:.5rem}@media (min-width: 600px){.fdp-smart-filter-bar .fd-toolbar--title{padding-left:2rem;padding-right:2rem}}.fdp-smart-filter-bar .fd-toolbar fdp-search-field{min-width:15.5rem}.fdp-smart-filter-bar .fdp-smart-filter-bar__filters{padding-left:.5rem;padding-right:.5rem}@media (min-width: 600px){.fdp-smart-filter-bar .fdp-smart-filter-bar__filters{padding-left:2rem;padding-right:2rem}}.fdp-smart-filter-bar .fd-container.fd-form-layout-grid-container{padding:0}.fdp-smart-filter-bar .fd-container.fd-form-layout-grid-container .fd-row .fd-form-group{padding-left:.25rem!important;padding-right:.25rem!important}.fdp-smart-filter-bar__conditions-dialog .fdp-smart-filter-bar__actions-column{min-width:auto;flex:0 0 auto}.fdp-smart-filter-bar__conditions-dialog .fd-popover-custom{display:block}.fdp-smart-filter-bar__conditions-dialog .fd-dialog__body{padding:0 .5rem;background-color:var(--sapBackgroundColor, #f7f7f7)}.fdp-smart-filter-bar__conditions-dialog .fd-container.fd-form-layout-grid-container,.fdp-smart-filter-bar__conditions-dialog .fd-container.fd-form-layout-grid-container .fd-row .fd-form-group{padding:0!important}\n"],encapsulation:2,changeDetection:0}),o})()},18402:(x,S,t)=>{t.d(S,{Q:()=>d});var c=t(49671),r=t(95790),_=t(82848),f=t(89441),b=t(32348),T=t(19182),y=t(94650);let d=(()=>{class n{constructor(l){this._fgService=l,this._customFilterConditions=new Map}addCustomFilter(l){if(!l.conditionComponent&&l.rendererComponent&&(l.conditionComponent=l.rendererComponent),!l.conditionComponent)return!1;const e=this._fgService.addComponent(l.conditionComponent,l.types);return e&&this._customFilterConditions.set(l.conditionComponent,l),e&&l.rendererComponent&&this._fgService.addComponent(l.rendererComponent,l.types.map(g=>`${g}-renderer`)),e}getCustomFilterConfiguration(l){const e=this._fgService.getComponentDefinitionByType(l);if(e)return this._customFilterConditions.get(e.component)}getApplicableFilterConditions(l,e=f.g.STRING){const g=this._fgService.getComponentDefinitionByType(l),v=(0,f.b3)(e);return g&&this._customFilterConditions.get(g.component)?.filterStrategies||v}getDisplayValue(l,e){var g=this;return(0,c.Z)(function*(){const v=g.getCustomFilterConfiguration(e);if(v?.valueRenderer){const L=v?.valueRenderer(l),K=(0,T.M7n)(L);let j;return yield K.createSubscription(L,V=>{j=V}),j}const C=g._normalizeValue(l.value),P=g._normalizeValue(l.value2);switch(l.operator){case"equalTo":return`=${C}`;case"contains":return`*${C}*`;case"between":return`${C}...${P}`;case"beginsWith":return`${C}*`;case"endsWith":return`*${C}`;case"greaterThan":case"after":return`>${C}`;case"greaterThanOrEqualTo":case"onOrAfter":return`>=${C}`;case"lessThan":case"before":return`<${C}`;case"lessThanOrEqualTo":case"beforeOrOn":return`<=${C}`;default:return`${C}`}})()}normalizeConditions(l,e){var g=this;return(0,c.Z)(function*(){const v=[];for(const C of e){const P=Object.assign({},C);P.displayValue=yield g.getDisplayValue(P,l.guiOptions?.additionalData.type),v.push(P)}return v})()}getConditionFieldSelectedVariants(l,e){var g=this;return(0,c.Z)(function*(){return(yield g.normalizeConditions(l,e)).map(v=>(0,b.UL)(v)?v:{label:v.displayValue,value:v})})()}transformCollectionFilter(l){return l.filters.map(e=>({operator:e.strategy,value:e.value,value2:e.value2}))}_normalizeValue(l){return Array.isArray(l)?l.map(e=>this._normalizeValue(e)).join(", "):(0,b.UL)(l)?l.label:l instanceof r._U?l.toDateString():l}}return n.\u0275fac=function(l){return new(l||n)(y.LFG(_.bN))},n.\u0275prov=y.Yz7({token:n,factory:n.\u0275fac}),n})()}}]);