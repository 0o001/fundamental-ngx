"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2351],{20198:(K,T,t)=>{t.d(T,{g:()=>c});var m=t(49671),i=t(27498),g=t(22640),d=t(48180),_=t(38438),D=t(9456),b=t(65879);let c=(()=>{class a extends g.Ze{constructor(l,e,p){var F;super(),F=this,this._dialogService=l,this._smartFilterBarService=e,this._injector=p,this.openConditionsDialog=()=>{const y=this.getField().value;var R;this._dialogService.open(D.e,{data:{header:this.formItem.message,dataType:this.formItem.guiOptions?.additionalData.dataType,filterType:this.formItem.guiOptions?.additionalData.type,conditions:y||[],choices:this.formItem.guiOptions?.additionalData.choices,controlType:this.formItem.guiOptions?.additionalData.controlType},width:"67.5rem",minHeight:"30%"},this._injector).afterClosed.pipe((0,d.q)(1)).subscribe({next:(R=(0,m.Z)(function*(x){const j=F.getField(),W=yield F._smartFilterBarService.getConditionFieldSelectedVariants(F.formItem,x);j.setValue(W)}),function(j){return R.apply(this,arguments)}),error:R=>{}})}}getField(){return this.form.get(`${this.formGroupName}.${this.name}`)}}return a.\u0275fac=function(l){return new(l||a)(b.Y36(i.xA),b.Y36(_.Q),b.Y36(b.zs3))},a.\u0275dir=b.lG2({type:a,features:[b.qOj]}),a})()},72798:(K,T,t)=>{t.d(T,{v:()=>a});var m=t(27498),i=t(38438),g=t(20198),d=t(65879),_=t(60095),D=t(14565),b=t(57850);const c=function(){return[]};let a=(()=>{class E extends g.g{constructor(e,p,F){super(e,p,F)}}return E.\u0275fac=function(e){return new(e||E)(d.Y36(m.xA),d.Y36(i.Q),d.Y36(d.zs3))},E.\u0275cmp=d.Xpm({type:E,selectors:[["fdp-smart-filter-bar-condition-field"]],features:[d.qOj],decls:4,vars:13,consts:[[3,"formGroup"],[3,"formGroupName"],["displayKey","displayValue",3,"id","addOnButtonClickFn","autofocus","dataSource","formControlName","name","placeholder","glyphAriaLabel"]],template:function(e,p){1&e&&(d.ynx(0,0)(1,1),d._UZ(2,"fdp-multi-input",2),d.ALo(3,"fdTranslate"),d.BQk()()),2&e&&(d.Q6J("formGroup",p.form),d.xp6(1),d.Q6J("formGroupName",p.formGroupName),d.xp6(1),d.Q6J("id",p.id)("addOnButtonClickFn",p.openConditionsDialog)("autofocus",!0)("dataSource",p.formItem.choices||d.DdM(12,c))("formControlName",p.name)("name",p.name)("placeholder",p.formItem.placeholder||p.formItem.message)("glyphAriaLabel",d.lcZ(3,10,"platformSmartFilterBar.manageFieldConditions")))},dependencies:[_.JJ,_.JL,_.sg,_.u,_.x0,D.O,b.n],encapsulation:2}),E})()},9456:(K,T,t)=>{t.d(T,{e:()=>w});var m=t(49671),i=t(70014),g=t(27498),d=t(22640),_=t(38438),D=t(37387),b=t(27411),c=t(24036),a=t(65879),E=t(96814),l=t(60095),e=t(29466),p=t(95621),F=t(15849),y=t(89003),P=t(1144),G=t(74164),R=t(15243),x=t(80401),j=t(51683),W=t(93688),z=t(44321),H=t(17054),X=t(18765),V=t(71900),k=t(88320),Q=t(57850);function J(O,U){if(1&O&&(a.TgZ(0,"div",6)(1,"fd-bar-element")(2,"h4",7),a._uU(3),a.qZA()()()),2&O){const s=a.oxw();a.xp6(2),a.Q6J("headerSize",4),a.xp6(1),a.Oqu(s.config.header)}}function Z(O,U){if(1&O){const s=a.EpF();a.TgZ(0,"fd-layout-grid")(1,"div",9)(2,"div",10)(3,"fdp-form-generator",13),a.NdJ("formSubmitted",function(u){a.CHM(s);const L=a.oxw(2);return a.KtG(L._onFormSubmitted(u))}),a.qZA()(),a.TgZ(4,"div",14)(5,"fdp-button",15),a.NdJ("click",function(){const L=a.CHM(s).index,q=a.oxw(2);return a.KtG(q.removeCondition(L))}),a.ALo(6,"fdTranslate"),a.qZA()()()()}if(2&O){const s=U.$implicit;a.xp6(3),a.Q6J("formItems",s)("unifiedLayout",!1)("noAdditionalContent",!0),a.xp6(2),a.Q6J("title",a.lcZ(6,4,"platformSmartFilterBar.defineConditionsRemoveConditionButtonTitle"))}}function N(O,U){if(1&O){const s=a.EpF();a.TgZ(0,"form"),a.YNc(1,Z,7,6,"fd-layout-grid",8),a.TgZ(2,"fd-layout-grid")(3,"div",9)(4,"div",10),a._uU(5,"\xa0"),a.qZA(),a.TgZ(6,"div",11)(7,"fdp-button",12),a.NdJ("click",function(){a.CHM(s);const u=a.oxw();return a.KtG(u.addCondition())}),a.ALo(8,"fdTranslate"),a.qZA()()()()()}if(2&O){const s=a.oxw();a.xp6(1),a.Q6J("ngForOf",s._formItems),a.xp6(6),a.Q6J("label",a.lcZ(8,2,"platformSmartFilterBar.defineConditionsAddConditionButtonLabel"))}}function Y(O,U){1&O&&(a.TgZ(0,"div",16),a._UZ(1,"fd-busy-indicator",17),a.qZA()),2&O&&(a.xp6(1),a.Q6J("loading",!0))}let w=(()=>{class O{constructor(s,h,u,L){this._dialogRef=s,this._language$=h,this._cdr=u,this._smartFilterBarService=L,this.conditionOperatorOptions=[],this._formItems=[],this.loaded=!1,this._conditionLabelKeys={contains:"filterConditionContains",equalTo:"filterConditionEqualTo",between:"filterConditionBetween",beginsWith:"filterConditionBeginsWith",endsWith:"filterConditionEndsWith",lessThan:"filterConditionLessThan",lessThanOrEqualTo:"filterConditionLessThanOrEqualTo",greaterThan:"filterConditionGreaterThan",greaterThanOrEqualTo:"filterConditionGreaterThanOrEqualTo",after:"filterConditionAfter",onOrAfter:"filterConditionOnOrAfter",before:"filterConditionBefore",beforeOrOn:"filterConditionBeforeOrOn"},this._submittedForms=[],this._translationResolver=new b.en,this._init()}_init(){var s=this;return(0,m.Z)(function*(){s.config=s._dialogRef.data,s._language=yield(0,c.z)(s._language$),s.conditionOperatorOptions=yield s._getApplicableConditionOperators(),s._addExistingConditions((0,D.T)(s.config.conditions)),0===s.config.conditions.length&&s.addCondition(),s.loaded=!0,s._cdr.markForCheck()})()}addCondition(){this._formItems.push(this._generateFormGeneratorItems())}removeCondition(s){this._formItems.splice(s,1),0===this._formItems.length&&this.addCondition()}applyConditions(){this._cdr.detectChanges(),this._submittedForms=[],this.formGenerators.toArray().forEach(s=>s.submit())}_onFormSubmitted(s){if(this._submittedForms.push(s),this._submittedForms.length!==this.formGenerators.length)return;const h=this._submittedForms.map(u=>(u.value=void 0!==u.value1?u.value1:u.value,u));this._dialogRef.close(h.filter(u=>null!=u.value))}_cancel(){this._dialogRef.dismiss()}_getApplicableConditionOperators(){const s=this._smartFilterBarService.getApplicableFilterConditions(this.config.filterType,this.config.dataType),h={...this._conditionLabelKeys};for(const u in h)Object.prototype.hasOwnProperty.call(h,u)&&(h[u]=this._translationResolver.resolve(this._language,"platformSmartFilterBar."+h[u]));return s.map(u=>({label:h[u],value:u}))}_addExistingConditions(s){s.forEach(h=>{const u=this._generateFormGeneratorItems(h);this._formItems.push(u)})}_generateFormGeneratorItems(s){return[{name:"operator",message:"operator",default:s?this.conditionOperatorOptions.find(h=>h.value===s.operator)?.value:this.conditionOperatorOptions[0].value,type:"select",choices:this.conditionOperatorOptions,required:!0,guiOptions:{inline:!1,column:1,noLabelLayout:!0}},{name:"value",message:"value",default:s?.value,type:this.config.filterType,choices:this.config.choices,placeholder:this._translationResolver.resolve(this._language,"platformSmartFilterBar.filterConditionValuePlaceholder"),controlType:this.config.controlType,when:h=>h.operator!==i.dh.BETWEEN,onchange:(h,u,L)=>{L.parent?.get("value1")?.setValue(h,{emitEvent:!1})},guiOptions:{inline:!1,column:2,noLabelLayout:!0}},{name:"value1",message:"value1",default:s?.value,type:this.config.filterType,choices:this.config.choices,placeholder:this._translationResolver.resolve(this._language,"platformSmartFilterBar.filterConditionValueFromPlaceholder"),controlType:this.config.controlType,when:h=>h.operator===i.dh.BETWEEN,onchange:(h,u,L)=>{L.parent?.get("value")?.setValue(h,{emitEvent:!1})},guiOptions:{inline:!1,column:2,noLabelLayout:!0}},{name:"value2",message:"value2",default:s?.value2,type:this.config.filterType,choices:this.config.choices,placeholder:this._translationResolver.resolve(this._language,"platformSmartFilterBar.filterConditionValueToPlaceholder"),required:!0,controlType:this.config.controlType,when:h=>h?.operator===i.dh.BETWEEN,guiOptions:{inline:!1,column:3,noLabelLayout:!0}}]}}return O.\u0275fac=function(s){return new(s||O)(a.Y36(g.zj),a.Y36(b.iC),a.Y36(a.sBO),a.Y36(_.Q))},O.\u0275cmp=a.Xpm({type:O,selectors:[["fdp-smart-filter-bar-conditions-dialog"]],viewQuery:function(s,h){if(1&s&&a.Gf(d.CI,5),2&s){let u;a.iGM(u=a.CRH())&&(h.formGenerators=u)}},decls:12,vars:8,consts:[[1,"fdp-smart-filter-bar__conditions-dialog"],["fdkTemplate","header"],[4,"ngIf","ngIfElse"],["fdType","emphasized",3,"label","click"],["fdType","transparent",3,"label","click"],["loadingTpl",""],["fd-bar-left",""],["fd-title","",3,"headerSize"],[4,"ngFor","ngForOf"],["fdLayoutGridRow",""],["colGrow","","fdLayoutGridCol",""],["fdLayoutGridCol","",1,"fdp-smart-filter-bar__actions-column"],[3,"label","click"],["columnLayout","XL3-L3-M3-S3",3,"formItems","unifiedLayout","noAdditionalContent","formSubmitted"],["colGrow","","fdLayoutGridCol","",1,"fdp-smart-filter-bar__actions-column"],["buttonType","transparent","glyph","decline","type","button",3,"title","click"],[2,"text-align","center","margin","1rem"],[3,"loading"]],template:function(s,h){if(1&s&&(a.TgZ(0,"fd-dialog",0)(1,"fd-dialog-header"),a.YNc(2,J,4,2,"ng-template",1),a.qZA(),a.TgZ(3,"fd-dialog-body"),a.YNc(4,N,9,4,"form",2),a.qZA(),a.TgZ(5,"fd-dialog-footer")(6,"fd-button-bar",3),a.NdJ("click",function(){return h.applyConditions()}),a.ALo(7,"fdTranslate"),a.qZA(),a.TgZ(8,"fd-button-bar",4),a.NdJ("click",function(){return h._cancel()}),a.ALo(9,"fdTranslate"),a.qZA()()(),a.YNc(10,Y,2,1,"ng-template",null,5,a.W1O)),2&s){const u=a.MAs(11);a.xp6(4),a.Q6J("ngIf",h.loaded)("ngIfElse",u),a.xp6(2),a.Q6J("label",a.lcZ(7,4,"platformSmartFilterBar.defineConditionsSubmitButtonLabel")),a.xp6(2),a.Q6J("label",a.lcZ(9,6,"platformSmartFilterBar.defineConditionsCancelButton"))}},dependencies:[E.sg,E.O5,l._Y,l.JL,l.F,e.C,p.r0,F.B,y.a,P.H,G.g,R.A,x.b,j.J,W.N,z.r,H.S,X.q,V.q,k.I,Q.n],encapsulation:2,changeDetection:0}),O})()},83108:(K,T,t)=>{t.d(T,{l:()=>et});var m=t(49671),i=t(78645),g=t(65619),d=t(16321),_=t(24036),D=t(43093),b=t(59773),c=t(27498),a=t(70014);class E extends a.aF{constructor(S){super(S)}filter(S){let o;switch(S){case"visible":o=this._getVisibleItems();break;case"active":o=this._getActiveItems();break;case"visibleAndActive":o=this._getVisibleAndActiveItems();break;case"mandatory":o=this._getMandatoryItems();break;default:o=this._getAllItems()}this.items$.next(o)}_getAllItems(){return this.items}_getVisibleItems(){return this.items.filter(S=>S.visible)}_getActiveItems(){return this.items.filter(S=>S.active)}_getVisibleAndActiveItems(){return this.items.filter(S=>S.visible||S.active)}_getMandatoryItems(){return this.items.filter(S=>S.mandatory)}}var l=t(27411),e=t(65879),p=t(96814),F=t(12887),y=t(15849),P=t(89003),G=t(1144),R=t(74164),x=t(15243),j=t(80401),W=t(22379),z=t(51683),H=t(93688),X=t(44321),V=t(17054),k=t(29202),Q=t(57314),J=t(28139),Z=t(88463),N=t(95953),Y=t(38873),w=t(79025),O=t(87570),U=t(57850);const s=["table"];function h(B,S){1&B&&(e.TgZ(0,"div",6)(1,"fd-bar-element")(2,"h4",7),e._uU(3),e.ALo(4,"fdTranslate"),e.qZA()()(),e.TgZ(5,"div",8)(6,"fd-bar-element"),e._UZ(7,"fdp-table-reset-button"),e.qZA()()),2&B&&(e.xp6(2),e.Q6J("headerSize",4),e.xp6(1),e.hij(" ",e.lcZ(4,2,"platformSmartFilterBar.selectFiltersHeader")," "))}function u(B,S){1&B&&e._UZ(0,"fd-icon",17)}function L(B,S){if(1&B&&(e.TgZ(0,"fdp-table-cell"),e.YNc(1,u,1,0,"fd-icon",16),e.qZA()),2&B){const o=S.$implicit;e.xp6(1),e.Q6J("ngIf",o.active)}}function q(B,S){if(1&B){const o=e.EpF();e.TgZ(0,"fdp-table",9,10),e.NdJ("rowSelectionChange",function(r){e.CHM(o);const n=e.oxw();return e.KtG(n._onRowSelectionChange(r))}),e.TgZ(2,"fdp-table-toolbar",11),e.ALo(3,"fdTranslate"),e.TgZ(4,"fdp-table-toolbar-actions")(5,"fdp-select",12),e.NdJ("selectionChange",function(r){e.CHM(o);const n=e.oxw();return e.KtG(n._onFilterVisibilityChange(r))}),e.qZA()()(),e._UZ(6,"fdp-column",13),e.ALo(7,"fdTranslate"),e.TgZ(8,"fdp-column",14),e.ALo(9,"fdTranslate"),e.YNc(10,L,2,1,"fdp-table-cell",15),e.qZA()()}if(2&B){const o=e.oxw();e.Q6J("dataSource",o.source),e.xp6(2),e.Q6J("hideItemCount",!1)("title",e.lcZ(3,7,"platformSmartFilterBar.selectFiltersAvailableFiltersText")),e.xp6(3),e.Q6J("list",o._filterVisibilityOptions)("value",o._filterVisibilityOptions[0].value),e.xp6(1),e.Q6J("label",e.lcZ(7,9,"platformSmartFilterBar.selectFiltersFilterColumnLabel")),e.xp6(2),e.Q6J("label",e.lcZ(9,11,"platformSmartFilterBar.selectFiltersActiveColumnLabel"))}}function tt(B,S){1&B&&(e.TgZ(0,"div",18),e._UZ(1,"fd-busy-indicator",19),e.qZA()),2&B&&(e.xp6(1),e.Q6J("loading",!0))}let et=(()=>{class B{constructor(o,v,r){this._dialogRef=o,this._language$=v,this._cdr=r,this._filterVisibilityOptions=[],this.loaded=!1,this._categoryLabelKeys={all:"settingsCategoryAll",visible:"settingsCategoryVisible",active:"settingsCategoryActive",visibleAndActive:"settingsCategoryVisibleAndActive",mandatory:"settingsCategoryMandatory"},this._selectedFilters=[],this._onDestroy$=new i.x,this._isResetAvailableSubject$=new g.X(!1),this._translationResolver=new l.en,this.isResetAvailable$=this._isResetAvailableSubject$.asObservable(),this.setInitialTableState(),this._init()}ngAfterViewInit(){this.setSelectedFilters()}setSelectedFilters(){this._sourceSubscription?.unsubscribe(),this._sourceSubscription=this.source.open().pipe((0,D.Q)(d.z),(0,b.R)(this._onDestroy$)).subscribe(o=>{o.forEach((v,r)=>{v.visible&&this.table.toggleSelectableRow(r)})})}ngOnDestroy(){this._onDestroy$.next(),this._onDestroy$.complete()}reset(){this.setInitialTableState(),this.setSelectedFilters()}setInitialTableState(){this._availableFields=this._dialogRef.data.fields.filter(o=>o.filterable).map(o=>({label:o.label,active:!!this._dialogRef.data.filterBy.find(v=>v.field===o.name),mandatory:o.required,visible:this._dialogRef.data.selectedFilters.includes(o.name),key:o.key,name:o.name})),this.source=new a.Gl(new E(this._availableFields))}_cancel(){this._dialogRef.dismiss()}_confirm(){this._dialogRef.close(this._selectedFilters)}_onRowSelectionChange(o){this._selectedFilters=o.selection.map(v=>v.name),this._isResetAvailableSubject$.next(!0)}_onFilterVisibilityChange(o){this.table&&(this.source.dataProvider.filter(o.payload),this.source.fetch(this.table.getTableState()))}_init(){var o=this;return(0,m.Z)(function*(){yield o._transformVisibilityLabels(),o.loaded=!0,o._cdr.markForCheck()})()}_transformVisibilityLabels(){var o=this;return(0,m.Z)(function*(){const v=yield(0,_.z)(o._language$),r={...o._categoryLabelKeys};for(const n in r)Object.prototype.hasOwnProperty.call(r,n)&&(r[n]=o._translationResolver.resolve(v,"platformSmartFilterBar."+r[n]));for(const[n,f]of Object.entries(r))o._filterVisibilityOptions.push({label:f,value:n})})()}}return B.\u0275fac=function(o){return new(o||B)(e.Y36(c.zj),e.Y36(l.iC),e.Y36(e.sBO))},B.\u0275cmp=e.Xpm({type:B,selectors:[["fdp-smart-filter-bar-settings-dialog"]],viewQuery:function(o,v){if(1&o&&e.Gf(s,5),2&o){let r;e.iGM(r=e.CRH())&&(v.table=r.first)}},features:[e._Bn([{provide:a.uI,useExisting:B}])],decls:12,vars:8,consts:[[1,"fdp-table-p13-filtering-dialog"],["fdkTemplate","header"],["selectionMode","multiple",3,"dataSource","rowSelectionChange",4,"ngIf","ngIfElse"],["fdType","emphasized",3,"label","click"],["fdType","transparent",3,"label","click"],["loadingTpl",""],["fd-bar-left",""],["fd-title","",3,"headerSize"],["fd-bar-right",""],["selectionMode","multiple",3,"dataSource","rowSelectionChange"],["table",""],[3,"hideItemCount","title"],[3,"list","value","selectionChange"],["align","start","key","label","name","label",3,"label"],["align","center","key","active","name","active","width","150px",3,"label"],[4,"fdpCellDef"],["glyph","accept",4,"ngIf"],["glyph","accept"],[2,"text-align","center","margin","1rem"],[3,"loading"]],template:function(o,v){if(1&o&&(e.TgZ(0,"fd-dialog",0)(1,"fd-dialog-header"),e.YNc(2,h,8,4,"ng-template",1),e.qZA(),e.TgZ(3,"fd-dialog-body"),e.YNc(4,q,11,13,"fdp-table",2),e.qZA(),e.TgZ(5,"fd-dialog-footer")(6,"fd-button-bar",3),e.NdJ("click",function(){return v._confirm()}),e.ALo(7,"fdTranslate"),e.qZA(),e.TgZ(8,"fd-button-bar",4),e.NdJ("click",function(){return v._cancel()}),e.ALo(9,"fdTranslate"),e.qZA()()(),e.YNc(10,tt,2,1,"ng-template",null,5,e.W1O)),2&o){const r=e.MAs(11);e.xp6(4),e.Q6J("ngIf",v.loaded)("ngIfElse",r),e.xp6(2),e.Q6J("label",e.lcZ(7,4,"platformSmartFilterBar.selectFiltersSubmitButtonLabel")),e.xp6(2),e.Q6J("label",e.lcZ(9,6,"platformSmartFilterBar.selectFiltersCancelButton"))}},dependencies:[p.O5,F.o,y.B,P.a,G.H,R.g,x.A,j.b,W.M,z.J,H.N,X.r,V.S,k.a,Q.Z,J.U,Z.I,N.x,Y.w,w.tY,w.y_,O.H,U.n],encapsulation:2,changeDetection:0}),B})()},68073:(K,T,t)=>{t.d(T,{m:()=>d});var m=t(42495),g=(t(70014),t(65879));let d=(()=>{class _{constructor(){this.conditionStrategy="or",this._smartFilterBarFilterable=!0,this._required=!1,this._defaultSelected=!1,this._hasOptions=!1}set smartFilterBarFilterable(b){this._smartFilterBarFilterable=(0,m.Ig)(b)}get smartFilterBarFilterable(){return this._smartFilterBarFilterable}set required(b){this._required=(0,m.Ig)(b)}get required(){return this._required}set defaultSelected(b){this._defaultSelected=(0,m.Ig)(b)}get defaultSelected(){return this._defaultSelected}set hasOptions(b){this._hasOptions=(0,m.Ig)(b)}get hasOptions(){return this._hasOptions}}return _.\u0275fac=function(b){return new(b||_)},_.\u0275dir=g.lG2({type:_,selectors:[["","fdpSmartFilterBarFieldDefinition",""],["","fdp-smart-filter-bar-field-definition",""]],inputs:{key:"key",name:"name",label:"label",filterType:"filterType",dataType:"dataType",customFilterType:"customFilterType",conditionStrategy:"conditionStrategy",smartFilterBarFilterable:"smartFilterBarFilterable",required:"required",defaultSelected:"defaultSelected",hasOptions:"hasOptions"}}),_})()},63621:(K,T,t)=>{t.d(T,{O:()=>_});var m=t(65619),i=t(70014),g=t(68073),d=t(65879);let _=(()=>{class D{constructor(c){this._subject=c,this._fieldDefinitionsSubject=new m.X([]),this.fieldsStream=this._fieldDefinitionsSubject.asObservable()}ngAfterViewInit(){this._fieldDefinitionsSubject.next(this._fieldDefinitions.toArray().map(c=>this._transformSubjectField(c))),this._fieldDefinitions.changes.subscribe(c=>{this._fieldDefinitionsSubject.next(c.map(a=>this._transformSubjectField(a)))})}getDataSource(){return this._subject.getDataSource()}getSubjectFields(){return this._fieldDefinitions.toArray().map(c=>this._transformSubjectField(c))}getFieldVariants(c){return this.getDataSource().dataProvider.getFieldOptions(c)}getDefaultFields(){return this.getSubjectFields()?.filter(c=>c.defaultSelected).map(c=>c.name)}getState(){return this._subject.getTableState()}getSubject(){return this._subject}_transformSubjectField(c){return{key:c.key,name:c.name,label:c.label,filterType:c.filterType,filterable:c.smartFilterBarFilterable,dataType:c.dataType,required:c.required,customFilterType:c.customFilterType,defaultSelected:c.defaultSelected,hasOptions:c.hasOptions,conditionStrategy:c.conditionStrategy}}}return D.\u0275fac=function(c){return new(c||D)(d.Y36(i.iA))},D.\u0275dir=d.lG2({type:D,selectors:[["","fdpSmartFilterBarSubject",""],["","fdp-smart-filter-bar-subject",""]],contentQueries:function(c,a,E){if(1&c&&d.Suo(E,g.m,4),2&c){let l;d.iGM(l=d.CRH())&&(a._fieldDefinitions=l)}},exportAs:["fdp-smart-filter-bar-subject"]}),D})()},48448:(K,T,t)=>{t.d(T,{G:()=>i});var m=t(65879);let i=(()=>{class g{constructor(_){this.templateRef=_}}return g.\u0275fac=function(_){return new(_||g)(m.Y36(m.Rgc))},g.\u0275dir=m.lG2({type:g,selectors:[["","fdpSmartFilterBarToolbarItem",""]]}),g})()},37387:(K,T,t)=>{t.d(T,{T:()=>i});var m=t(83009);function i(g){return Array.isArray(g)&&(g=g.map(d=>i(d))),(0,m.UL)(g)?g.value:g}},42351:(K,T,t)=>{t.d(T,{gR:()=>W.g,TR:()=>x,QX:()=>P.Q,ij:()=>J});var m=t(96814),i=t(60095),g=t(33957),d=t(43535),_=t(22640),D=t(52863),b=t(42788),c=t(37320),a=t(33764),E=t(27208),l=t(27498),e=t(31380),p=t(96370),F=t(70014),y=t(70479),P=t(38438),G=t(27411),R=t(65879);let x=(()=>{class Z{}return Z.\u0275fac=function(Y){return new(Y||Z)},Z.\u0275mod=R.oAB({type:Z}),Z.\u0275inj=R.cJS({providers:[P.Q,_.bN],imports:[m.ez,i.u5,i.UX,_.AY,G.LU,d.hJ,g.UU,D.V_,b.RO,_.tD,a.QX,c.UH,E.K2,l.Su,e.pV,p.nD,F.ky,_.hY,_.aL,_.Mk,y.hd]}),Z})();var j=t(93768),W=t(20198);t(72798),t(9456),t(83108),t(68073),t(63621);const J={provide:t(42008).j,useExisting:(0,R.Gpc)(()=>j.B)}},42008:(K,T,t)=>{t.d(T,{j:()=>i});var m=t(65879);let i=(()=>{class g{constructor(){this.name="platformSmartFilterBar",this.presetChanged=new m.vpe}}return g.\u0275fac=function(_){return new(_||g)},g.\u0275dir=m.lG2({type:g,inputs:{name:"name"},outputs:{presetChanged:"presetChanged"}}),g})()},93768:(K,T,t)=>{t.d(T,{B:()=>S});var m=t(49671),i=t(65879),g=t(60095),d=t(47394),_=t(65619),D=t(32181),b=t(83620),c=t(24036),a=t(48180),E=t(37398),l=t(27498),e=t(70014),p=t(22640),F=t(83009),y=t(83108),G=(t(63621),t(48448)),R=t(38438);const x="smart-filter-condition-renderer";var j=t(42008),W=t(72798),z=t(37387),H=t(42495),X=t(71993),V=t(96814),k=t(29466),Q=t(46306),J=t(13849),Z=t(75713),N=t(15371),Y=t(95621),w=t(94772),O=t(57850);function U(o,v){}function s(o,v){if(1&o&&(i.ynx(0),i.YNc(1,U,0,0,"ng-template",10),i._UZ(2,"fd-toolbar-separator"),i.BQk()),2&o){const r=v.$implicit;i.xp6(1),i.Q6J("ngTemplateOutlet",r)}}function h(o,v){if(1&o&&(i.ynx(0),i.YNc(1,s,3,1,"ng-container",9),i.BQk()),2&o){const r=i.oxw();i.xp6(1),i.Q6J("ngForOf",r._toolbarItems)}}function u(o,v){if(1&o){const r=i.EpF();i.TgZ(0,"fdp-button",11),i.NdJ("click",function(){i.CHM(r);const f=i.oxw();return i.KtG(f.submitForm())}),i.ALo(1,"fdTranslate"),i.qZA()}if(2&o){const r=i.oxw();i.Q6J("disabled",r._loading)("label",i.lcZ(1,2,"platformSmartFilterBar.submitButtonLabel"))}}const L=function(o){return{filtersCount:o}},et={responsivePadding:!0,verticalPadding:!0,minWidth:"30rem",bodyMinHeight:"calc(50vh - 88px)"},B={provide:j.j,useExisting:(0,i.Gpc)(()=>S)};let S=(()=>{class o extends j.j{set subject(r){this._setSubject(r)}get subject(){return this._subject}set transparent(r){this._transparent=(0,H.Ig)(r)}get transparent(){return this._transparent}get _loading(){return!this._subject?.getDataSource()||this._subject.getDataSource().isDataLoading}constructor(r,n,f,C,I,M){super(),this._dialogService=r,this._cdr=n,this._smartFilterBarService=f,this._fgService=C,this._injector=I,this._destroyRef=M,this.filtersColumnLayout="XL4-L3-M2-S1",this.liveUpdate=!1,this.smartFiltersChanged=new i.vpe,this.smartFiltersApplied=new i.vpe,this.searchInputChanged=new i.vpe,this.filterBy=[],this._toolbarItems=[],this._selectedFilters=[],this._showFilterBar=!0,this._subscriptions=new d.w0,this._subjectSubscriptions=new d.w0,this._transparent=!1,this._formGeneratorReady=new _.X(!1),this._ignorePresetChange=!1,this._fgService.addComponent(W.v,[x])}ngAfterViewInit(){this._toolbarItems=this._toolbarItemRefs.toArray().map(r=>r.templateRef),this._toolbarItemRefs.changes.subscribe(()=>{this._toolbarItems=this._toolbarItemRefs.toArray().map(r=>r.templateRef)})}ngOnDestroy(){this._subscriptions.unsubscribe(),this._unsubscribeFromSubject()}getDisplayValue(r,n){var f=this;return(0,m.Z)(function*(){return f._smartFilterBarService.getDisplayValue(r,n)})()}showFilteringSettings(){const n={fields:this._getSubjectDefinitions(),filterBy:this.filterBy,selectedFilters:this._selectedFilters};this._dialogService.open(y.l,{...et,disablePaddings:!0,width:"50rem",data:n},this._injector).afterClosed.pipe((0,a.q)(1)).subscribe(C=>{this._setSelectedFilters(C)})}_onSearchInputChange(r){this.search=r,this.searchInputChanged.emit(r)}_cancelSearch(){this.search=void 0,this.liveUpdate&&this.submitForm()}submitForm(){this._formGenerator.submit()}setPreset(r){var n=this;return(0,m.Z)(function*(){n._ignorePresetChange=!0,r.filterBy=r.filterBy||[],n.filterBy=r.filterBy,n.search=r.search,n._formGeneratorReady.pipe((0,D.h)(f=>f)).subscribe((0,m.Z)(function*(){n._fgService.resetForm(n._formGenerator.form);for(const C of n.filterBy){const I=n._fgService.getFormControl(n._formGenerator.form,C.field);if(!I)continue;const M=I.formItem,A=n._smartFilterBarService.transformCollectionFilter(C),$=yield n._smartFilterBarService.getConditionFieldSelectedVariants(M,A);I?.setValue($)}n._setSelectedFilters(n.filterBy.map(C=>C.field)),n.subject.getDataSource().dataProvider.setFilters(n.filterBy,n.search),n.subject.getSubject().fetch()}))})()}getCurrentPreset(){return{search:this.search,filterBy:this.filterBy}}_onFormSubmitted(r){const n=this._generateCollectionFilterGroups(r);this._applyFiltering(n)}_onFormCreated(){var r=this;this.subject&&this._setSelectedFilters([...this.subject.getDefaultFields(),...this._selectedFilters]),this._formGenerator.form.valueChanges.pipe((0,b.b)(50),(0,X.sL)(this._destroyRef)).subscribe((0,m.Z)(function*(){const n=yield r.getFormattedConditions();r.smartFiltersChanged.emit({filterBy:n,search:r.search,subject:r.subject}),r.liveUpdate&&r._applyFiltering(n)})),this._formGeneratorReady.next(!0)}_toggleFilterBar(){this._showFilterBar=!this._showFilterBar,this._cdr.markForCheck()}getFormattedConditions(){var r=this;return(0,m.Z)(function*(){const n=yield r._fgService.getFormValue(r._formGenerator.form);return r._generateCollectionFilterGroups(n)})()}_generateCollectionFilterGroups(r){const n=[],f=this._getSubjectDefinitions();return Object.entries(r).filter(([,C])=>!!C).forEach(([C,I])=>{const M=f.find($=>$.name===C),A={filters:[],strategy:M.conditionStrategy,field:M.key};I.forEach($=>{A.filters.push({strategy:$.operator,field:M.key,value:$.value,value2:$.value2,type:M.dataType})}),n.push(A)}),n.filter(C=>C.filters?.length>0)}_setSubject(r){r&&(this._subject=r,this.unsubscribeFromSubject(),this._listenToSubjectColumns())}unsubscribeFromSubject(){}_listenToSubjectColumns(){var r=this;this._subjectSubscriptions.add(this._subject.fieldsStream.subscribe(function(){var n=(0,m.Z)(function*(f){setTimeout((0,m.Z)(function*(){yield r._generateForm(f.filter(C=>C.filterable))}))});return function(f){return n.apply(this,arguments)}}()))}_generateForm(r){var n=this;return(0,m.Z)(function*(){const f=[],C=function tt(o){return Math.max(...o.split("-").map(v=>{const r=v.match(/\d+/);return r?parseInt(r[0],10):1}))}(n.filtersColumnLayout??"");let I=1;0!==r.length&&(r.forEach(M=>{let A=n._generateBaseFieldItem(M);switch(M.required&&n._selectedFilters.push(M.name),M.filterType){case e.vA.SINGLE:case e.vA.CATEGORY:A.guiOptions.additionalData.type="select",A.guiOptions.inline=!1;break;case e.vA.MULTI:A.guiOptions.additionalData.type="multi-input";break;case e.vA.CUSTOM:A=n._generateCustomFilterFieldItem(M,A);break;default:A=n._generateInputFieldItem(M,A)}A.guiOptions.column=I,I+=1,I>C&&(I=1),f.push(A)}),n._formItems=f,n._cdr.detectChanges())})()}_generateCustomFilterFieldItem(r,n){return r.customFilterType&&(n.guiOptions.additionalData.type=r.customFilterType,n.guiOptions.additionalData=Object.assign(n.guiOptions.additionalData,this._smartFilterBarService.getCustomFilterConfiguration(r.customFilterType)),n.type=n.guiOptions.additionalData.rendererComponent?`${n.guiOptions.additionalData.type}-renderer`:n.type,n.transformer=n.guiOptions.additionalData.valueTransformer),n}_generateInputFieldItem(r,n){switch(r.dataType){case e.g.DATE:n.guiOptions.additionalData.type="datepicker";break;case e.g.NUMBER:n.guiOptions.additionalData.controlType="number";break;default:n.guiOptions.additionalData.controlType="text"}return n}_generateBaseFieldItem(r){return{name:r.name,message:r.label,required:r.required,type:x,placeholder:" ",validators:r.required?[g.kI.required]:[],choices:r.hasOptions?this._getFilterDefaultOptions(r.key,r.filterType):void 0,transformer:n=>(0,z.T)(n),guiOptions:{additionalData:{type:"input",dataType:r.dataType,filterType:r.filterType,controlType:"text",choices:r.hasOptions?this._getFilterAvailableOptions(r.key):void 0}},when:()=>this._selectedFilters.includes(r.name)}}_getFilterAvailableOptions(r){return()=>this._getFieldVariants(r)}_getFilterDefaultOptions(r,n){var f=this;return(0,m.Z)(function*(){const C=yield(0,c.z)(f._getFieldVariants(r).pipe((0,a.q)(1))),I=[];for(const M of C){const A={value:M.value,operator:"equalTo"};A.displayValue=yield f.getDisplayValue(A,n),I.push(A)}return I})}_getFieldVariants(r){return this.subject.getFieldVariants(r).pipe((0,a.q)(1),(0,E.U)(n=>n.filter((f,C)=>n.findIndex(I=>I.value===f.value)===C)))}_getSubjectDefinitions(){return this.subject?.getSubjectFields()||[]}_applyFiltering(r){const n=this.subject.getDataSource();this.filterBy=r,n.dataProvider.setFilters(r,this.search),this.subject.getSubject().fetch();const f={search:this.search,filterBy:this.filterBy};this.smartFiltersApplied.emit({...f,subject:this._subject}),this._ignorePresetChange||this.presetChanged.emit(f),this._ignorePresetChange=!1}_unsubscribeFromSubject(){this._subjectSubscriptions.unsubscribe(),this._subjectSubscriptions=new d.w0}_setSelectedFilters(r){this._selectedFilters=r.filter((n,f)=>r.indexOf(n)===f),this._formGenerator.refreshStepsVisibility()}}return o.\u0275fac=function(r){return new(r||o)(i.Y36(l.xA),i.Y36(i.sBO),i.Y36(R.Q),i.Y36(p.bN),i.Y36(i.zs3),i.Y36(i.ktI))},o.\u0275cmp=i.Xpm({type:o,selectors:[["fdp-smart-filter-bar"]],contentQueries:function(r,n,f){if(1&r&&i.Suo(f,G.G,4),2&r){let C;i.iGM(C=i.CRH())&&(n._toolbarItemRefs=C)}},viewQuery:function(r,n){if(1&r&&i.Gf(p.CI,5),2&r){let f;i.iGM(f=i.CRH())&&(n._formGenerator=f.first)}},hostAttrs:[1,"fdp-smart-filter-bar"],hostVars:2,hostBindings:function(r,n){2&r&&i.ekj("fdp-smart-filter-bar--transparent",n.transparent)},inputs:{subject:"subject",transparent:"transparent",filtersColumnLayout:"filtersColumnLayout",liveUpdate:"liveUpdate"},outputs:{smartFiltersChanged:"smartFiltersChanged",smartFiltersApplied:"smartFiltersApplied",searchInputChanged:"searchInputChanged"},features:[i._Bn([B,{provide:F.ID,useExisting:o}]),i.qOj],decls:15,vars:26,consts:[["fdType","transparent"],[4,"ngIf"],[3,"disabled","disableRefresh","placeholder","inputChange","searchSubmit","cancelSearch"],["buttonType","emphasized","fd-toolbar-item","",3,"disabled","label","click",4,"ngIf"],["fd-toolbar-item","","glyph","synchronize",3,"disabled","ariaLabel","click"],["fd-toolbar-item","",3,"label","disabled","click"],["buttonType","transparent","fd-toolbar-item","",3,"label","disabled","click"],[1,"fdp-smart-filter-bar__filters",3,"hidden"],[3,"noAdditionalContent","formItems","columnLayout","formCreated","formSubmitted"],[4,"ngFor","ngForOf"],[3,"ngTemplateOutlet"],["buttonType","emphasized","fd-toolbar-item","",3,"disabled","label","click"]],template:function(r,n){1&r&&(i.TgZ(0,"div")(1,"fd-toolbar",0),i.YNc(2,h,2,1,"ng-container",1),i.TgZ(3,"fdp-search-field",2),i.NdJ("inputChange",function(C){return n._onSearchInputChange(C)})("searchSubmit",function(){return n.submitForm()})("cancelSearch",function(){return n._cancelSearch()}),i.ALo(4,"fdTranslate"),i.qZA(),i._UZ(5,"fd-toolbar-spacer"),i.YNc(6,u,2,4,"fdp-button",3),i.TgZ(7,"fdp-button",4),i.NdJ("click",function(){return n.submitForm()}),i.ALo(8,"fdTranslate"),i.qZA(),i.TgZ(9,"fdp-button",5),i.NdJ("click",function(){return n.showFilteringSettings()}),i.ALo(10,"fdTranslate"),i.qZA(),i.TgZ(11,"fdp-button",6),i.NdJ("click",function(){return n._toggleFilterBar()}),i.ALo(12,"fdTranslate"),i.qZA()()(),i.TgZ(13,"div",7)(14,"fdp-form-generator",8),i.NdJ("formCreated",function(){return n._onFormCreated()})("formSubmitted",function(C){return n._onFormSubmitted(C)}),i.qZA()()),2&r&&(i.xp6(2),i.Q6J("ngIf",n._toolbarItems),i.xp6(1),i.Q6J("disabled",n._loading)("disableRefresh",!0)("placeholder",i.lcZ(4,15,"platformSmartFilterBar.searchPlaceholder")),i.xp6(3),i.Q6J("ngIf",!n.liveUpdate),i.xp6(1),i.Q6J("disabled",n._loading)("ariaLabel",i.lcZ(8,17,"platformSmartFilterBar.refreshButtonAriaLabel")),i.xp6(2),i.Q6J("label",i.xi3(10,19,"platformSmartFilterBar.filtersButtonLabel",i.VKq(24,L,n._selectedFilters.length)))("disabled",n._loading),i.xp6(2),i.Q6J("label",i.lcZ(12,22,n._showFilterBar?"platformSmartFilterBar.hideFiltersButtonLabel":"platformSmartFilterBar.showFiltersButtonLabel"))("disabled",n._loading),i.xp6(2),i.Q6J("hidden",!n._showFilterBar),i.xp6(1),i.Q6J("noAdditionalContent",!0)("formItems",n._formItems)("columnLayout",n.filtersColumnLayout))},dependencies:[V.sg,V.O5,V.tP,k.C,Q.n,J.Q,Z.v,N.F,Y.r0,w.ri,O.n],styles:[".fdp-smart-filter-bar{display:block;box-shadow:var(--sapContent_HeaderShadow);background-color:var(--sapObjectHeader_Background)}.fdp-smart-filter-bar--transparent{background-color:var(--sapToolbar_Background);box-shadow:none}.fdp-smart-filter-bar .fd-toolbar--title{height:3rem;min-height:3rem;border-bottom:none;padding:.5rem}@media (min-width: 600px){.fdp-smart-filter-bar .fd-toolbar--title{padding-left:2rem;padding-right:2rem}}.fdp-smart-filter-bar .fd-toolbar fdp-search-field{min-width:15.5rem}.fdp-smart-filter-bar .fdp-smart-filter-bar__filters{padding-left:.5rem;padding-right:.5rem}@media (min-width: 600px){.fdp-smart-filter-bar .fdp-smart-filter-bar__filters{padding-left:2rem;padding-right:2rem}}.fdp-smart-filter-bar .fd-container.fd-form-layout-grid-container{padding:0}.fdp-smart-filter-bar .fd-container.fd-form-layout-grid-container .fd-row .fd-form-group{padding-left:.25rem!important;padding-right:.25rem!important}.fdp-smart-filter-bar__conditions-dialog .fdp-smart-filter-bar__actions-column{min-width:auto;flex:0 0 auto}.fdp-smart-filter-bar__conditions-dialog .fd-popover-custom{display:block}.fdp-smart-filter-bar__conditions-dialog .fd-dialog__body{padding:0 .5rem;background-color:var(--sapBackgroundColor, #f7f7f7)}.fdp-smart-filter-bar__conditions-dialog .fd-container.fd-form-layout-grid-container,.fdp-smart-filter-bar__conditions-dialog .fd-container.fd-form-layout-grid-container .fd-row .fd-form-group{padding:0!important}\n"],encapsulation:2,changeDetection:0}),o})()},38438:(K,T,t)=>{t.d(T,{Q:()=>c});var m=t(49671),i=t(71534),g=t(22640),d=t(70014),_=t(83009),D=t(1013),b=t(65879);let c=(()=>{class a{constructor(l){this._fgService=l,this._customFilterConditions=new Map}addCustomFilter(l){if(!l.conditionComponent&&l.rendererComponent&&(l.conditionComponent=l.rendererComponent),!l.conditionComponent)return!1;const e=this._fgService.addComponent(l.conditionComponent,l.types);return e&&this._customFilterConditions.set(l.conditionComponent,l),e&&l.rendererComponent&&this._fgService.addComponent(l.rendererComponent,l.types.map(p=>`${p}-renderer`)),e}getCustomFilterConfiguration(l){const e=this._fgService.getComponentDefinitionByType(l);if(e)return this._customFilterConditions.get(e.component)}getApplicableFilterConditions(l,e=d.g.STRING){const p=this._fgService.getComponentDefinitionByType(l),F=(0,d.b3)(e);return p&&this._customFilterConditions.get(p.component)?.filterStrategies||F}getDisplayValue(l,e){var p=this;return(0,m.Z)(function*(){const F=p.getCustomFilterConfiguration(e);if(F?.valueRenderer){const G=F?.valueRenderer(l),R=(0,D.M7n)(G);let x;return yield R.createSubscription(G,j=>{x=j}),x}const y=p._normalizeValue(l.value),P=p._normalizeValue(l.value2);switch(l.operator){case"equalTo":return`=${y}`;case"contains":return`*${y}*`;case"between":return`${y}...${P}`;case"beginsWith":return`${y}*`;case"endsWith":return`*${y}`;case"greaterThan":case"after":return`>${y}`;case"greaterThanOrEqualTo":case"onOrAfter":return`>=${y}`;case"lessThan":case"before":return`<${y}`;case"lessThanOrEqualTo":case"beforeOrOn":return`<=${y}`;default:return`${y}`}})()}normalizeConditions(l,e){var p=this;return(0,m.Z)(function*(){const F=[];for(const y of e){const P=Object.assign({},y);P.displayValue=yield p.getDisplayValue(P,l.guiOptions?.additionalData.type),F.push(P)}return F})()}getConditionFieldSelectedVariants(l,e){var p=this;return(0,m.Z)(function*(){return(yield p.normalizeConditions(l,e)).map(F=>(0,_.UL)(F)?F:{label:F.displayValue,value:F})})()}transformCollectionFilter(l){return l.filters.map(e=>({operator:e.strategy,value:e.value,value2:e.value2}))}_normalizeValue(l){return Array.isArray(l)?l.map(e=>this._normalizeValue(e)).join(", "):(0,_.UL)(l)?l.label:l instanceof i._U?l.toDateString():l}}return a.\u0275fac=function(l){return new(l||a)(b.LFG(g.bN))},a.\u0275prov=b.Yz7({token:a,factory:a.\u0275fac}),a})()}}]);