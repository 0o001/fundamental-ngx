"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2187],{82187:(pl,V,c)=>{c.r(V),c.d(V,{PlatformUploadCollectionDocsModule:()=>H});var $=c(64575),C=c(36895),U=c(90433),Ee=c(21553),Ze=c(30825),Pe=c(61826),S=c(89556),K=c(90523),_=c(87906),Me=c(78793),De=c(89282),Je=c(94448),Re=c(80848),Oe=c(17043),Qe=c(41033),Be=c(29584),ze=c(33744),X=c(83034),G=c(89441),Ye=c(54810),ke=c(35243),je=c(48149),y=c(61892),He=c(60676),e=c(94650);class E{static#e=this.\u0275fac=function(t){return new(t||E)};static#t=this.\u0275mod=e.oAB({type:E});static#o=this.\u0275inj=e.cJS({imports:[C.ez,G.ky,Ee.V_,Ze.hJ,Pe.ne,K.ej,He.LU,U.u5,U.UX,S.Su,_.dr,Re.Q,Oe.wH,Qe.u3,Me.UH,Be.px,Ye.q0,ke.RO,De.H,ze.pd,Je.pV,y.Oj,je.$,$.Bz,y.z0,X.jO,y.z0,X.jO]})}var g=c(95698),ee=c(52944),te=c(21819),oe=c(20586),$e=c(68226),ne=c(87455),le=c(34853),ie=c(23470),ae=c(48977),Ge=c(44797),se=c(52122),ce=c(49095),We=c(17462),de=c(36897),W=c(21565);function qe(l,o){1&l&&(e._UZ(0,"span",8),e.ALo(1,"fdTranslate"),e.ALo(2,"fdTranslate"),e.ALo(3,"fdTranslate")),2&l&&(e.Q6J("label",e.lcZ(1,3,"platformUploadCollection.newFolderInputErrorLabel")),e.uIk("title",e.lcZ(2,5,"platformUploadCollection.newFolderInputErrorLabel"))("aria-label",e.lcZ(3,7,"platformUploadCollection.newFolderInputErrorLabel")))}const Ve=function(l){return{folderName:l}};class I{constructor(o){this.dialogRef=o,this._currentFolder=this.dialogRef.data.currentFolder,this._maxFilenameLength=this.dialogRef.data.maxFilenameLength,this._newFolderName="New Folder"}ngAfterViewInit(){const o=this.formControl.elementRef().nativeElement;o&&(o.focus(),this._setSelectionRange(o,0,this._newFolderName.length))}_setSelectionRange(o,t,n){o.setSelectionRange(t,n,o.selectionDirection||void 0)}static#e=this.\u0275fac=function(t){return new(t||I)(e.Y36(S.zj))};static#t=this.\u0275cmp=e.Xpm({type:I,selectors:[["ng-component"]],viewQuery:function(t,n){if(1&t&&e.Gf(K.Ac,5),2&t){let i;e.iGM(i=e.CRH())&&(n.formControl=i.first)}},decls:19,vars:21,consts:[["fd-dialog-title","","id","fdp-upload-collection-new-folder-title","fd-title","",1,"fd-title--bold"],["fd-form-item",""],["fd-form-label","","for","fdp-upload-collection-new-folder-input"],["fd-form-control","","fd-initial-focus","","id","fdp-upload-collection-new-folder-input","type","text",3,"ngModel","placeholder","ngModelChange"],["formControl",""],["fd-object-status","","status","negative",3,"label",4,"ngIf"],["fdType","emphasized",3,"label","disabled","click"],[3,"label","click"],["fd-object-status","","status","negative",3,"label"]],template:function(t,n){1&t&&(e.TgZ(0,"fd-dialog")(1,"fd-dialog-header")(2,"h1",0),e._uU(3),e.ALo(4,"fdTranslate"),e.qZA()(),e.TgZ(5,"fd-dialog-body")(6,"div",1)(7,"label",2),e._uU(8),e.ALo(9,"fdTranslate"),e.qZA(),e.TgZ(10,"input",3,4),e.NdJ("ngModelChange",function(a){return n._newFolderName=a}),e.ALo(12,"fdTranslate"),e.qZA(),e.YNc(13,qe,4,9,"span",5),e.qZA()(),e.TgZ(14,"fd-dialog-footer")(15,"fd-button-bar",6),e.NdJ("click",function(){return n.dialogRef.close(n._newFolderName)}),e.ALo(16,"fdTranslate"),e.qZA(),e.TgZ(17,"fd-button-bar",7),e.NdJ("click",function(){return n.dialogRef.dismiss()}),e.ALo(18,"fdTranslate"),e.qZA()()()),2&t&&(e.xp6(3),e.hij(" ",e.lcZ(4,8,"platformUploadCollection.newFolderTitle")," "),e.xp6(5),e.hij(" ",e.xi3(9,10,n._currentFolder?"platformUploadCollection.newFolderAtFolderInputLabel":"platformUploadCollection.newFolderAtRootInputLabel",e.VKq(19,Ve,(null==n._currentFolder?null:n._currentFolder.name)||"")),": "),e.xp6(2),e.Q6J("ngModel",n._newFolderName)("placeholder",e.lcZ(12,13,"platformUploadCollection.newFolderInputPlaceholder")),e.xp6(3),e.Q6J("ngIf",n._newFolderName.length>n._maxFilenameLength),e.xp6(2),e.Q6J("label",e.lcZ(16,15,"platformUploadCollection.newFolderDialogCreateBtnLabel"))("disabled",n._newFolderName.length>n._maxFilenameLength),e.xp6(2),e.Q6J("label",e.lcZ(18,17,"platformUploadCollection.newFolderDialogCancelBtnLabel")))},dependencies:[C.O5,ee.A,te.T,oe.J,$e.h,U.Fj,U.JJ,U.On,ne.a,le.H,ie.g,ae.A,Ge.q,se.N,ce.r,We.N,de.k,W.n],styles:[".fd-title--bold[_ngcontent-%COMP%]{font-weight:700}"]})}var re=c(87757),Ke=c(98887),Xe=c(62361),et=c(92664),tt=c(6309),pe=c(61357),ot=c(70028),nt=c(90537),lt=c(71e3),it=c(94742),at=c(43908);function st(l,o){1&l&&(e.TgZ(0,"h1",12),e._uU(1),e.ALo(2,"fdTranslate"),e.qZA()),2&l&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"platformUploadCollection.moveToTitle")," "))}function ct(l,o){if(1&l){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",13),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i._goToParentFolder())}),e.qZA(),e.TgZ(2,"h1",14)(3,"span"),e._uU(4),e.ALo(5,"fdTranslate"),e.qZA(),e._uU(6),e.qZA(),e.BQk()}if(2&l){const t=e.oxw(2);e.xp6(4),e.Oqu(e.lcZ(5,2,"platformUploadCollection.moveToTitleFolder")),e.xp6(2),e.hij(" ",t._currentFolder.name," ")}}function dt(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",7)(1,"fd-bar-element"),e.YNc(2,st,3,3,"h1",8),e.YNc(3,ct,7,4,"ng-container",9),e.qZA()(),e.TgZ(4,"div",10)(5,"fd-bar-element")(6,"button",11),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i._newFolder())}),e.ALo(7,"fdTranslate"),e.qZA()()()}if(2&l){const t=e.oxw();e.xp6(2),e.Q6J("ngIf",!t._currentFolder),e.xp6(1),e.Q6J("ngIf",t._currentFolder),e.xp6(3),e.Q6J("label",e.lcZ(7,3,"platformUploadCollection.moveToNewFolderBtnLabel"))}}function rt(l,o){1&l&&(e.TgZ(0,"li",15)(1,"span",16),e._uU(2),e.ALo(3,"fdTranslate"),e.qZA()()),2&l&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"platformUploadCollection.moveToAllFilesSubHeaderLabel")))}function pt(l,o){1&l&&e._UZ(0,"i",22)}function mt(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"li",17)(1,"a",18),e.NdJ("click",function(){const a=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s._hasFolders(a.files)?s._openFolder(a):s._selectFolder(a))}),e._UZ(2,"fd-icon",19)(3,"span",20),e.YNc(4,pt,1,0,"i",21),e.qZA()()}if(2&l){const t=o.$implicit,n=e.oxw();e.Q6J("selected",(null==n.selectedFolder?null:n.selectedFolder.documentId)===t.documentId),e.xp6(3),e.Q6J("innerText",t.name),e.xp6(1),e.Q6J("ngIf",n._hasFolders(t.files))}}class Z{constructor(o,t,n){this.dialogRef=o,this._dialogService=t,this._cd=n,this.items=this.dialogRef.data.items,this.originalFolder=this.dialogRef.data.currentFolder,this.movableFolders=this.dialogRef.data.movableFolders,this._maxFilenameLength=this.dialogRef.data.maxFilenameLength,this._currentFolder=this.originalFolder&&{...this.originalFolder},this._foldersList=[]}ngOnInit(){this._init(this._currentFolder?this._currentFolder.files:this.items)}_goToParentFolder(){this.selectedFolder=null,this._currentFolder=this._getParentFolderByCurrentFolderId(this._currentFolder?.documentId),this._init(this._currentFolder?this._currentFolder.files:this.items),this._cd.detectChanges()}_close(){this.dialogRef.dismiss()}_confirm(){this.dialogRef.close({selectedFolder:this.selectedFolder||this._currentFolder})}_openFolder(o){this.selectedFolder=null,this._currentFolder=o,this._init(o.files),this._cd.detectChanges()}_selectFolder(o){this.selectedFolder=o}_hasFolders(o){return o.some(t=>"folder"===t.type)}_newFolder(){this._dialogService.open(I,{responsivePadding:!0,backdropClickCloseable:!1,height:"350px",backdropClass:"fdp-upload-collection-dialig-no-bg",data:{currentFolder:this._currentFolder,maxFilenameLength:this._maxFilenameLength}}).afterClosed.pipe((0,g.q)(1)).subscribe(t=>{this.dialogRef.close({parentFolderId:this._currentFolder?.documentId,selectedFolder:null,folderName:t})})}_init(o){this._foldersList=o.filter(t=>"folder"===t.type&&!this.movableFolders?.some(n=>n.documentId===t.documentId))}_getParentFolderByCurrentFolderId(o){let t;return o&&JSON.stringify(this.items,(n,i)=>(!(0,y.Kn)(i)||"file"===i.type||!i.files||i.files.some(a=>a.documentId===o)&&(t=i),i)),t}static#e=this.\u0275fac=function(t){return new(t||Z)(e.Y36(S.zj),e.Y36(S.xA),e.Y36(e.sBO))};static#t=this.\u0275cmp=e.Xpm({type:Z,selectors:[["ng-component"]],decls:14,vars:9,consts:[["fdTemplate","header"],[1,"fd-dialog__body--no-horizontal-padding"],["fd-list",""],["fd-list-item","","class","fd-list__item--title-background",4,"ngIf"],["fd-list-item","",3,"selected",4,"ngFor","ngForOf"],["fdType","emphasized","type","submit",3,"disabled","click"],[3,"click"],["fd-bar-left",""],["class","fd-title--bold","fd-title","",4,"ngIf"],[4,"ngIf"],["fd-bar-right",""],["fd-button","",3,"label","click"],["fd-title","",1,"fd-title--bold"],["fd-button","","fdType","transparent","glyph","navigation-left-arrow",3,"click"],["fd-title",""],["fd-list-item","",1,"fd-list__item--title-background"],["fd-list-title",""],["fd-list-item","",3,"selected"],["fd-list-link","",3,"click"],["glyph","folder-blank",1,"fdp-upload-collection__fd-icon"],["fd-list-title","",3,"innerText"],["fd-list-icon","","glyph","slim-arrow-right",4,"ngIf"],["fd-list-icon","","glyph","slim-arrow-right"]],template:function(t,n){1&t&&(e.TgZ(0,"fd-dialog")(1,"fd-dialog-header"),e.YNc(2,dt,8,5,"ng-template",0),e.qZA(),e.TgZ(3,"fd-dialog-body",1)(4,"ul",2),e.YNc(5,rt,4,3,"li",3),e.YNc(6,mt,5,3,"li",4),e.qZA()(),e.TgZ(7,"fd-dialog-footer")(8,"fd-button-bar",5),e.NdJ("click",function(){return n._confirm()}),e._uU(9),e.ALo(10,"fdTranslate"),e.qZA(),e.TgZ(11,"fd-button-bar",6),e.NdJ("click",function(){return n._close()}),e._uU(12),e.ALo(13,"fdTranslate"),e.qZA()()()),2&t&&(e.xp6(5),e.Q6J("ngIf",!n._currentFolder),e.xp6(1),e.Q6J("ngForOf",n._foldersList),e.xp6(2),e.Q6J("disabled",!(n.selectedFolder&&(null==n.originalFolder?null:n.originalFolder.documentId)!==n.selectedFolder.documentId||!n.selectedFolder&&(null==n.originalFolder?null:n.originalFolder.documentId)!==(null==n._currentFolder?null:n._currentFolder.documentId))),e.xp6(1),e.hij(" ",e.lcZ(10,5,"platformUploadCollection.moveToConfirmBtn")," "),e.xp6(3),e.hij(" ",e.lcZ(13,7,"platformUploadCollection.moveToCloseBtn")," "))},dependencies:[C.sg,C.O5,re.r,ne.a,le.H,ie.g,ae.A,Ke.b,Xe.M,et.J,se.N,ce.r,tt.S,pe.o,ot.n,nt.G,lt.X,it.E,at.D,W.n],styles:[".fd-list__item--title-background[_ngcontent-%COMP%]{background-color:var(--sapList_HeaderBackground)}.fd-dialog__body--no-horizontal-padding[_ngcontent-%COMP%]{padding-left:0!important;padding-right:0!important}.fd-title--bold[_ngcontent-%COMP%]{font-weight:700}"]})}class v{validation(o,{maxFileNameLength:t,fileTypes:n,maxFileSize:i,mimeTypes:a}){return o.reduce((s,d)=>{if(n&&n.length>0&&this._checkByFileExtension(d,n)||a&&a.length>0&&this._checkByMimeType(d,a))return s.typeMismatch||(s.typeMismatch=[]),s.typeMismatch.push(d),s;if(i){const r=(0,_.LW)(i);if(d.size>r)return s.fileSizeExceed||(s.fileSizeExceed=[]),s.fileSizeExceed.push(d),s}return"number"==typeof t&&this._checkByFileNameLength(d,t)?(s.filenameLengthExceed||(s.filenameLengthExceed=[]),s.filenameLengthExceed.push(d),s):(s.validFiles||(s.validFiles=[]),s.validFiles.push(d),s)},{})}_checkByFileExtension(o,t){const n=o.name.split("."),i=n[n.length-1].toLocaleLowerCase();return!t.some(a=>a.replace(".","").toLowerCase()===i)}_checkByMimeType(o,t){return!t.some(n=>n.toLowerCase()===o.type)}_checkByFileNameLength(o,t){const n=o.name.split(".");return n.pop(),n.join(".").length>t}static#e=this.\u0275fac=function(t){return new(t||v)};static#t=this.\u0275prov=e.Yz7({token:v,factory:v.\u0275fac,providedIn:"root"})}class P{constructor(o,t){this._elementRef=o,this._filesValidatorService=t,this.multiple=!0,this.fileTypes=[],this.mimeTypes=[],this.disabled=!1,this.dragndrop=!0,this.fileChanged=new e.vpe,this.cancel=new e.vpe,this.onDropzone=new e.vpe,this.dropzonePreviousState=null;const n=this._elementRef.nativeElement;this.elementSelector=n.id?`#${n.id}`:"",this.elementSelector+=n.className?`.${n.className.split(" ").join(".")}`:"",this.elementSelector||(this.elementSelector=`${n.localName}[fdpUploadCollectionDragnDrop]`)}onWindowDragover(o){if(!this.dragndrop||this.disabled)return;this._muteEvent(o);const t=!!(o.target instanceof HTMLElement&&o.target.closest(this.elementSelector));this.dropzonePreviousState!==t&&(this.dropzonePreviousState=t,this.onDropzone.emit(t))}onDragLeave(o){this.dragndrop&&!this.disabled&&([o.screenX,o.screenY,o.clientX,o.clientY,o.pageX,o.pageY].some(n=>n>0)||(this._muteEvent(o),this.dropzonePreviousState=null,this.cancel.emit()))}onDrop(o){if(!this.dragndrop||this.disabled||(this.dropzonePreviousState=null,this.cancel.emit(),!(o.target instanceof HTMLElement&&o.target.closest(this.elementSelector))))return;this._muteEvent(o);const i=Array.from(o.dataTransfer?.files??[]),a=this._filesValidatorService.validation(i,{maxFileSize:this.maxFileSize,maxFileNameLength:this.maxFilenameLength,fileTypes:this.fileTypes,mimeTypes:this.mimeTypes});this.fileChanged.emit(a)}_muteEvent(o){o.preventDefault(),o.stopPropagation()}static#e=this.\u0275fac=function(t){return new(t||P)(e.Y36(e.SBq),e.Y36(v))};static#t=this.\u0275dir=e.lG2({type:P,selectors:[["","fdpUploadCollectionDragnDrop",""]],hostBindings:function(t,n){1&t&&e.NdJ("dragover",function(a){return n.onWindowDragover(a)},!1,e.Jf7)("dragleave",function(a){return n.onDragLeave(a)},!1,e.Jf7)("drop",function(a){return n.onDrop(a)},!1,e.Jf7)},inputs:{multiple:"multiple",fileTypes:"fileTypes",maxFileSize:"maxFileSize",maxFilenameLength:"maxFilenameLength",mimeTypes:"mimeTypes",disabled:"disabled",dragndrop:"dragndrop"},outputs:{fileChanged:"fileChanged",cancel:"cancel",onDropzone:"onDropzone"}})}var T=c(39646);class _t extends y.FW{constructor(){super(...arguments),this.totalItems=0,this.list=[]}fetch(o){let t=this.items;const n=o.get("folderId");if(n){const x=this._findFolderById(n);t=x?x.files:[]}let i=this._defaultSorting(t);const a=o.get("searchText")??"",s=+(o.get("limit")??100),d=+(o.get("page")??1);if(!a||"*"===a)return this.list=i,this.totalItems=i.length,(0,T.of)(this._getItemsByPage(i,d,s));const r=a.toLowerCase();return i=i.filter(x=>x.name.toLowerCase().indexOf(r)>-1),this.list=i,this.totalItems=i.length,i=this._getItemsByPage(i,d,s),(0,T.of)(i)}_getItemsByPage(o,t,n){const i=(t-1)*n,a=o.slice(i,i+n);return 0===a.length&&o.length>0&&this._getItemsByPage(o,t>1?t-1:1,n),a}_defaultSorting(o){let t=[];const n=o.reduce((i,a)=>{const s=`${a.type}s`;return i[s]||(i[s]=[]),"folder"===a.type&&(a.fileSize=+this._getFileSize(a).toFixed(2)),i[s].push(a),i},{});return n.folders=this._sortBy(n.folders,"name"),n.files=this._sortBy(n.files,"name"),t=n.folders?n.folders:[],n.files&&t.push(...n.files),t}_getFileSize(o){return"file"===o.type?o.fileSize:"folder"===o.type?o.files.reduce((t,n)=>t+this._getFileSize(n),0):0}_sortBy(o=[],t){return o.sort((n,i)=>n[t]>i[t]?1:-1)}_findFolderById(o){let t;return JSON.stringify(this.items,(n,i)=>(i&&i.documentId===o&&(t=i),i)),t}}var ft=c(61135),L=c(77579);class A{constructor(o){this.dataProvider=o,this._dataChanges=new ft.X([]),this._onDataRequested$=new L.x,this._onDataReceived$=new L.x,this._dataLoading=!1}static#e=this.MaxLimit=Number.MAX_SAFE_INTEGER;get isDataLoading(){return this._dataLoading}match(o){if(this._onDataRequested$.next(),this._dataLoading=!0,!(o instanceof Map))throw new Error("DataSource.match() predicate can only accepts string and Map");o.has("limit")||o.set("limit",A.MaxLimit),this.dataProvider.fetch(o).pipe((0,g.q)(1)).subscribe(t=>{this._onDataReceived$.next(),this._dataLoading=!1,this._dataChanges.next(t)},()=>{this._onDataReceived$.next(),this._dataLoading=!1})}upload(o){return this.dataProvider.upload(o).pipe((0,g.q)(1))}download(o){return this.dataProvider.download(o)}moveTo(o){return this.dataProvider.moveTo(o).pipe((0,g.q)(1))}delete(o){return this.dataProvider.delete(o).pipe((0,g.q)(1))}fileRenamed(o){return this.dataProvider.fileRenamed(o).pipe((0,g.q)(1))}newFolder(o){return this.dataProvider.newFolder(o).pipe((0,g.q)(1))}updateVersion(o){return this.dataProvider.updateVersion(o).pipe((0,g.q)(1))}runAfterFail(o){return this.dataProvider.runAfterFail(o).pipe((0,g.q)(1))}cancelUploadNewFile(o){return this.dataProvider.cancelUploadNewFile(o).pipe((0,g.q)(1))}open(){return this._dataChanges.asObservable()}close(){}onDataRequested(){return this._onDataRequested$.asObservable()}onDataReceived(){return this._onDataReceived$.asObservable()}}var h=(()=>{return(l=h||(h={})).LOADING="loading",l.SUCCESSFUL="successful",l.UNSUCCESSFUL="unsuccessful",h;var l})(),p=(()=>{return(l=p||(p={})).WARNING="warning",l.SUCCESS="success",l.INFORMATION="information",l.ERROR="error",p;var l})(),m=(()=>{return(l=m||(m={}))[l.CREATE=0]="CREATE",l[l.REMOVE=1]="REMOVE",l[l.MOVE=2]="MOVE",l[l.UPDATE_VERSION=3]="UPDATE_VERSION",l[l.FILE_RENAME=4]="FILE_RENAME",l[l.TYPE_MISMATCH=5]="TYPE_MISMATCH",l[l.FILE_NAME_LENGTH=6]="FILE_NAME_LENGTH",l[l.FILE_SIZE=7]="FILE_SIZE",m;var l})(),u=c(18505);class me{constructor(o,t){this.source=o,this.payload=t}}class ut{constructor(o,t){this.source=o,this.payload=t}}class gt{constructor(o,t){this.source=o,this.payload=t}}var Ct=c(85872),Tt=c(27660),_e=c(14396),fe=c(60561),bt=c(73788),yt=c(70363),Ut=c(69825),Ft=c(65791),vt=c(8439),At=c(86631),St=c(63865),It=c(16563),Lt=c(94401),Nt=c(26587),wt=c(77023),Et=c(48776),Zt=c(83926),Pt=c(11957),Mt=c(85684),Dt=c(28102),Jt=c(4710),Rt=c(57558);const Ot=["fileInput"],Qt=["updateVersionInput"],Bt=function(l,o,t,n){return{messageType:l,payload:o,messageStripType:t,count:n}};function zt(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"fd-message-strip",37),e.NdJ("onDismiss",function(){e.CHM(t);const i=e.oxw();return e.KtG(i._messageStripDismiss())}),e.GkF(1,38),e.qZA()}if(2&l){const t=e.oxw(),n=e.MAs(44);e.Q6J("type",t._message.messageStripType),e.xp6(1),e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.l5B(3,Bt,t._message.messageType,t._message.payload,t._message.messageStripType,t._message.count))}}function Yt(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"a",39),e.NdJ("click",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a._breadcrumbGoTo(i))}),e._uU(1),e.ALo(2,"fdTranslate"),e.qZA()}2&l&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"platformUploadCollection.breadcrumbLabelAllFiles")," "))}const kt=function(l){return{total:l}};function jt(l,o){if(1&l&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"fdTranslate"),e.qZA()),2&l){const t=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,"platformUploadCollection.breadcrumbLabelAllFilesWithTotal",e.VKq(4,kt,t._totalItems))," ")}}function Ht(l,o){1&l&&e.GkF(0)}function $t(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"a",39),e.NdJ("click",function(i){e.CHM(t);const a=e.oxw().index,s=e.oxw();return e.KtG(s._breadcrumbGoTo(i,a))}),e._uU(1),e.qZA()}if(2&l){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.folderName)}}function Gt(l,o){if(1&l&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&l){const t=e.oxw().$implicit,n=e.oxw();e.xp6(1),e.AsE("",t.folderName," (",n._totalItems,")")}}function Wt(l,o){1&l&&e.GkF(0)}function qt(l,o){if(1&l&&(e.TgZ(0,"fd-breadcrumb-item"),e.YNc(1,$t,2,1,"ng-template",null,40,e.W1O),e.YNc(3,Gt,2,2,"ng-template",null,41,e.W1O),e.YNc(5,Wt,1,0,"ng-container",7),e.qZA()),2&l){const t=o.$implicit,n=e.MAs(2),i=e.MAs(4);e.xp6(5),e.Q6J("ngTemplateOutlet",t.clikable?n:i)}}function Vt(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"fd-input-group",43),e.NdJ("ngModelChange",function(i){e.CHM(t);const a=e.oxw(2);return e.KtG(a._searchText=i)})("ngModelChange",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i._searchInputChanged())}),e.ALo(1,"fdTranslate"),e.qZA()}if(2&l){const t=e.oxw(2);e.Q6J("ngModel",t._searchText)("ariaLabelledby",t.id+"-breadcrumb")("placeholder",e.lcZ(1,3,"platformUploadCollection.searchPlaceholder"))}}function Kt(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"button",46),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(3);return e.KtG(i._openNewFolderDialog())}),e.ALo(1,"fdTranslate"),e.ALo(2,"fdTranslate"),e.qZA()}if(2&l){const t=e.oxw(3);e.Q6J("disabled",t.disabled)("label",e.lcZ(1,3,"platformUploadCollection.newFolderBtnLabel"))("title",e.lcZ(2,5,"platformUploadCollection.newFolderBtnLabel"))}}function Xt(l,o){if(1&l){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",44),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i._openUploadFiles())}),e.ALo(2,"fdTranslate"),e.ALo(3,"fdTranslate"),e.qZA(),e.YNc(4,Kt,3,7,"button",45),e.BQk()}if(2&l){const t=e.oxw(2);e.xp6(1),e.Q6J("disabled",t.disabled)("label",e.lcZ(2,4,"platformUploadCollection.addBtnLabel"))("title",e.lcZ(3,6,"platformUploadCollection.addBtnLabel")),e.xp6(3),e.Q6J("ngIf",t.hierarchy)}}function eo(l,o){if(1&l&&(e.ynx(0),e.YNc(1,Vt,2,5,"fd-input-group",42),e.YNc(2,Xt,5,8,"ng-container",10),e.BQk()),2&l){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.showSearch),e.xp6(1),e.Q6J("ngIf",!t.readonly)}}function to(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"button",44),e.NdJ("click",function(){e.CHM(t);const i=e.oxw(2);return e.KtG(i._downloadClicked(!0))}),e.ALo(1,"fdTranslate"),e.ALo(2,"fdTranslate"),e.qZA()}if(2&l){const t=e.oxw(2);e.Q6J("disabled",t.disabled)("label",e.lcZ(1,3,"platformUploadCollection.downloadBtnLabel"))("title",e.lcZ(2,5,"platformUploadCollection.downloadBtnLabel"))}}function oo(l,o){if(1&l){const t=e.EpF();e.ynx(0),e.TgZ(1,"button",44),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i._moveToClicked(!0))}),e.ALo(2,"fdTranslate"),e.ALo(3,"fdTranslate"),e.qZA(),e.YNc(4,to,3,7,"button",47),e.TgZ(5,"button",44),e.NdJ("click",function(){e.CHM(t);const i=e.oxw();return e.KtG(i._remove(!0))}),e.ALo(6,"fdTranslate"),e.ALo(7,"fdTranslate"),e.qZA(),e.BQk()}if(2&l){const t=e.oxw();e.xp6(1),e.Q6J("disabled",t.disabled)("label",e.lcZ(2,7,"platformUploadCollection.moveToBtnLabel"))("title",e.lcZ(3,9,"platformUploadCollection.moveToBtnLabel")),e.xp6(3),e.Q6J("ngIf",t._showIfSelectedOnlyFiles()),e.xp6(1),e.Q6J("disabled",t.disabled)("label",e.lcZ(6,11,"platformUploadCollection.removeBtnLabel"))("title",e.lcZ(7,13,"platformUploadCollection.removeBtnLabel"))}}function no(l,o){1&l&&(e._UZ(0,"fd-icon",22),e.ALo(1,"fdTranslate")),2&l&&e.Q6J("title",e.lcZ(1,1,"platformUploadCollection.folderIconTitle"))}function lo(l,o){if(1&l&&(e._UZ(0,"fd-icon",63),e.ALo(1,"fdTranslate")),2&l){const t=e.oxw().$implicit,n=e.oxw(2);e.Q6J("glyph",n._getIconByType(t))("title",e.lcZ(1,2,"platformUploadCollection.fileIconTitle"))}}function io(l,o){if(1&l){const t=e.EpF();e.ynx(0),e.TgZ(1,"span",64),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,a=e.oxw(2);return e.KtG(a._openFolder(i))}),e.qZA(),e.BQk()}if(2&l){const t=e.oxw().$implicit;e.xp6(1),e.ekj("fdp-upload-collection__cursor","folder"===t.type),e.Q6J("innerText",t.name)}}const ao=function(){return[]};function so(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",65)(1,"fd-form-input-message-group",66)(2,"div",58)(3,"input",67),e.NdJ("blur",function(i){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s._fileNameChange(i,a))})("input",function(i){e.CHM(t);const a=e.oxw().$implicit,s=e.oxw(2);return e.KtG(s._checkName(i,a))}),e.ALo(4,"fdTranslate"),e.qZA(),e.TgZ(5,"span",68),e._uU(6),e.qZA()(),e.TgZ(7,"fd-form-message",69),e._uU(8),e.ALo(9,"fdTranslate"),e.qZA()()()}if(2&l){const t=e.oxw().$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("triggers",e.DdM(12,ao))("isOpen",!!t.sameFilenameState),e.xp6(2),e.Q6J("value",n._getItemName(t))("placeholder",e.lcZ(4,8,"platformUploadCollection.editFileNameInputPlaceholder"))("state",t.sameFilenameState),e.xp6(3),e.Oqu(n._getItemExtension(t)),e.xp6(1),e.Q6J("type",t.sameFilenameState),e.xp6(1),e.hij(" ",e.lcZ(9,10,"file"===t.type?"platformUploadCollection.editFileNameFileAlreadyExistsError":"platformUploadCollection.editFileNameFolderAlreadyExistsError")," ")}}function co(l,o){if(1&l&&(e.TgZ(0,"fdp-table-cell")(1,"div",58),e.YNc(2,no,2,3,"fd-icon",59),e.YNc(3,lo,2,4,"fd-icon",60),e.YNc(4,io,2,3,"ng-container",61),e.qZA(),e.YNc(5,so,10,13,"ng-template",null,62,e.W1O),e.qZA()),2&l){const t=o.$implicit,n=e.MAs(6),i=e.oxw(2);e.xp6(2),e.Q6J("ngIf","folder"===t.type),e.xp6(1),e.Q6J("ngIf","file"===t.type),e.xp6(1),e.Q6J("ngIf",i.disabled||i.readonly||!i._isSelectedItem(t))("ngIfElse",n)}}function ro(l,o){1&l&&e._UZ(0,"fdp-table-cell",70),2&l&&e.Q6J("innerText",o.$implicit.uploadedBy.name)}function po(l,o){1&l&&(e._UZ(0,"fdp-table-cell",70),e.ALo(1,"date")),2&l&&e.Q6J("innerText",e.xi3(1,1,o.$implicit.uploadedOn,"shortDate"))}function mo(l,o){1&l&&(e._UZ(0,"fdp-table-cell",70),e.ALo(1,"convertBytes")),2&l&&e.Q6J("innerText",e.lcZ(1,1,o.$implicit.fileSize))}function _o(l,o){1&l&&e._UZ(0,"fdp-table-cell",70),2&l&&e.Q6J("innerText",o.$implicit.version||"")}function fo(l,o){1&l&&e._UZ(0,"fd-busy-indicator",74),2&l&&e.Q6J("loading",!0)}function uo(l,o){1&l&&(e.TgZ(0,"span",75),e._uU(1),e.ALo(2,"fdTranslate"),e.qZA()),2&l&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"platformUploadCollection.itemStatusSuccessful")," "))}function go(l,o){1&l&&(e.TgZ(0,"span",76),e._uU(1),e.ALo(2,"fdTranslate"),e.qZA()),2&l&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"platformUploadCollection.itemStatusUnsuccessful")," "))}function ho(l,o){if(1&l&&(e.TgZ(0,"fdp-table-cell"),e.YNc(1,fo,1,1,"fd-busy-indicator",71),e.YNc(2,uo,3,3,"span",72),e.YNc(3,go,3,3,"span",73),e.qZA()),2&l){const t=o.$implicit,n=e.oxw(2);e.xp6(1),e.Q6J("ngIf",t.status===n._uploadCollectionItemStatus.LOADING),e.xp6(1),e.Q6J("ngIf",t.status===n._uploadCollectionItemStatus.SUCCESSFUL),e.xp6(1),e.Q6J("ngIf",t.status===n._uploadCollectionItemStatus.UNSUCCESSFUL)}}function xo(l,o){1&l&&(e.TgZ(0,"fdp-table-header"),e._uU(1,"Action"),e.qZA())}function Co(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"button",83),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,a=e.oxw(3);return e.KtG(a._runUploadNewFileAfterFail(i))}),e.ALo(1,"fdTranslate"),e.ALo(2,"fdTranslate"),e.qZA()}if(2&l){const t=e.oxw(4);e.Q6J("label",e.lcZ(1,3,"platformUploadCollection.uploadNewFileAfterFailAction"))("title",e.lcZ(2,5,"platformUploadCollection.uploadNewFileAfterFailAction"))("disabled",t.disabled)}}function To(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"button",83),e.NdJ("click",function(){e.CHM(t);const i=e.oxw().$implicit,a=e.oxw(3);return e.KtG(a._cancelUploadNewFile(i))}),e.ALo(1,"fdTranslate"),e.ALo(2,"fdTranslate"),e.qZA()}if(2&l){const t=e.oxw(4);e.Q6J("label",e.lcZ(1,3,"platformUploadCollection.cancelUploadNewFileAction"))("title",e.lcZ(2,5,"platformUploadCollection.cancelUploadNewFileAction"))("disabled",t.disabled)}}function bo(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"fdp-table-cell")(1,"div",79)(2,"div",80),e.YNc(3,Co,3,7,"button",81),e.YNc(4,To,3,7,"button",81),e.qZA(),e.TgZ(5,"fdp-menu-button",82),e.NdJ("buttonClicked",function(){const a=e.CHM(t).$implicit,s=e.oxw(3);return e.KtG(s._actionButton(a))}),e.ALo(6,"fdTranslate"),e.qZA()()()}if(2&l){const t=o.$implicit,n=e.oxw(3),i=e.MAs(25);e.xp6(3),e.Q6J("ngIf",t.status===n._uploadCollectionItemStatus.UNSUCCESSFUL),e.xp6(1),e.Q6J("ngIf",n.terminationEnabled&&t.status===n._uploadCollectionItemStatus.LOADING),e.xp6(1),e.Q6J("disabled",n.disabled)("title",e.lcZ(6,5,"platformUploadCollection.itemMenuBtnTitle"))("fdpMenuTriggerFor",i)}}function yo(l,o){1&l&&(e.TgZ(0,"fdp-column",77),e.YNc(1,xo,2,0,"fdp-table-header",78),e.YNc(2,bo,7,7,"fdp-table-cell",50),e.qZA())}function Uo(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"fdp-table",48),e.NdJ("rowSelectionChange",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a._onRowSelectionChange(i))}),e.TgZ(1,"fdp-column",49),e.YNc(2,co,7,4,"fdp-table-cell",50),e.qZA(),e.TgZ(3,"fdp-column",51),e.YNc(4,ro,1,1,"fdp-table-cell",52),e.qZA(),e.TgZ(5,"fdp-column",53),e.YNc(6,po,2,4,"fdp-table-cell",52),e.qZA(),e.TgZ(7,"fdp-column",54),e.YNc(8,mo,2,3,"fdp-table-cell",52),e.qZA(),e.TgZ(9,"fdp-column",55),e.YNc(10,_o,1,1,"fdp-table-cell",52),e.qZA(),e.TgZ(11,"fdp-column",56),e.YNc(12,ho,4,3,"fdp-table-cell",50),e.qZA(),e.YNc(13,yo,3,0,"fdp-column",57),e.qZA()}if(2&l){const t=e.oxw();e.Q6J("dataSource",t._visibleList)("loading",null==t.dataSource?null:t.dataSource.isDataLoading)("noHorizontalBorders",!0)("trackBy",t._trackByDocumentId),e.xp6(13),e.Q6J("ngIf",!t.readonly)}}function Fo(l,o){if(1&l&&(e.TgZ(0,"div",84),e._UZ(1,"fd-icon",85),e.TgZ(2,"p",86),e._uU(3),e.ALo(4,"fdTranslate"),e.qZA()()),2&l){const t=e.oxw();e.ekj("active",t._onDragDropArea),e.xp6(3),e.hij(" ",e.lcZ(4,3,"platformUploadCollection.dragDropAreaText")," ")}}function vo(l,o){if(1&l&&(e.TgZ(0,"div",87),e._UZ(1,"fd-icon",88)(2,"h3",70),e.ALo(3,"fdTranslate"),e._UZ(4,"p",70),e.ALo(5,"fdTranslate"),e.qZA()),2&l){const t=e.oxw();e.ekj("invisible",t._showDragDropArea),e.xp6(2),e.Q6J("innerText",t.noDataText||e.lcZ(3,4,"platformUploadCollection.noDataText")),e.xp6(2),e.Q6J("innerText",t.noDataDescription||e.lcZ(5,6,"platformUploadCollection.noDataDescription"))}}function Ao(l,o){if(1&l&&e._UZ(0,"span",70),2&l){const t=e.oxw(2);e.Q6J("innerText",t._itemsPerPage)}}function So(l,o){if(1&l&&e._UZ(0,"fdp-menu-button",97),2&l){const t=e.oxw(2),n=e.MAs(22);e.Q6J("ariaLabelledBy",t.id+"-results")("fdpMenuTriggerFor",n)("label",t._itemsPerPage+"")}}const Io=function(l,o,t){return{from:l,to:o,total:t}};function Lo(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"div",89)(1,"div",90)(2,"span",91),e._uU(3),e.ALo(4,"fdTranslate"),e.qZA(),e.TgZ(5,"fd-pagination",92),e.NdJ("pageChangeStart",function(i){e.CHM(t);const a=e.oxw();return e.KtG(a._pageChanged(i))}),e.qZA()(),e.TgZ(6,"div",93)(7,"span",94)(8,"span",4),e._uU(9),e.ALo(10,"fdTranslate"),e.qZA(),e.YNc(11,Ao,1,1,"span",95),e.qZA(),e.YNc(12,So,1,3,"fdp-menu-button",96),e.qZA()()}if(2&l){const t=e.oxw();e.xp6(2),e.Q6J("id",t.id+"-pagination"),e.xp6(1),e.hij(" ",e.xi3(4,11,"platformUploadCollection.paginationTotal",e.kEZ(16,Io,t._countShowedItems,t._countNotShowedItems,t._totalItems))," "),e.xp6(2),e.Q6J("totalItems",t._totalItems)("displayTotalItems",!1)("itemsPerPage",t._itemsPerPage)("currentPage",t._currentPage),e.uIk("aria-labelledby",t.id+"-pagination"),e.xp6(3),e.Q6J("id",t.id+"-results"),e.xp6(1),e.hij(" ",e.lcZ(10,14,"platformUploadCollection.resultsPerPage")," "),e.xp6(2),e.Q6J("ngIf",0===t._itemsPerPageOptions.length),e.xp6(1),e.Q6J("ngIf",t._itemsPerPageOptions.length>0)}}function No(l,o){if(1&l){const t=e.EpF();e.TgZ(0,"fdp-menu-item",21),e.NdJ("itemSelect",function(){const a=e.CHM(t).$implicit,s=e.oxw();return e.KtG(s._itemsPerPageChange(a.label))}),e._UZ(1,"span",70),e.qZA()}if(2&l){const t=o.$implicit;e.uIk("title","Results per page: "+t.label),e.xp6(1),e.Q6J("innerText",t.label)}}function wo(l,o){if(1&l){const t=e.EpF();e.ynx(0),e.TgZ(1,"fdp-menu-item",21),e.NdJ("itemSelect",function(){e.CHM(t);const i=e.oxw();return e.KtG(i._downloadClicked())}),e._UZ(2,"fd-icon",98),e.ALo(3,"fdTranslate"),e.TgZ(4,"span"),e._uU(5),e.ALo(6,"fdTranslate"),e.qZA()(),e.TgZ(7,"fdp-menu-item",21),e.NdJ("itemSelect",function(){e.CHM(t);const i=e.oxw();return e.KtG(i._openUpdateFileVersion())}),e._UZ(8,"fd-icon",99),e.ALo(9,"fdTranslate"),e.TgZ(10,"span"),e._uU(11),e.ALo(12,"fdTranslate"),e.qZA()(),e.BQk()}2&l&&(e.xp6(2),e.Q6J("title",e.lcZ(3,4,"platformUploadCollection.downloadBtnLabel")),e.xp6(3),e.hij(" ",e.lcZ(6,6,"platformUploadCollection.downloadBtnLabel")," "),e.xp6(3),e.Q6J("title",e.lcZ(9,8,"platformUploadCollection.updateVersionBtnLabel")),e.xp6(3),e.hij(" ",e.lcZ(12,10,"platformUploadCollection.updateVersionBtnLabel")," "))}const q=function(l,o){return{messageStripType:l,payload:o}};function Eo(l,o){if(1&l&&e.GkF(0,38),2&l){const t=e.oxw(3),n=e.MAs(46);e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.WLB(2,q,t._message.messageStripType,t._message.payload))}}function Zo(l,o){if(1&l&&e.GkF(0,38),2&l){const t=e.oxw(3),n=e.MAs(48);e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.WLB(2,q,t._message.messageStripType,t._message.payload))}}function Po(l,o){if(1&l&&e.GkF(0,38),2&l){const t=e.oxw(3),n=e.MAs(50);e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.WLB(2,q,t._message.messageStripType,t._message.payload))}}const N=function(l,o,t){return{payload:l,messageStripType:o,count:t}};function Mo(l,o){if(1&l&&e.GkF(0,38),2&l){const t=e.oxw(3),n=e.MAs(52);e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.kEZ(2,N,t._message.payload,t._message.messageStripType,t._message.count))}}function Do(l,o){if(1&l&&e.GkF(0,38),2&l){const t=e.oxw(3),n=e.MAs(54);e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.kEZ(2,N,t._message.payload,t._message.messageStripType,t._message.count))}}function Jo(l,o){if(1&l&&e.GkF(0,38),2&l){const t=e.oxw(3),n=e.MAs(56);e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.kEZ(2,N,t._message.payload,t._message.messageStripType,t._message.count))}}function Ro(l,o){if(1&l&&e.GkF(0,38),2&l){const t=e.oxw(3),n=e.MAs(58);e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.kEZ(2,N,t._message.payload,t._message.messageStripType,t._message.count))}}function Oo(l,o){if(1&l&&e.GkF(0,38),2&l){const t=e.oxw(3),n=e.MAs(60);e.Q6J("ngTemplateOutlet",n)("ngTemplateOutletContext",e.kEZ(2,N,t._message.payload,t._message.messageStripType,t._message.count))}}function Qo(l,o){if(1&l&&(e.ynx(0,101),e.YNc(1,Eo,1,5,"ng-container",102),e.YNc(2,Zo,1,5,"ng-container",102),e.YNc(3,Po,1,5,"ng-container",102),e.YNc(4,Mo,1,6,"ng-container",102),e.YNc(5,Do,1,6,"ng-container",102),e.YNc(6,Jo,1,6,"ng-container",102),e.YNc(7,Ro,1,6,"ng-container",102),e.YNc(8,Oo,1,6,"ng-container",102),e.BQk()),2&l){const t=e.oxw().messageType,n=e.oxw();e.Q6J("ngSwitch",t),e.xp6(1),e.Q6J("ngSwitchCase",n._messageType.CREATE),e.xp6(1),e.Q6J("ngSwitchCase",n._messageType.UPDATE_VERSION),e.xp6(1),e.Q6J("ngSwitchCase",n._messageType.FILE_RENAME),e.xp6(1),e.Q6J("ngSwitchCase",n._messageType.REMOVE),e.xp6(1),e.Q6J("ngSwitchCase",n._messageType.MOVE),e.xp6(1),e.Q6J("ngSwitchCase",n._messageType.TYPE_MISMATCH),e.xp6(1),e.Q6J("ngSwitchCase",n._messageType.FILE_SIZE),e.xp6(1),e.Q6J("ngSwitchCase",n._messageType.FILE_NAME_LENGTH)}}function Bo(l,o){if(1&l&&e.YNc(0,Qo,9,9,"ng-container",100),2&l){const t=e.oxw();e.Q6J("ngIf",t._message)}}const M=function(l){return{folderName:l}};function zo(l,o){if(1&l&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&l){const t=e.oxw().payload;e.xp6(1),e.hij(" ",e.xi3(2,1,"platformUploadCollection.messageCreateFailed",e.VKq(4,M,t.folder.name))," ")}}function Yo(l,o){if(1&l&&(e._uU(0),e.ALo(1,"fdTranslate")),2&l){const t=e.oxw().payload;e.hij(" ",e.xi3(1,1,"platformUploadCollection.messageCreateSuccess",e.VKq(4,M,t.folder.name))," ")}}function ko(l,o){if(1&l&&(e.YNc(0,zo,3,6,"ng-container",61),e.YNc(1,Yo,2,6,"ng-template",null,103,e.W1O)),2&l){const t=o.messageStripType,n=e.MAs(2);e.Q6J("ngIf","error"===t)("ngIfElse",n)}}function jo(l,o){if(1&l&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&l){const t=e.oxw().payload;e.xp6(1),e.hij(" ",e.xi3(2,1,"platformUploadCollection.messageUpdateVersionFailed",e.VKq(4,M,t.item.name))," ")}}function Ho(l,o){if(1&l&&(e._uU(0),e.ALo(1,"fdTranslate")),2&l){const t=e.oxw().payload;e.hij(" ",e.xi3(1,1,"platformUploadCollection.messageUpdateVersionSuccess",e.VKq(4,M,t.item.name))," ")}}function $o(l,o){if(1&l&&(e.YNc(0,jo,3,6,"ng-container",61),e.YNc(1,Ho,2,6,"ng-template",null,104,e.W1O)),2&l){const t=o.messageStripType,n=e.MAs(2);e.Q6J("ngIf","error"===t)("ngIfElse",n)}}const ue=function(l,o){return{from:l,to:o}};function Go(l,o){if(1&l&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&l){const t=e.oxw().payload;e.xp6(1),e.hij(" ",e.xi3(2,1,"platformUploadCollection.messageFileRenameFailed",e.WLB(4,ue,t.item.name,t.fileName))," ")}}function Wo(l,o){if(1&l&&(e._uU(0),e.ALo(1,"fdTranslate")),2&l){const t=e.oxw().payload;e.hij(" ",e.xi3(1,1,"platformUploadCollection.messageFileRenameSuccess",e.WLB(4,ue,t.item.name,t.fileName))," ")}}function qo(l,o){if(1&l&&(e.YNc(0,Go,3,7,"ng-container",61),e.YNc(1,Wo,2,7,"ng-template",null,105,e.W1O)),2&l){const t=o.messageStripType,n=e.MAs(2);e.Q6J("ngIf","error"===t)("ngIfElse",n)}}const ge=function(l,o){return{foldersCount:l,filesCount:o}};function Vo(l,o){if(1&l&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&l){const t=e.oxw(2).count;e.xp6(1),e.hij(" ",e.xi3(2,1,"platformUploadCollection.messageRemoveFoldersAndFilesFailed",e.WLB(4,ge,t.folder,t.file))," ")}}function Ko(l,o){if(1&l&&(e._uU(0),e.ALo(1,"fdTranslate")),2&l){const t=e.oxw(2).count;e.hij(" ",e.xi3(1,1,"platformUploadCollection.messageRemoveFoldersAndFilesSuccess",e.WLB(4,ge,t.folder,t.file))," ")}}function Xo(l,o){if(1&l&&(e.ynx(0),e.YNc(1,Vo,3,7,"ng-container",61),e.YNc(2,Ko,2,7,"ng-template",null,106,e.W1O),e.BQk()),2&l){const t=e.MAs(3),n=e.oxw().messageStripType;e.xp6(1),e.Q6J("ngIf","error"===n)("ngIfElse",t)}}const he=function(l){return{foldersCount:l}};function en(l,o){if(1&l&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&l){const t=e.oxw(2).count;e.xp6(1),e.hij(" ",e.xi3(2,1,"platformUploadCollection.messageRemoveFoldersFailed",e.VKq(4,he,t.folder))," ")}}function tn(l,o){if(1&l&&(e._uU(0),e.ALo(1,"fdTranslate")),2&l){const t=e.oxw(2).count;e.hij(" ",e.xi3(1,1,"platformUploadCollection.messageRemoveFoldersSuccess",e.VKq(4,he,t.folder))," ")}}function on(l,o){if(1&l&&(e.ynx(0),e.YNc(1,en,3,6,"ng-container",61),e.YNc(2,tn,2,6,"ng-template",null,107,e.W1O),e.BQk()),2&l){const t=e.MAs(3),n=e.oxw().messageStripType;e.xp6(1),e.Q6J("ngIf","error"===n)("ngIfElse",t)}}const xe=function(l){return{filesCount:l}};function nn(l,o){if(1&l&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&l){const t=e.oxw(2).count;e.xp6(1),e.hij(" ",e.xi3(2,1,"platformUploadCollection.messageRemoveFilesFailed",e.VKq(4,xe,t.file))," ")}}function ln(l,o){if(1&l&&(e._uU(0),e.ALo(1,"fdTranslate")),2&l){const t=e.oxw(2).count;e.hij(" ",e.xi3(1,1,"platformUploadCollection.messageRemoveFilesSuccess",e.VKq(4,xe,t.file))," ")}}function an(l,o){if(1&l&&(e.ynx(0),e.YNc(1,nn,3,6,"ng-container",61),e.YNc(2,ln,2,6,"ng-template",null,108,e.W1O),e.BQk()),2&l){const t=e.MAs(3),n=e.oxw().messageStripType;e.xp6(1),e.Q6J("ngIf","error"===n)("ngIfElse",t)}}const Ce=function(l){return{name:l}};function sn(l,o){if(1&l&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&l){const t=e.oxw(2).payload;e.xp6(1),e.hij(" ",e.xi3(2,1,"platformUploadCollection.messageRemoveFileOrFolderFailed",e.VKq(4,Ce,t.items[0].name))," ")}}function cn(l,o){if(1&l&&(e._uU(0),e.ALo(1,"fdTranslate")),2&l){const t=e.oxw(2).payload;e.hij(" ",e.xi3(1,1,"platformUploadCollection.messageRemoveFileOrFolderSuccess",e.VKq(4,Ce,t.items[0].name))," ")}}function dn(l,o){if(1&l&&(e.ynx(0),e.YNc(1,sn,3,6,"ng-container",61),e.YNc(2,cn,2,6,"ng-template",null,109,e.W1O),e.BQk()),2&l){const t=e.MAs(3),n=e.oxw().messageStripType;e.xp6(1),e.Q6J("ngIf","error"===n)("ngIfElse",t)}}function rn(l,o){if(1&l&&(e.YNc(0,Xo,4,2,"ng-container",10),e.YNc(1,on,4,2,"ng-container",10),e.YNc(2,an,4,2,"ng-container",10),e.YNc(3,dn,4,2,"ng-container",10)),2&l){const t=o.payload,n=o.count;e.Q6J("ngIf",t.items.length>1&&n.folder&&n.file),e.xp6(1),e.Q6J("ngIf",t.items.length>1&&n.folder&&!n.file),e.xp6(1),e.Q6J("ngIf",t.items.length>1&&n.file&&!n.folder),e.xp6(1),e.Q6J("ngIf",1===t.items.length)}}const Te=function(l,o,t){return{foldersCount:l,filesCount:o,to:t}};function pn(l,o){if(1&l&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&l){const t=e.oxw(2),n=t.payload,i=t.count;e.xp6(1),e.hij(" ",e.xi3(2,1,n.to?"platformUploadCollection.messageMoveFoldersAndFilesFailed":"platformUploadCollection.messageMoveRootFoldersAndFilesFailed",e.kEZ(4,Te,i.folder,i.file,null==n.to?null:n.to.name))," ")}}function mn(l,o){if(1&l&&(e._uU(0),e.ALo(1,"fdTranslate")),2&l){const t=e.oxw(2),n=t.payload,i=t.count;e.hij(" ",e.xi3(1,1,n.to?"platformUploadCollection.messageMoveFoldersAndFilesSuccess":"platformUploadCollection.messageMoveRootFoldersAndFilesSuccess",e.kEZ(4,Te,i.folder,i.file,null==n.to?null:n.to.name))," ")}}function _n(l,o){if(1&l&&(e.ynx(0),e.YNc(1,pn,3,8,"ng-container",61),e.YNc(2,mn,2,8,"ng-template",null,110,e.W1O),e.BQk()),2&l){const t=e.MAs(3),n=e.oxw().messageStripType;e.xp6(1),e.Q6J("ngIf","error"===n)("ngIfElse",t)}}const be=function(l,o){return{foldersCount:l,to:o}};function fn(l,o){if(1&l&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&l){const t=e.oxw(2),n=t.payload,i=t.count;e.xp6(1),e.hij(" ",e.xi3(2,1,n.to?"platformUploadCollection.messageMoveFoldersFailed":"platformUploadCollection.messageMoveRootFoldersFailed",e.WLB(4,be,i.folder,null==n.to?null:n.to.name))," ")}}function un(l,o){if(1&l&&(e._uU(0),e.ALo(1,"fdTranslate")),2&l){const t=e.oxw(2),n=t.payload;e.hij(" ",e.xi3(1,1,n.to?"platformUploadCollection.messageMoveFoldersSuccess":"platformUploadCollection.messageMoveRootFoldersSuccess",e.WLB(4,be,t.count.folder,null==n.to?null:n.to.name))," ")}}function gn(l,o){if(1&l&&(e.ynx(0),e.YNc(1,fn,3,7,"ng-container",61),e.YNc(2,un,2,7,"ng-template",null,111,e.W1O),e.BQk()),2&l){const t=e.MAs(3),n=e.oxw().messageStripType;e.xp6(1),e.Q6J("ngIf","error"===n)("ngIfElse",t)}}const ye=function(l,o){return{filesCount:l,to:o}};function hn(l,o){if(1&l&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&l){const t=e.oxw(2),n=t.payload,i=t.count;e.xp6(1),e.hij(" ",e.xi3(2,1,n.to?"platformUploadCollection.messageMoveFilesFailed":"platformUploadCollection.messageMoveRootFilesFailed",e.WLB(4,ye,i.file,null==n.to?null:n.to.name))," ")}}function xn(l,o){if(1&l&&(e._uU(0),e.ALo(1,"fdTranslate")),2&l){const t=e.oxw(2),n=t.payload;e.hij(" ",e.xi3(1,1,n.to?"platformUploadCollection.messageMoveFilesSuccess":"platformUploadCollection.messageMoveRootFilesSuccess",e.WLB(4,ye,t.count.file,null==n.to?null:n.to.name))," ")}}function Cn(l,o){if(1&l&&(e.ynx(0),e.YNc(1,hn,3,7,"ng-container",61),e.YNc(2,xn,2,7,"ng-template",null,112,e.W1O),e.BQk()),2&l){const t=e.MAs(3),n=e.oxw().messageStripType;e.xp6(1),e.Q6J("ngIf","error"===n)("ngIfElse",t)}}const Ue=function(l,o){return{name:l,to:o}};function Tn(l,o){if(1&l&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&l){const t=e.oxw(2).payload;e.xp6(1),e.hij(" ",e.xi3(2,1,t.to?"platformUploadCollection.messageMoveFileOrFolderFailed":"platformUploadCollection.messageMoveRootFileOrFolderFailed",e.WLB(4,Ue,t.items[0].name,null==t.to?null:t.to.name))," ")}}function bn(l,o){if(1&l&&(e._uU(0),e.ALo(1,"fdTranslate")),2&l){const t=e.oxw(2).payload;e.hij(" ",e.xi3(1,1,t.to?"platformUploadCollection.messageMoveFileOrFolderSuccess":"platformUploadCollection.messageMoveRootFileOrFolderSuccess",e.WLB(4,Ue,t.items[0].name,null==t.to?null:t.to.name))," ")}}function yn(l,o){if(1&l&&(e.ynx(0),e.YNc(1,Tn,3,7,"ng-container",61),e.YNc(2,bn,2,7,"ng-template",null,113,e.W1O),e.BQk()),2&l){const t=e.MAs(3),n=e.oxw().messageStripType;e.xp6(1),e.Q6J("ngIf","error"===n)("ngIfElse",t)}}function Un(l,o){if(1&l&&(e.YNc(0,_n,4,2,"ng-container",10),e.YNc(1,gn,4,2,"ng-container",10),e.YNc(2,Cn,4,2,"ng-container",10),e.YNc(3,yn,4,2,"ng-container",10)),2&l){const t=o.payload,n=o.count;e.Q6J("ngIf",t.items.length>1&&n.folder&&n.file),e.xp6(1),e.Q6J("ngIf",t.items.length>1&&n.folder&&!n.file),e.xp6(1),e.Q6J("ngIf",t.items.length>1&&n.file&&!n.folder),e.xp6(1),e.Q6J("ngIf",1===t.items.length)}}const Fn=function(l,o){return{filesCount:l,allowedTypes:o}};function vn(l,o){if(1&l&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&l){const t=e.oxw().payload,n=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,"platformUploadCollection.messageFileTypeMismatchPlural",e.WLB(4,Fn,t.items.length,n._getAllowedTypes()))," ")}}const An=function(l,o){return{fileName:l,allowedTypes:o}};function Sn(l,o){if(1&l&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&l){const t=e.oxw().payload,n=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,"platformUploadCollection.messageFileTypeMismatchSingular",e.WLB(4,An,t.items[0].name,n._getAllowedTypes()))," ")}}function In(l,o){if(1&l&&(e.YNc(0,vn,3,7,"ng-container",10),e.YNc(1,Sn,3,7,"ng-container",10)),2&l){const t=o.payload;e.Q6J("ngIf",t.items.length>1),e.xp6(1),e.Q6J("ngIf",1===t.items.length)}}const Ln=function(l,o){return{filesCount:l,maxFileSize:o}};function Nn(l,o){if(1&l&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&l){const t=e.oxw().payload,n=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,"platformUploadCollection.messageFileSizeExceededPlural",e.WLB(4,Ln,t.items.length,n.maxFileSize||0))," ")}}const wn=function(l,o){return{fileName:l,maxFileSize:o}};function En(l,o){if(1&l&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&l){const t=e.oxw().payload,n=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,"platformUploadCollection.messageFileSizeExceededSingular",e.WLB(4,wn,t.items[0].name,n.maxFileSize||0))," ")}}function Zn(l,o){if(1&l&&(e.YNc(0,Nn,3,7,"ng-container",10),e.YNc(1,En,3,7,"ng-container",10)),2&l){const t=o.payload;e.Q6J("ngIf",t.items.length>1),e.xp6(1),e.Q6J("ngIf",1===t.items.length)}}const Pn=function(l,o){return{filesCount:l,maxFilenameLength:o}};function Mn(l,o){if(1&l&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&l){const t=e.oxw().payload,n=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,"platformUploadCollection.messageFileNameLengthExceededPlural",e.WLB(4,Pn,t.items.length,n.maxFilenameLength||0))," ")}}const Dn=function(l,o){return{fileName:l,maxFilenameLength:o}};function Jn(l,o){if(1&l&&(e.ynx(0),e._uU(1),e.ALo(2,"fdTranslate"),e.BQk()),2&l){const t=e.oxw().payload,n=e.oxw();e.xp6(1),e.hij(" ",e.xi3(2,1,"platformUploadCollection.messageFileNameLengthExceededSingular",e.WLB(4,Dn,t.items[0].name,n.maxFilenameLength||0))," ")}}function Rn(l,o){if(1&l&&(e.YNc(0,Mn,3,7,"ng-container",10),e.YNc(1,Jn,3,7,"ng-container",10)),2&l){const t=o.payload;e.Q6J("ngIf",t.items.length>1),e.xp6(1),e.Q6J("ngIf",1===t.items.length)}}let On=0;class F{constructor(o,t,n,i){this._dialogService=o,this._filesValidatorService=t,this._cdr=n,this._injector=i,this.id="fdp-upload-collection-id-"+On++,this.fileTypes=[],this.mimeTypes=[],this.disabled=!1,this.readonly=!1,this.hierarchy=!0,this.enablePagination=!0,this.terminationEnabled=!0,this.multiple=!0,this.showSearch=!0,this.sameFileNameAllowed=!1,this.typeMismatch=new e.vpe,this.filenameLengthExceed=new e.vpe,this.fileSizeExceed=new e.vpe,this._uploadCollectionItemStatus=h,this._breadcrumbList=[],this._currentPage=1,this._itemsPerPage=10,this._itemsPerPageOptions=[],this._totalItems=0,this._countShowedItems=0,this._countNotShowedItems=0,this._visibleList=[],this.selectedItems=[],this._searchText="",this._showDragDropArea=!1,this._onDragDropArea=!1,this._messageType=m,this._messageStripType=p,this._columnAlign=G.Hg,this._selectionMode=G.oW,this._contentDensityManuallySet=!1,this._imageExtensions=[".apng",".bmp",".gif",".ico",".cur",".jpg",".jpeg",".jfif",".pjpeg",".pjp",".png",".svg",".tif",".tiff",".webp",".flif",".cr2",".jxr",".psd",".bpg",".jp2",".jpm",".jpx",".heic",".dcm"],this._onDestroy$=new L.x}set itemsPerPage(o){if("number"==typeof o)return this._itemsPerPage=o,void this._match();const t=o.find(n=>n.default);if(this._itemsPerPageOptions=o,t)return this._itemsPerPage=t.label,void this._match();this._itemsPerPage=o[Math.round(o.length/2)].label,this._match()}get itemsPerPage(){return this._itemsPerPage}set dataSource(o){o&&this._initializeDS(o)}get dataSource(){return this._dataSource}ngOnChanges(o){o.contentDensity&&(this._contentDensityManuallySet=!0)}ngOnDestroy(){this._onDestroy$.next(),this._onDestroy$.complete(),this._dsSubscription?.unsubscribe(),this.dataSource.close()}showMessage(o,t){this._message=function xt(l,o){const t={messageType:l,messageStripType:o.type,payload:o.payload},n=o.payload.items;return n&&n.length>0&&(t.count=function ht(l){return l.reduce((o,t)=>(o[t.type]+=1,o),{file:0,folder:0})}(n)),t}(o,t)}_fileNameChange(o,t){const i=o.target.value.trim(),a="file"===t.type?`${i}.${t.name.split(".").pop()}`:i;if(t.name===a)return;if(this.maxFilenameLength&&i.length>this.maxFilenameLength){const r={items:[{...t,name:a}]},x=new me(this,r);return this.showMessage(m.FILE_NAME_LENGTH,{payload:r,type:p.ERROR}),void this.filenameLengthExceed.emit(x)}if(t.sameFilenameState)return;const s={parentFolderId:this._getCurrentFolderId(),fileName:a,item:{...t}};this.dataSource.fileRenamed(s).pipe((0,u.b)(()=>{this.selectedItems=[],this._match()})).subscribe({next:()=>{this.showMessage(m.FILE_RENAME,{payload:s,type:p.SUCCESS})},error:()=>{this.showMessage(m.FILE_RENAME,{payload:s,type:p.ERROR})}})}_checkName(o,t){const i=o.target.value.trim(),a="file"===t.type?`${i}.${t.name.split(".").pop()}`:i,s=this._getList().some(d=>t.documentId!==d.documentId&&d.name===a);this.sameFileNameAllowed||!s?delete t.sameFilenameState:t.sameFilenameState="error"}_openUploadFiles(){const o=this._uploadFilesRef.nativeElement;o&&o.click()}_openUpdateFileVersion(){if(this.disabled)return;const o=this._updateVersionRef.nativeElement;o&&(this._currentUpdateFileVersion=this._activeItem,o.click())}_selectHandler(o){this._validateFiles(o),this._propagateFiles()}_handleDrop(o){this._validatedFiles=o,this._propagateFiles()}_openNewFolderDialog(){this._dialogService.open(I,{responsivePadding:!0,backdropClickCloseable:!1,height:"320px",data:{currentFolder:this._getCurrentFolder(),maxFilenameLength:this.maxFilenameLength}}).afterClosed.pipe((0,g.q)(1)).subscribe(t=>{const n=this._generateTemporaryNewFolder(t),i=this._getCurrentFolderId(),a={parentFolderId:i,folder:{...n}};this._findParentFolderAndAddTemporaryFiles(i,[n]),this.dataSource.newFolder(a).pipe((0,u.b)(()=>this._match())).subscribe({next:()=>{this.showMessage(m.CREATE,{payload:a,type:p.SUCCESS})},error:()=>{this.showMessage(m.CREATE,{payload:a,type:p.ERROR})}})})}_moveToClicked(o){if(this.disabled)return;const t=this._activeItem,n=this._getCurrentFolder(),i=o?this.selectedItems:t?[t]:[];this._dialogService.open(Z,{responsivePadding:!0,verticalPadding:!1,backdropClickCloseable:!1,height:"350px",data:{items:this.dataSource.dataProvider.items,currentFolder:n,movableFolders:i.filter(s=>"folder"===s?.type),maxFilenameLength:this.maxFilenameLength}},this._injector).afterClosed.pipe((0,g.q)(1)).subscribe(({selectedFolder:s,parentFolderId:d,folderName:r})=>{const x={from:n,to:s,items:i};r&&(x.newFolder={parentFolderId:d,folderName:r}),this.dataSource.moveTo(x).pipe((0,u.b)(()=>{this.selectedItems=[],this._match()})).subscribe({next:()=>{this.showMessage(m.MOVE,{payload:x,type:p.SUCCESS})},error:()=>{this.showMessage(m.MOVE,{payload:x,type:p.ERROR})}})},s=>{console.error(s)})}_downloadClicked(o){if(this.disabled)return;const t={...this._activeItem};this.dataSource.download({items:o?this.selectedItems:[t]}).subscribe()}_remove(o){if(this.disabled)return;const t={...this._activeItem},n=o?this.selectedItems:[t],i={parentFolderId:this._getCurrentFolderId(),items:n};this.dataSource.delete(i).pipe((0,u.b)(()=>{this.selectedItems=[],this._match()})).subscribe({next:()=>{this.showMessage(m.REMOVE,{payload:i,type:p.SUCCESS})},error:()=>{this.showMessage(m.REMOVE,{payload:i,type:p.ERROR})}})}_runUploadNewFileAfterFail(o){this.dataSource.runAfterFail({parentFolderId:this._getCurrentFolderId(),items:[o]}).pipe((0,u.b)(()=>this._match())).subscribe()}_cancelUploadNewFile(o){this.dataSource.cancelUploadNewFile({parentFolderId:this._getCurrentFolderId(),item:o}).pipe((0,u.b)(()=>this._match())).subscribe()}_messageStripDismiss(){this._message=void 0}_openFolder(o){"file"===o.type||!o.documentId||(this._breadcrumbList.length>0&&(this._breadcrumbList[this._breadcrumbList.length-1].clikable=!0),this._breadcrumbList.push({clikable:!1,folderId:o.documentId,folderName:o.name}),this._match())}_actionButton(o){this._activeItem=o}_onDropzone(o){this._showDragDropArea=!0,this._onDragDropArea=o}_dragDropCancel(){this._showDragDropArea=!1}_breadcrumbGoTo(o,t){if(o.preventDefault(),o.stopPropagation(),!Number.isInteger(t))return this._breadcrumbList=[],void this._match();this._breadcrumbList=this._breadcrumbList.slice(0,t+1),this._breadcrumbList[this._breadcrumbList.length-1].clikable=!1,this._match()}_pageChanged(o){!this.enablePagination||this._currentPage===o||(this.selectedItems=[],this._currentPage=o,this._match())}_itemsPerPageChange(o){o!==this._itemsPerPage&&(this._itemsPerPage=o,this._currentPage*this._itemsPerPage>this._totalItems&&(this._currentPage=Math.ceil(this._totalItems/this._itemsPerPage)),this._match())}_searchInputChanged(){this._match()}_onRowSelectionChange(o){this.sameFileNameAllowed||this._clearItemSameFilenameState(o.removed[0]),this.selectedItems=o.selection}_getItemName(o){return"folder"===o.type?o.name:o.name.split(".").slice(0,-1).join(".")}_getItemExtension(o){return"folder"===o.type?"":`.${o.name.split(".").pop()}`}_getIconByType(o){const t=`.${o.name.split(".").pop()}`;return this._imageExtensions.includes(t)?"background":"document"}_showIfSelectedOnlyFiles(){return!this.selectedItems.some(o=>"folder"===o.type)}_isSelectedItem(o){return this.selectedItems.some(t=>t.documentId===o.documentId)}_getList(){return this.dataSource.dataProvider.list}_trackByDocumentId(o,t){return t.documentId}_getAllowedTypes(){return`${this.fileTypes?.join(", ")}${this.fileTypes?.length&&this.mimeTypes?.length?", ":""}${this.mimeTypes?.join(", ")}`}_validateFiles(o){this._validatedFiles=this._filesValidatorService.validation(o,{maxFileSize:this.maxFileSize,maxFileNameLength:this.maxFilenameLength,fileTypes:this.fileTypes,mimeTypes:this.mimeTypes})}_propagateFiles(){const{validFiles:o,typeMismatch:t,filenameLengthExceed:n,fileSizeExceed:i}=this._validatedFiles;if(o&&(this._currentUpdateFileVersion?this._updateFileVersion(o[0]):this._uploadNewFiles(o)),t){const a={items:t},s=new ut(this,a);this.showMessage(m.TYPE_MISMATCH,{payload:a,type:p.ERROR}),this.typeMismatch.emit(s)}if(n){const a={items:n},s=new me(this,a);this.showMessage(m.FILE_NAME_LENGTH,{payload:a,type:p.ERROR}),this.filenameLengthExceed.emit(s)}if(i){const a={items:i},s=new gt(this,a);this.showMessage(m.FILE_SIZE,{payload:a,type:p.ERROR}),this.fileSizeExceed.emit(s)}}_updateFileVersion(o){const t=this._getCurrentFolderId(),n={...this._currentUpdateFileVersion,status:h.LOADING},i={parentFolderId:this._getCurrentFolderId(),item:this._currentUpdateFileVersion,newItem:o};this._findParentFolderAndUpdateItem(t,n),this.dataSource.updateVersion(i).pipe((0,u.b)(()=>this._match())).subscribe({next:()=>{this.showMessage(m.UPDATE_VERSION,{payload:i,type:p.SUCCESS}),this._currentUpdateFileVersion=void 0},error:()=>{this.showMessage(m.UPDATE_VERSION,{payload:i,type:p.ERROR})}})}_uploadNewFiles(o){const t=this._getCurrentFolderId(),n=this._generateTemporaryNewFiles(o);this._findParentFolderAndAddTemporaryFiles(t,n),this.dataSource.upload({parentFolderId:t,items:n.map(i=>({...i}))}).pipe((0,u.b)(()=>this._match())).subscribe()}_getCurrentFolder(){const o=this._getCurrentFolderId();return o?this._findFolderById(o):void 0}_getCurrentFolderId(){return 0===this._breadcrumbList.length?void 0:this._breadcrumbList[this._breadcrumbList.length-1].folderId}_findFolderById(o,t=this.dataSource.dataProvider.items){let n;return JSON.stringify(t,(i,a)=>(a&&a.documentId===o&&(n=a),a)),n}_findParentFolderAndUpdateItem(o,t,n=this.dataSource.dataProvider.items){if(!o){const i=n.findIndex(a=>a.documentId===t.documentId);return-1!==i&&(n[i]=t),void this._match()}for(let i=0;i<n.length;i++){const a=n[i];if("folder"===a.type)if(a.documentId===o){if(-1!==a.files.findIndex(d=>d.documentId===t.documentId)){a.files[i]=t,this._match();break}}else this._findParentFolderAndUpdateItem(o,t,a.files)}}_findParentFolderAndAddTemporaryFiles(o,t,n=this.dataSource.dataProvider.items){if(!o)return n.push(...t),void this._match();for(let i=0;i<n.length;i++){const a=n[i];if("folder"===a.type){if(a.documentId===o){a.files.push(...t),this._match();break}this._findParentFolderAndAddTemporaryFiles(o,t,a.files)}}}_generateTemporaryNewFiles(o){return o.map(t=>({documentId:(0,_.k$)(),type:"file",name:t.name,uploadedBy:{id:(0,_.k$)(),name:"You"},uploadedOn:new Date,fileSize:t.size,version:1,url:"",status:h.LOADING,file:t}))}_generateTemporaryNewFolder(o){return{documentId:(0,_.k$)(),type:"folder",name:o,uploadedBy:{id:Date.now(),name:"You"},uploadedOn:new Date,files:[],status:h.LOADING}}_initializeDS(o){this._visibleList=[],(0,y.Z9)(this.dataSource)&&(this.dataSource.close(),this._dsSubscription&&(this._dsSubscription.unsubscribe(),this._dsSubscription=void 0)),this._dataSource=this._openDataStream(o),this._match()}_openDataStream(o){const t=this._toDataStream(o);if(void 0===t)throw new Error("[dataSource] source did not match an array, Observable, or DataSource");return this._dsSubscription=t.open().subscribe(n=>{this._visibleList=n,this._totalItems=t.dataProvider.totalItems,this._countUnvisibleItems()}),t}_toDataStream(o){if((0,y.Z9)(o))return o}_match(){const o=new Map;o.set("folderId",this._getCurrentFolderId()),o.set("page",this._currentPage),o.set("searchText",this._searchText||"*"),this.enablePagination&&o.set("limit",this._itemsPerPage),this.dataSource.match(o)}_countUnvisibleItems(){const o=this._itemsPerPage;this._countShowedItems=this._currentPage*o-o+1,this._countNotShowedItems=this._countShowedItems+this._visibleList.length-1}_clearItemSameFilenameState(o){if(o)for(const t of this._getList())if(t.documentId===o.documentId){delete t.sameFilenameState;break}}static#e=this.\u0275fac=function(t){return new(t||F)(e.Y36(S.xA),e.Y36(v),e.Y36(e.sBO),e.Y36(e.zs3))};static#t=this.\u0275cmp=e.Xpm({type:F,selectors:[["fdp-upload-collection"]],viewQuery:function(t,n){if(1&t&&(e.Gf(Ot,5),e.Gf(Qt,5)),2&t){let i;e.iGM(i=e.CRH())&&(n._uploadFilesRef=i.first),e.iGM(i=e.CRH())&&(n._updateVersionRef=i.first)}},inputs:{id:"id",itemsPerPage:"itemsPerPage",dataSource:"dataSource",fileTypes:"fileTypes",maxFileSize:"maxFileSize",maxFilenameLength:"maxFilenameLength",mimeTypes:"mimeTypes",noDataText:"noDataText",noDataDescription:"noDataDescription",disabled:"disabled",readonly:"readonly",hierarchy:"hierarchy",enablePagination:"enablePagination",terminationEnabled:"terminationEnabled",multiple:"multiple",showSearch:"showSearch",sameFileNameAllowed:"sameFileNameAllowed"},outputs:{typeMismatch:"typeMismatch",filenameLengthExceed:"filenameLengthExceed",fileSizeExceed:"fileSizeExceed"},features:[e.TTD],decls:61,vars:36,consts:[[1,"fdp-upload-collection",3,"id"],[3,"type","onDismiss",4,"ngIf"],[1,"fdp-upload-collection__toolbar"],[2,"flex","1 auto"],[3,"id"],["multipleBreadcrumbs",""],["singleBreadcrumb",""],[4,"ngTemplateOutlet"],[4,"ngFor","ngForOf"],[2,"max-width","3rem"],[4,"ngIf"],[1,"fdp-upload-collection__table--wrapper"],["fdpUploadCollectionDragnDrop","",1,"fdp-upload-collection__table",3,"fileTypes","maxFilenameLength","maxFileSize","mimeTypes","dragndrop","disabled","multiple","fileChanged","cancel","onDropzone"],["selectionMode","multiple","emptyTableMessage","",3,"dataSource","loading","noHorizontalBorders","trackBy","rowSelectionChange",4,"ngIf"],["class","fdp-upload-collection__dragdrop-area",3,"active",4,"ngIf"],["class","fdp-upload-collection__no-data",3,"invisible",4,"ngIf"],["class","fdp-upload-collection__table-footer",4,"ngIf"],["xPosition","before"],["itemsPerPageMenu",""],[3,"itemSelect",4,"ngFor","ngForOf"],["menuActions",""],[3,"itemSelect"],["glyph","folder-blank",1,"fdp-upload-collection__fd-icon",3,"title"],["glyph","delete",1,"fdp-upload-collection__fd-icon",3,"title"],["type","file","fdFileSelect","",1,"fdp-upload-collection__hidden",3,"multiple","disabled","fileSelected"],["fileInput",""],["type","file","fdFileSelect","",1,"fdp-upload-collection__hidden",3,"disabled","multiple","fileSelected"],["updateVersionInput",""],["message",""],["messageNewFolder",""],["messageUpdateVersion",""],["messageFileRename",""],["messageRemove",""],["messageMove",""],["messageTypeMismatch",""],["messageFileSize",""],["messageFilenameLength",""],[3,"type","onDismiss"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["href","#","fd-link","",3,"click"],["clickableBreadcrumb",""],["textBreadcrumb",""],["glyph","search",3,"ngModel","ariaLabelledby","placeholder","ngModelChange",4,"ngIf"],["glyph","search",3,"ngModel","ariaLabelledby","placeholder","ngModelChange"],["fd-toolbar-item","","fd-button","","fdType","ghost",3,"disabled","label","title","click"],["fd-toolbar-item","","fd-button","","fdType","transparent",3,"disabled","label","title","click",4,"ngIf"],["fd-toolbar-item","","fd-button","","fdType","transparent",3,"disabled","label","title","click"],["fd-toolbar-item","","fd-button","","fdType","ghost",3,"disabled","label","title","click",4,"ngIf"],["selectionMode","multiple","emptyTableMessage","",3,"dataSource","loading","noHorizontalBorders","trackBy","rowSelectionChange"],["name","name","label","Name","width","8rem"],[4,"fdpCellDef"],["name","uploadedBy","label","Uploaded by","width","5rem"],[3,"innerText",4,"fdpCellDef"],["name","uploadedOn","label","Uploaded on","width","5rem"],["name","size","label","File size","width","5rem"],["name","version","label","Version","width","5rem"],["name","status","label","Status","width","5rem"],["name","action","width","5rem","align","end",4,"ngIf"],[1,"fdp-upload-collection__vertical-align-center"],["class","fdp-upload-collection__fd-icon","glyph","folder-blank",3,"title",4,"ngIf"],["class","fdp-upload-collection__fd-icon",3,"glyph","title",4,"ngIf"],[4,"ngIf","ngIfElse"],["editMode",""],[1,"fdp-upload-collection__fd-icon",3,"glyph","title"],[3,"innerText","click"],["fd-form-item",""],[3,"triggers","isOpen"],["fd-form-control","","type","text",3,"value","placeholder","state","blur","input"],[1,"fdp-upload-collection__item_extension"],[3,"type"],[3,"innerText"],["ariaLabel","Status: Loading","ariaLive","polite","size","s",3,"loading",4,"ngIf"],["fd-object-status","","status","positive",4,"ngIf"],["fd-object-status","","status","negative",4,"ngIf"],["ariaLabel","Status: Loading","ariaLive","polite","size","s",3,"loading"],["fd-object-status","","status","positive"],["fd-object-status","","status","negative"],["name","action","width","5rem","align","end"],[4,"fdpHeaderCellDef"],[1,"fdp-upload-collection__actions"],[1,"fdp-upload-collection__actions--status"],["fd-button","","fdType","ghost",3,"label","title","disabled","click",4,"ngIf"],["icon","overflow","type","transparent",3,"disabled","title","fdpMenuTriggerFor","buttonClicked"],["fd-button","","fdType","ghost",3,"label","title","disabled","click"],[1,"fdp-upload-collection__dragdrop-area"],["glyph","upload-to-cloud",1,"fdp-upload-collection__dragdrop-area--icon"],[1,"fdp-upload-collection__dragdrop-area--text"],[1,"fdp-upload-collection__no-data"],["glyph","document"],[1,"fdp-upload-collection__table-footer"],[1,"fdp-upload-collection__pagination"],[1,"fdp-upload-collection__pagination--total",3,"id"],[3,"totalItems","displayTotalItems","itemsPerPage","currentPage","pageChangeStart"],[1,"fdp-upload-collection__results"],[1,"fdp-upload-collection__results--title"],[3,"innerText",4,"ngIf"],["type","ghost",3,"ariaLabelledBy","fdpMenuTriggerFor","label",4,"ngIf"],["type","ghost",3,"ariaLabelledBy","fdpMenuTriggerFor","label"],["glyph","download",1,"fdp-upload-collection__fd-icon",3,"title"],["glyph","drill-up",1,"fdp-upload-collection__fd-icon",3,"title"],[3,"ngSwitch",4,"ngIf"],[3,"ngSwitch"],[3,"ngTemplateOutlet","ngTemplateOutletContext",4,"ngSwitchCase"],["foldersCreated",""],["versionUpdated",""],["fileRenamed",""],["foldersAndFilesRemoved",""],["foldersRemoved",""],["filesRemoved",""],["oneItemRemoved",""],["filesAndFoldersMovedTo",""],["foldersMovedTo",""],["filesMovedTo",""],["oneItemMovedTo",""]],template:function(t,n){if(1&t&&(e.TgZ(0,"div",0),e.YNc(1,zt,2,8,"fd-message-strip",1),e.TgZ(2,"fd-toolbar",2)(3,"div",3)(4,"fd-breadcrumb",4)(5,"fd-breadcrumb-item"),e.YNc(6,Yt,3,3,"ng-template",null,5,e.W1O),e.YNc(8,jt,3,6,"ng-template",null,6,e.W1O),e.YNc(10,Ht,1,0,"ng-container",7),e.qZA(),e.YNc(11,qt,6,1,"fd-breadcrumb-item",8),e.qZA()(),e._UZ(12,"fd-toolbar-spacer",9),e.YNc(13,eo,3,2,"ng-container",10),e.YNc(14,oo,8,15,"ng-container",10),e.qZA(),e.TgZ(15,"div",11)(16,"div",12),e.NdJ("fileChanged",function(a){return n._handleDrop(a)})("cancel",function(){return n._dragDropCancel()})("onDropzone",function(a){return n._onDropzone(a)}),e.YNc(17,Uo,14,5,"fdp-table",13),e.YNc(18,Fo,5,5,"div",14),e.YNc(19,vo,6,8,"div",15),e.qZA(),e.YNc(20,Lo,13,20,"div",16),e.qZA()(),e.TgZ(21,"fdp-menu",17,18),e.YNc(23,No,2,2,"fdp-menu-item",19),e.qZA(),e.TgZ(24,"fdp-menu",17,20)(26,"fdp-menu-item",21),e.NdJ("itemSelect",function(){return n._moveToClicked()}),e._UZ(27,"fd-icon",22),e.ALo(28,"fdTranslate"),e.TgZ(29,"span"),e._uU(30),e.ALo(31,"fdTranslate"),e.qZA()(),e.YNc(32,wo,13,12,"ng-container",10),e.TgZ(33,"fdp-menu-item",21),e.NdJ("itemSelect",function(){return n._remove()}),e._UZ(34,"fd-icon",23),e.ALo(35,"fdTranslate"),e.TgZ(36,"span"),e._uU(37),e.ALo(38,"fdTranslate"),e.qZA()()(),e.TgZ(39,"input",24,25),e.NdJ("fileSelected",function(a){return n._selectHandler(a)}),e.qZA(),e.TgZ(41,"input",26,27),e.NdJ("fileSelected",function(a){return n._selectHandler(a)}),e.qZA(),e.YNc(43,Bo,1,1,"ng-template",null,28,e.W1O),e.YNc(45,ko,3,2,"ng-template",null,29,e.W1O),e.YNc(47,$o,3,2,"ng-template",null,30,e.W1O),e.YNc(49,qo,3,2,"ng-template",null,31,e.W1O),e.YNc(51,rn,4,4,"ng-template",null,32,e.W1O),e.YNc(53,Un,4,4,"ng-template",null,33,e.W1O),e.YNc(55,In,2,2,"ng-template",null,34,e.W1O),e.YNc(57,Zn,2,2,"ng-template",null,35,e.W1O),e.YNc(59,Rn,2,2,"ng-template",null,36,e.W1O)),2&t){const i=e.MAs(7),a=e.MAs(9);e.Q6J("id",n.id),e.xp6(1),e.Q6J("ngIf",n._message),e.xp6(3),e.Q6J("id",n.id+"-breadcrumb"),e.xp6(6),e.Q6J("ngTemplateOutlet",n._breadcrumbList.length>0?i:a),e.xp6(1),e.Q6J("ngForOf",n._breadcrumbList),e.xp6(2),e.Q6J("ngIf",n.readonly||0===n.selectedItems.length),e.xp6(1),e.Q6J("ngIf",!n.readonly&&n.selectedItems.length>0),e.xp6(2),e.Q6J("fileTypes",n.fileTypes)("maxFilenameLength",n.maxFilenameLength)("maxFileSize",n.maxFileSize)("mimeTypes",n.mimeTypes)("dragndrop",!n.readonly)("disabled",n.disabled)("multiple",n.multiple),e.xp6(1),e.Q6J("ngIf",n._visibleList.length>0),e.xp6(1),e.Q6J("ngIf",n._showDragDropArea),e.xp6(1),e.Q6J("ngIf",0===n._visibleList.length),e.xp6(1),e.Q6J("ngIf",n.enablePagination),e.xp6(3),e.Q6J("ngForOf",n._itemsPerPageOptions),e.xp6(4),e.Q6J("title",e.lcZ(28,28,"platformUploadCollection.moveToBtnLabel")),e.xp6(3),e.hij(" ",e.lcZ(31,30,"platformUploadCollection.moveToBtnLabel")," "),e.xp6(2),e.Q6J("ngIf","file"===(null==n._activeItem?null:n._activeItem.type)),e.xp6(2),e.Q6J("title",e.lcZ(35,32,"platformUploadCollection.removeBtnLabel")),e.xp6(3),e.hij(" ",e.lcZ(38,34,"platformUploadCollection.removeBtnLabel")," "),e.xp6(2),e.Q6J("multiple",n.multiple)("disabled",n.disabled),e.xp6(2),e.Q6J("disabled",n.disabled)("multiple",!1)}},dependencies:[C.sg,C.O5,C.tP,C.RF,C.n9,Ct.a,Tt.Z,_e.tY,_e.y_,fe.K,fe.C,bt.n,yt.Q,Ut.u,re.r,Ft.g,ee.A,te.T,oe.J,vt.K,At.K,U.JJ,U.On,pe.o,St.L,It.U,Lt.N,Nt.Q,wt.B,de.k,Et.M,Zt.q,Pt.k,Mt.h,Dt.m,Jt.p,P,C.uU,W.n,Rt.s],styles:['.fdp-upload-collection__fd-icon{color:#0854a0!important;color:var(--sapHighlightColor)!important;margin-right:.625rem!important;font-size:1rem!important}.fdp-upload-collection fd-message-strip{margin-bottom:.625rem}.fdp-upload-collection__toolbar .fd-toolbar{margin-bottom:.625rem;border:0}.fdp-upload-collection__toolbar .fd-toolbar fd-input-group .sap-icon--search{color:#0854a0;color:var(--sapHighlightColor)}.fdp-upload-collection__no-data{text-align:center;min-height:230px;display:flex;align-items:center;flex-direction:column;justify-content:center}.fdp-upload-collection__no-data fd-icon{font-size:3rem;line-height:3rem;margin:0;color:#6a6d70;color:var(--sapContent_LabelColor)}.fdp-upload-collection__no-data h3{font-size:1.125rem;font-size:var(--sapFontHeader4Size);line-height:1rem;margin:8px 0}.fdp-upload-collection__no-data p{font-size:.875rem;font-size:var(--sapFontSize);line-height:1rem;color:#6a6d70;color:var(--sapContent_LabelColor);margin:0}.fdp-upload-collection__no-data.invisible{opacity:0}.fdp-upload-collection__table{position:relative}.fdp-upload-collection__table-footer{display:flex;justify-content:space-between;align-items:center;margin-top:.625rem}.fdp-upload-collection__table-footer .fdp-upload-collection__results--title,.fdp-upload-collection__table-footer .fdp-upload-collection__pagination--total{line-height:1.4;line-height:var(--sapContent_LineHeight);color:#32363a;color:var(--sapTextColor);font-family:"72","72full",Arial,Helvetica,sans-serif;font-family:var(--sapFontFamily);font-weight:400;-webkit-font-smoothing:antialiased;box-sizing:border-box;padding:0;margin:0;border:0;font-size:.875rem;font-size:var(--sapFontSize);color:#6a6d70;color:var(--sapContent_LabelColor);margin-right:.5rem}.fdp-upload-collection__table-footer .fdp-upload-collection__results--title:before,.fdp-upload-collection__table-footer .fdp-upload-collection__results--title:after,.fdp-upload-collection__table-footer .fdp-upload-collection__pagination--total:before,.fdp-upload-collection__table-footer .fdp-upload-collection__pagination--total:after{box-sizing:inherit;font-size:inherit}[dir=rtl] .fdp-upload-collection__table-footer .fdp-upload-collection__results--title,.fdp-upload-collection__table-footer .fdp-upload-collection__results--title[dir=rtl],[dir=rtl] .fdp-upload-collection__table-footer .fdp-upload-collection__pagination--total,.fdp-upload-collection__table-footer .fdp-upload-collection__pagination--total[dir=rtl]{margin-right:0;margin-left:.5rem}.fdp-upload-collection__table-footer .fdp-upload-collection__pagination--total{width:100%;align-self:center}.fdp-upload-collection__table-footer .fdp-upload-collection__pagination{font-size:.875rem;font-size:var(--sapFontSize);line-height:1.4;line-height:var(--sapContent_LineHeight);color:#32363a;color:var(--sapTextColor);font-family:"72","72full",Arial,Helvetica,sans-serif;font-family:var(--sapFontFamily);font-weight:400;-webkit-font-smoothing:antialiased;box-sizing:border-box;padding:0;margin:0;border:0;display:flex}.fdp-upload-collection__table-footer .fdp-upload-collection__pagination:before,.fdp-upload-collection__table-footer .fdp-upload-collection__pagination:after{box-sizing:inherit;font-size:inherit}.fdp-upload-collection__hidden{display:none}.fdp-upload-collection__vertical-align-center{display:flex;align-items:center}.fdp-upload-collection__cursor{cursor:pointer}.fdp-upload-collection__item_extension{white-space:nowrap}.fdp-upload-collection__actions{display:flex;justify-content:space-between;align-items:center}.fdp-upload-collection__actions .sap-icon--slim-arrow-down{display:none}.fdp-upload-collection__dragdrop-area{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;align-items:center;justify-content:center;flex-direction:column;background:rgba(255,255,255,.5);outline:2px dashed transparent;outline-color:#89919a;outline-color:var(--sapField_BorderColor);outline-offset:-4px;box-sizing:border-box}.fdp-upload-collection__dragdrop-area fd-icon{font-size:3rem;line-height:3rem;margin-bottom:1rem;color:#6a6d70;color:var(--sapContent_LabelColor)}.fdp-upload-collection__dragdrop-area p{font-size:1rem;line-height:1.125rem;color:#6a6d70;color:var(--sapContent_LabelColor)}.fdp-upload-collection__dragdrop-area.active{outline-color:#0854a0;outline-color:var(--sapContent_DragAndDropActiveColor);background:rgba(8,84,160,.08)}.fdp-upload-collection__dragdrop-area.active fd-icon,.fdp-upload-collection__dragdrop-area.active p{color:#0854a0;color:var(--sapContent_DragAndDropActiveColor)}.fdp-upload-collection .fd-form-item{align-items:center;flex-direction:row}.fdp-upload-collection-dialig-no-bg{background-color:transparent!important}[dir=rtl] .fdp-upload-collection fd-icon{margin-right:0;margin-left:.625rem}.fd-menu__list .disabled{background-color:#fff!important;background-color:var(--sapList_Background)!important;cursor:not-allowed}.fd-menu__list .disabled .fd-menu__title{color:#32363a!important;color:var(--sapList_TextColor)!important}\n'],encapsulation:2})}(0,_.k$)(),(0,_.k$)(),new Date(2018,4,1),(0,_.k$)(),(0,_.k$)(),new Date(2018,0,1),(0,_.k$)(),(0,_.k$)(),new Date(2010,9,4);var Bn=c(67044),f=c(20393),zn=c(22989),Fe=c(85422),Yn=c(27863),kn=c(49853),w=c(91005),jn=c(56451),ve=c(54004),Ae=c(82722);const D=["Liam","Noah","Oliver","William","Elijah","James","Benjamin","Lucas","Mason","Ethan","Alexander","Henry","Jacob","Michael","Daniel","Logan","Jackson","Sebastian","Jack","Aiden"],Se=[".jpg",".png",".pdf",".xls"];function Ie(){const l="abcdefghijklmnopqrstuvwxyz";return l[Math.floor(Math.random()*l.length)].toUpperCase()}function Le(l,o){return new Date(+l+Math.random()*(o.getTime()-l.getTime()))}function $n(l,o){return l=Math.ceil(l),o=Math.floor(o),Math.floor(Math.random()*(o-l+1))+l}function Ne(l){const o=[];for(let t=0;t<l;t++){const n=D[Math.floor(Math.random()*D.length)],i=$n(1,5242880),a=Se[Math.floor(Math.random()*Se.length)];let s;switch(a){case".jpg":case".png":s="https://picsum.photos/200";break;case".pdf":s="https://www.w3.org/WAI/ER/tests/xhtml/testfiles/resources/pdf/dummy.pdf";break;case".xls":s="https://file-examples-com.github.io/uploads/2017/02/file_example_XLS_10.xls"}!s||o.push({documentId:(0,_.k$)(),type:"file",name:`File-${t+1}${a}`,uploadedBy:{id:(0,_.k$)(),name:`${n} ${Ie()}.`},url:s,uploadedOn:Le(new Date(2018,0,1),new Date),fileSize:i,version:Math.floor(10*Math.random())||1})}return o}function we(l,o=3,t=0){const n=[];for(let i=0;i<l;i++){const a=D[Math.floor(Math.random()*D.length)],s=Ne(Math.floor(10*Math.random()));o!==t&&s.push(...we(Math.floor(10*Math.random()),o,t+1)),n.push({documentId:(0,_.k$)(),type:"folder",name:`Folder-${i+1}`,uploadedBy:{id:(0,_.k$)(),name:`${a} ${Ie()}.`},uploadedOn:Le(new Date(2018,0,1),new Date),files:s})}return n}var b=(()=>{return(l=b||(b={}))[l.UPDATE=0]="UPDATE",l[l.NEW_FOLDER=1]="NEW_FOLDER",l[l.UPDATE_VERSION=2]="UPDATE_VERSION",b;var l})();class J extends _t{constructor(o){super(),this._http=o,this.items=function Gn(l,o,t){return[...Ne(l),...we(o,t-1)]}(50,4,2),this._cancelUploadNewFileIds=[],this._activeRequest=null}upload({parentFolderId:o,items:t}){return console.log("upload",o,t),this._activeRequest=b.UPDATE,(0,T.of)(this.items).pipe((0,w.g)(5e3),(0,u.b)(()=>{const n=t.map(i=>(delete i.file,i.status=h.SUCCESSFUL,{temporaryDocumentId:i.documentId,item:i}));this._findParentFolderAndAddNewFiles(o,n),this._activeRequest=null}))}download(o){console.log("download",o);const t=o.items.map(n=>this._http.get(n.url,{responseType:"blob"}).pipe((0,ve.U)(i=>({blob:i,file:n}))));return(0,jn.T)(...t).pipe((0,ve.U)(({file:n,blob:i})=>{const a=document.createElement("a"),s=URL.createObjectURL(i);a.href=s,a.download=n.name,a.click(),URL.revokeObjectURL(s)}))}moveTo({from:o,to:t,items:n,newFolder:i}){console.log("moveTo",o,t,n,i);const a=n.map(s=>s.documentId);if(this._findParentFolderAndRemoveItemsByIds(o?o.documentId:null,a),i){const s=this._generateNewFolder(i.folderName);this._findParentFolderAndAddFiles(i.parentFolderId,[s]),this._findParentFolderAndAddFiles(s.documentId,n)}else this._findParentFolderAndAddFiles(t?t.documentId:null,n);return(0,T.of)(this.items)}delete({parentFolderId:o,items:t}){console.log("delete",o,t);const n=t.map(i=>i.documentId);return this._findParentFolderAndRemoveItemsByIds(o,n),(0,T.of)(this.items)}fileRenamed({parentFolderId:o,item:t,fileName:n}){console.log("fileRenamed",o,t,n);const i={...t,name:n};return this._findParentFolderAndUpdateItem(o,i),(0,T.of)(this.items).pipe((0,w.g)(5e3))}newFolder({parentFolderId:o,folder:t}){console.log("newFolder",t,o),this._activeRequest=b.NEW_FOLDER;const n=new L.x;return(0,T.of)(this.items).pipe((0,w.g)(5e3),(0,u.b)(()=>{const i=t.documentId;this._cancelUploadNewFileIds.includes(i)&&(this._cancelUploadNewFileIds=this._cancelUploadNewFileIds.filter(s=>s!==i),this._activeRequest=null,n.next())}),(0,Ae.R)(n),(0,u.b)(()=>{const i={temporaryDocumentId:t.documentId,item:{...t,status:h.SUCCESSFUL}};this._findParentFolderAndAddNewFiles(o,[i]),this._activeRequest=null}))}updateVersion({parentFolderId:o,item:t,newItem:n}){console.log("updateVersion",o,t),this._activeRequest=b.UPDATE_VERSION;const i=new L.x;return(0,T.of)(this.items).pipe((0,w.g)(5e3),(0,u.b)(()=>{const a=t.documentId;this._cancelUploadNewFileIds.includes(a)&&(this._cancelUploadNewFileIds=this._cancelUploadNewFileIds.filter(d=>d!==a),this._activeRequest=null,i.next(!0))}),(0,u.b)(()=>{const a={...t,status:h.SUCCESSFUL,uploadedOn:new Date,uploadedBy:{id:Date.now(),name:"You"},version:+t.version,name:n.name,fileSize:n.size};this._findParentFolderAndUpdateItem(o,a),this._activeRequest=null}),(0,Ae.R)(i))}runAfterFail({parentFolderId:o,items:t}){console.log("runAfterFail",o,t);const n=t[0];return this._findParentFolderAndAddNewFiles(o,[{temporaryDocumentId:n.documentId,item:{...n,status:h.SUCCESSFUL}}]),(0,T.of)(this.items)}cancelUploadNewFile({parentFolderId:o,item:t}){console.log("cancelUploadNewFile",o,t);const n=t.documentId;return this._cancelUploadNewFileIds.push(n),this._activeRequest===b.NEW_FOLDER&&this._findParentFolderAndRemoveItemsByIds(o,[n]),this._activeRequest===b.UPDATE&&this._findParentFolderAndRemoveItemsByIds(o,[n]),this._activeRequest===b.UPDATE_VERSION&&(delete t.status,this._findParentFolderAndUpdateItem(o,t)),(0,T.of)([])}_findParentFolderAndUpdateItem(o,t,n=this.items){if(o)for(let i=0;i<n.length;i++){const a=n[i];if("folder"===a.type)if(a.documentId===o){if(-1!==a.files.findIndex(d=>d.documentId===t.documentId)){a.files[i]=t;break}}else this._findParentFolderAndUpdateItem(o,t,a.files)}else{const i=n.findIndex(a=>a.documentId===t.documentId);-1!==i&&(n[i]=t)}}_findParentFolderAndAddNewFiles(o,t,n=this.items){if(0!==t.length){if(!o){const i=t.pop(),a=n.findIndex(s=>s.documentId===i.temporaryDocumentId);return-1!==a&&(n[a]=i.item),void(t.length>0&&this._findParentFolderAndAddNewFiles(o,t))}for(let i=0;i<n.length;i++){const a=n[i];if("folder"===a.type){if(a.documentId===o){const s=t.reduce((d,r)=>(d[r.temporaryDocumentId]=r.item,d),{});a.files=a.files.map(d=>d.documentId&&s[d.documentId]?s[d.documentId]:d);break}this._findParentFolderAndAddNewFiles(o,t,a.files)}}}}_findParentFolderAndAddFiles(o,t,n=this.items){if(0!==t.length){if(!o)return void n.push(...t);for(let i=0;i<n.length;i++){const a=n[i];if("folder"===a.type){if(a.documentId===o){a.files.push(...t);break}this._findParentFolderAndAddFiles(o,t,a.files)}}}}_findParentFolderAndRemoveItemsByIds(o,t,n=this.items){if(0!==t.length){if(!o){const i=t.pop(),a=n.findIndex(s=>s.documentId===i);return void(-1!==a&&(n.splice(a,1),this._findParentFolderAndRemoveItemsByIds(o,t)))}for(let i=0;i<n.length;i++){const a=n[i];if("folder"===a.type){if(a.documentId===o){a.files=a.files.filter(s=>!t.some(d=>d===s.documentId));break}this._findParentFolderAndRemoveItemsByIds(o,t,a.files)}}}}_generateNewFolder(o){return{documentId:(0,_.k$)(),type:"folder",name:o,uploadedBy:{id:(0,_.k$)(),name:"You"},uploadedOn:new Date,files:[],status:h.SUCCESSFUL}}}var R=c(80529),Wn=c(42165);class O{constructor(o){this._http=o,this.itemsPerPage=[{label:5,default:!1},{label:10,default:!0},{label:15,default:!1},{label:20,default:!1}],this.mimeTypes=["image/png","image/jpeg"],this.fileTypes=["jpg","png","bmp"],this.dataSource=new A(new qn(o))}typeMismatch({source:o,payload:t}){console.log("typeMismatch",o,t)}filenameLengthExceed({source:o,payload:t}){console.log("filenameLengthExceed",o,t)}fileSizeExceed({source:o,payload:t}){console.log("fileSizeExceed",o,t)}static#e=this.\u0275fac=function(t){return new(t||O)(e.Y36(R.eN))};static#t=this.\u0275cmp=e.Xpm({type:O,selectors:[["fdp-upload-collection-example"]],decls:1,vars:5,consts:[["fdCompact","","maxFileSize","1mb",3,"dataSource","maxFilenameLength","mimeTypes","fileTypes","itemsPerPage","typeMismatch","filenameLengthExceed","fileSizeExceed"]],template:function(t,n){1&t&&(e.TgZ(0,"fdp-upload-collection",0),e.NdJ("typeMismatch",function(a){return n.typeMismatch(a)})("filenameLengthExceed",function(a){return n.filenameLengthExceed(a)})("fileSizeExceed",function(a){return n.fileSizeExceed(a)}),e.qZA()),2&t&&e.Q6J("dataSource",n.dataSource)("maxFilenameLength",20)("mimeTypes",n.mimeTypes)("fileTypes",n.fileTypes)("itemsPerPage",n.itemsPerPage)},dependencies:[Wn.$,F],encapsulation:2})}class qn extends J{fetch(o){return super.fetch(o).pipe((0,w.g)(300))}}class Q{constructor(o){this._http=o,this.itemsPerPage=[{label:5,default:!1},{label:10,default:!0},{label:15,default:!1},{label:20,default:!1}],this.mimeTypes=["image/png","image/jpeg"],this.fileTypes=["jpg","png","bmp"],this.dataSource=new A(new J(o))}typeMismatch({source:o,payload:t}){console.log("typeMismatch",o,t)}filenameLengthExceed({source:o,payload:t}){console.log("filenameLengthExceed",o,t)}fileSizeExceed({source:o,payload:t}){console.log("fileSizeExceed",o,t)}static#e=this.\u0275fac=function(t){return new(t||Q)(e.Y36(R.eN))};static#t=this.\u0275cmp=e.Xpm({type:Q,selectors:[["fdp-upload-collection-disabled-example"]],decls:1,vars:6,consts:[["maxFileSize","1mb",3,"dataSource","maxFilenameLength","disabled","mimeTypes","fileTypes","itemsPerPage","typeMismatch","filenameLengthExceed","fileSizeExceed"]],template:function(t,n){1&t&&(e.TgZ(0,"fdp-upload-collection",0),e.NdJ("typeMismatch",function(a){return n.typeMismatch(a)})("filenameLengthExceed",function(a){return n.filenameLengthExceed(a)})("fileSizeExceed",function(a){return n.fileSizeExceed(a)}),e.qZA()),2&t&&e.Q6J("dataSource",n.dataSource)("maxFilenameLength",20)("disabled",!0)("mimeTypes",n.mimeTypes)("fileTypes",n.fileTypes)("itemsPerPage",n.itemsPerPage)},dependencies:[F],encapsulation:2})}class B{constructor(o){this._http=o,this.itemsPerPage=[{label:5,default:!1},{label:10,default:!0},{label:15,default:!1},{label:20,default:!1}],this.mimeTypes=["image/png","image/jpeg"],this.fileTypes=["jpg","png","bmp"],this.dataSource=new A(new J(o))}typeMismatch({source:o,payload:t}){console.log("typeMismatch",o,t)}filenameLengthExceed({source:o,payload:t}){console.log("filenameLengthExceed",o,t)}fileSizeExceed({source:o,payload:t}){console.log("fileSizeExceed",o,t)}static#e=this.\u0275fac=function(t){return new(t||B)(e.Y36(R.eN))};static#t=this.\u0275cmp=e.Xpm({type:B,selectors:[["fdp-upload-collection-readonly-example"]],decls:1,vars:6,consts:[["maxFileSize","1mb",3,"dataSource","maxFilenameLength","readonly","mimeTypes","fileTypes","itemsPerPage","typeMismatch","filenameLengthExceed","fileSizeExceed"]],template:function(t,n){1&t&&(e.TgZ(0,"fdp-upload-collection",0),e.NdJ("typeMismatch",function(a){return n.typeMismatch(a)})("filenameLengthExceed",function(a){return n.filenameLengthExceed(a)})("fileSizeExceed",function(a){return n.fileSizeExceed(a)}),e.qZA()),2&t&&e.Q6J("dataSource",n.dataSource)("maxFilenameLength",20)("readonly",!0)("mimeTypes",n.mimeTypes)("fileTypes",n.fileTypes)("itemsPerPage",n.itemsPerPage)},dependencies:[F],encapsulation:2})}class z{constructor(o){this._http=o,this.itemsPerPage=[{label:5,default:!1},{label:10,default:!0},{label:15,default:!1},{label:20,default:!1}],this.mimeTypes=["image/png","image/jpeg"],this.fileTypes=["jpg","png","bmp"],this.dataSource=new A(new J(o))}typeMismatch({source:o,payload:t}){console.log("typeMismatch",o,t)}filenameLengthExceed({source:o,payload:t}){console.log("filenameLengthExceed",o,t)}fileSizeExceed({source:o,payload:t}){console.log("fileSizeExceed",o,t)}static#e=this.\u0275fac=function(t){return new(t||z)(e.Y36(R.eN))};static#t=this.\u0275cmp=e.Xpm({type:z,selectors:[["fdp-upload-collection-turn-off-example"]],decls:1,vars:7,consts:[["maxFileSize","1mb",3,"dataSource","maxFilenameLength","showSearch","enablePagination","mimeTypes","fileTypes","itemsPerPage","typeMismatch","filenameLengthExceed","fileSizeExceed"]],template:function(t,n){1&t&&(e.TgZ(0,"fdp-upload-collection",0),e.NdJ("typeMismatch",function(a){return n.typeMismatch(a)})("filenameLengthExceed",function(a){return n.filenameLengthExceed(a)})("fileSizeExceed",function(a){return n.fileSizeExceed(a)}),e.qZA()),2&t&&e.Q6J("dataSource",n.dataSource)("maxFilenameLength",20)("showSearch",!1)("enablePagination",!1)("mimeTypes",n.mimeTypes)("fileTypes",n.fileTypes)("itemsPerPage",n.itemsPerPage)},dependencies:[F],encapsulation:2})}const Y="platform-upload-collection-base-data-provider.ts";class k{constructor(){this.uploadCollection=[{language:"html",code:(0,f.getAssetFromModuleAssets)("platform-upload-collection-example.component.html"),fileName:"upload-collection-example",name:"Html"},{language:"typescript",code:(0,f.getAssetFromModuleAssets)("platform-upload-collection-example.component.ts"),fileName:"upload-collection-example",component:"UploadCollectionExampleComponent",name:"Component"},{language:"typescript",code:(0,f.getAssetFromModuleAssets)(Y),fileName:"upload-collection-base",component:"UploadCollectionBaseService",name:"DataProvider"}],this.uploadCollectionReadOnly=[{language:"html",code:(0,f.getAssetFromModuleAssets)("platform-upload-collection-readonly-example.component.html"),fileName:"upload-collection-example",name:"Html"},{language:"typescript",code:(0,f.getAssetFromModuleAssets)("platform-upload-collection-readonly-example.component.ts"),fileName:"upload-collection-example",component:"UploadCollectionExampleComponent",name:"Component"},{language:"typescript",code:(0,f.getAssetFromModuleAssets)(Y),fileName:"upload-collection-base",component:"UploadCollectionBaseService",name:"DataProvider"}],this.uploadCollectionDisabled=[{language:"html",code:(0,f.getAssetFromModuleAssets)("platform-upload-collection-disabled-example.component.html"),fileName:"upload-collection-disabled-example",name:"Html"},{language:"typescript",code:(0,f.getAssetFromModuleAssets)("platform-upload-collection-disabled-example.component.ts"),fileName:"upload-collection-disabled-example",component:"UploadCollectionExampleComponent",name:"Component"},{language:"typescript",code:(0,f.getAssetFromModuleAssets)(Y),fileName:"upload-collection-base",component:"UploadCollectionBaseService",name:"DataProvider"}],this.uploadCollectionTurnOff=[{language:"html",code:(0,f.getAssetFromModuleAssets)("platform-upload-collection-turn-off-example.component.html"),fileName:"upload-collection-disabled-example",name:"Html"},{language:"typescript",code:(0,f.getAssetFromModuleAssets)("platform-upload-collection-turn-off-example.component.ts"),fileName:"upload-collection-disabled-example",component:"UploadCollectionExampleComponent",name:"Component"},{language:"typescript",code:(0,f.getAssetFromModuleAssets)(Y),fileName:"upload-collection-base",component:"UploadCollectionBaseService",name:"DataProvider"}]}static#e=this.\u0275fac=function(t){return new(t||k)};static#t=this.\u0275cmp=e.Xpm({type:k,selectors:[["app-platform-upload-collection"]],decls:47,vars:4,consts:[["id","default","componentName","upload-collection"],[3,"exampleFiles"],["id","disabled","componentName","upload-collection"],[1,"code-snippet"],["id","readonly","componentName","upload-collection"],["id","without-pagination-and-search","componentName","upload-collection"]],template:function(t,n){1&t&&(e.TgZ(0,"fd-docs-section-title",0),e._uU(1," Default "),e.qZA(),e._UZ(2,"description"),e.TgZ(3,"component-example"),e._UZ(4,"fdp-upload-collection-example"),e.qZA(),e._UZ(5,"code-example",1),e.TgZ(6,"fd-docs-section-title",2),e._uU(7," Disabled State "),e.qZA(),e.TgZ(8,"description"),e._uU(9,"Use "),e.TgZ(10,"code",3),e._uU(11,'[disable]="true"'),e.qZA(),e._uU(12," to disable all CRUD buttons."),e.qZA(),e.TgZ(13,"component-example"),e._UZ(14,"fdp-upload-collection-disabled-example"),e.qZA(),e._UZ(15,"code-example",1),e.TgZ(16,"fd-docs-section-title",4),e._uU(17," Readonly State "),e.qZA(),e.TgZ(18,"description"),e._uU(19,"Use "),e.TgZ(20,"code",3),e._uU(21,'[readonly]="true"'),e.qZA(),e._uU(22," to hide all CRUD buttons."),e.qZA(),e.TgZ(23,"component-example"),e._UZ(24,"fdp-upload-collection-readonly-example"),e.qZA(),e._UZ(25,"code-example",1),e.TgZ(26,"fd-docs-section-title",5),e._uU(27," Without Pagination and Search\n"),e.qZA(),e.TgZ(28,"description"),e._uU(29," Use "),e.TgZ(30,"code",3),e._uU(31,'[showSearch]="false"'),e.qZA(),e._uU(32," to hide search input, by default "),e.TgZ(33,"code",3),e._uU(34,'[showSearch]="true"'),e.qZA(),e._uU(35,". "),e._UZ(36,"br"),e._uU(37," Use "),e.TgZ(38,"code",3),e._uU(39,'[enablePagination]="false"'),e.qZA(),e._uU(40," to hide pagination, by default "),e.TgZ(41,"code",3),e._uU(42,'[enablePagination]="true"'),e.qZA(),e._uU(43,".\n"),e.qZA(),e.TgZ(44,"component-example"),e._UZ(45,"fdp-upload-collection-turn-off-example"),e.qZA(),e._UZ(46,"code-example",1)),2&t&&(e.xp6(5),e.Q6J("exampleFiles",n.uploadCollection),e.xp6(10),e.Q6J("exampleFiles",n.uploadCollectionDisabled),e.xp6(10),e.Q6J("exampleFiles",n.uploadCollectionReadOnly),e.xp6(21),e.Q6J("exampleFiles",n.uploadCollectionTurnOff))},dependencies:[zn.E,Fe.w,Yn.k,kn.O,O,Q,B,z],encapsulation:2})}var il=c(16020),al=c(73277),sl=c(31954),cl=c(87960),dl=c(57376);class j{static#e=this.\u0275fac=function(t){return new(t||j)};static#t=this.\u0275cmp=e.Xpm({type:j,selectors:[["fd-upload-collection-header"]],decls:31,vars:1,consts:[["label","SAP Ariba Component","title","SAP Ariba Component","color","8"],[1,"code-snippet"],["module","PlatformUploadCollectionModule","subPackage","upload-collection"],[3,"hasI18n"]],template:function(t,n){1&t&&(e.TgZ(0,"fd-doc-page")(1,"header"),e._uU(2,"Upload Collection"),e.qZA(),e._UZ(3,"fd-info-label",0),e.TgZ(4,"description")(5,"p"),e._uU(6,"The upload collection allows users to upload one or more files from different devices."),e.qZA(),e.TgZ(7,"h3"),e._uU(8,"Usage"),e.qZA(),e.TgZ(9,"p"),e._uU(10,"Use the upload collection if:"),e.qZA(),e.TgZ(11,"ul")(12,"li"),e._uU(13,"You want to show a list of uploaded files that can be modified."),e.qZA(),e.TgZ(14,"li"),e._uU(15,"You want to allow users to add or remove files, and to change the file names."),e.qZA()(),e.TgZ(16,"p"),e._uU(17,"Don't use the upload collection if:"),e.qZA(),e.TgZ(18,"ul")(19,"li"),e._uU(20,"The user can upload only one file to the app. In this case, use the FileUploader control instead."),e.qZA()(),e.TgZ(21,"h3"),e._uU(22,"Required"),e.qZA(),e.TgZ(23,"ul")(24,"li"),e._uU(25," To use all CRUD operations need to describe "),e.TgZ(26,"code",1),e._uU(27,"UploadCollectionService"),e.qZA(),e._uU(28," (look at examples) "),e.qZA()()(),e._UZ(29,"import",2)(30,"fd-header-tabs",3),e.qZA()),2&t&&(e.xp6(30),e.Q6J("hasI18n",!0))},dependencies:[il.k,al.G,sl.c,Fe.w,cl.e,dl.i],encapsulation:2})}const rl=[{path:"",component:j,children:[{path:"",component:k},{path:"api",component:f.ApiComponent,data:{content:Bn.X.uploadCollection}},{path:"i18n",component:f.I18nDocsComponent,data:(0,f.getI18nKey)("platformUploadCollection")}]}];class H{static#e=this.\u0275fac=function(t){return new(t||H)};static#t=this.\u0275mod=e.oAB({type:H});static#o=this.\u0275inj=e.cJS({providers:[(0,y.PP)("fdp-upload-collection"),(0,f.currentComponentProvider)("upload-collection")],imports:[$.Bz.forChild(rl),f.SharedDocumentationPageModule,E,$.Bz]})}}}]);